{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abdel\\\\PhpstormProjects\\\\update\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { Graph } from 'react-d3-graph';\nimport NewDescription from \"./NewDescription\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Grid from '@material-ui/core/Grid';\nimport CreateLien from \"./creation/CreateLien\";\nimport CreateScenario from \"./creation/CreateScenario\";\nimport * as Constants from \"./configuration_app/Constants\";\nimport { graphConfig } from './configuration_app/graphe';\nimport { grapheStyle } from \"./styles/styles\";\nimport PartieGauche from \"./PartieGauche\";\nimport TelechargerActivite from \"./conversion/TelechargerActivite\";\nimport { activites, scenarios, selection, quetes, taches } from \"./data/data\";\nimport { rechercheNav } from \"./fonctions/helper/NavigationHelper\";\n/* met à jour le graphe */\n\nexport function update() {\n  if (this._isMounted) {\n    this.setState({\n      data: selection\n    });\n  }\n\n  remplissageStockage();\n  let monObjet = JSON.parse(localStorage.getItem(\"Selection\"));\n  console.log(monObjet);\n}\nexport function remplissageStockage() {\n  localStorage.setItem('Activites', JSON.stringify(activites));\n  localStorage.setItem('Taches', JSON.stringify(taches));\n  localStorage.setItem('Taches', JSON.stringify(scenarios));\n  localStorage.setItem('Taches', JSON.stringify(quetes));\n  localStorage.setItem('Selection', JSON.stringify(selection));\n}\nexport function onCloseModalLien() {\n  this.setState(this.stateLien = {\n    openLien: false\n  });\n}\nexport function onCloseModalScenario() {\n  this.setState(this.stateActivite = {\n    openScenario: false\n  });\n}\n/*\r\nfunction smoothCurveRadius(x1, y1, x2, y2) {\r\n    const dx = x2 - x1;\r\n    const dy = y2 - y1;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}*/\n\nconst LINE_TYPES = {\n  STRAIGHT: \"STRAIGHT\",\n  CURVE_SMOOTH: \"CURVE_SMOOTH\",\n  CURVE_FULL: \"CURVE_FULL\"\n};\n\nfunction straightLineRadius() {\n  return 0;\n}\n\nconst RADIUS_STRATEGIES = {\n  [LINE_TYPES.STRAIGHT]: straightLineRadius\n};\n\nfunction getRadiusStrategy(type) {\n  return RADIUS_STRATEGIES[type] || RADIUS_STRATEGIES[LINE_TYPES.STRAIGHT];\n}\n\nexport function buildLinkPathDefinition({\n  source = {},\n  target = {}\n}, type = LINE_TYPES.STRAIGHT) {\n  const sx = source.x,\n        sy = source.y;\n  const tx = target.x,\n        ty = target.y;\n  const validType = LINE_TYPES[type] || LINE_TYPES.STRAIGHT;\n  const radius = getRadiusStrategy(validType)(sx, sy, tx, ty);\n  return \"M\".concat(sx, \",\").concat(sy, \"A\").concat(radius, \",\").concat(radius, \" 0 0,1 \").concat(tx, \",\").concat(ty);\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.stateActivite = {\n      openScenario: false // permet ouverture et fermeture du modal activité\n\n    };\n    this.stateLien = {\n      openLien: false\n    };\n\n    this.onOpenModalScenario = () => {\n      this.setState(this.stateActivite = {\n        openScenario: true\n      });\n    };\n\n    this.onOpenModalLien = () => {\n      this.setState(this.stateLien = {\n        openLien: true\n      });\n    };\n\n    this.onClickNode = nodeId => {\n      //fonction qui met une couleur sur le noeud sélectionner du graphe\n      for (let i = 0; i < selection.nodes.length; i++) {\n        selection.nodes[i].color = Constants.GRAPH_NODES_DEFAULT_COLOR;\n\n        if (selection.nodes[i].id == nodeId) {\n          selection.node = selection.nodes[i];\n          selection.nodes[i].color = Constants.GRAPH_NODES_SELECTED_COLOR;\n        }\n      }\n\n      let search = rechercheNav(nodeId);\n      let tab = search.tab;\n      let i = search.i;\n      selection.node = tab[i];\n      update();\n    };\n\n    this.onClickGraph = () => {\n      //losrqu'on clique sur le graphe on reinitialise la couleur du dernier élément\n      for (let i = 0; i < selection.nodes.length; i++) {\n        selection.nodes[i].color = Constants.GRAPH_NODES_DEFAULT_COLOR;\n      }\n\n      selection.node = null;\n      update();\n    };\n\n    this.stateData = {\n      data: selection\n    }; // eslint-disable-next-line\n\n    update = update.bind(this); // eslint-disable-next-line\n\n    onCloseModalLien = onCloseModalLien.bind(this); // eslint-disable-next-line\n\n    onCloseModalScenario = onCloseModalScenario.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    const data = this.stateData.data;\n    const openScenario = this.stateActivite.openScenario;\n    const openLien = this.stateLien.openLien;\n    return React.createElement(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"center\",\n      alignItems: \"stretch\",\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(PartieGauche, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 7,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Graphe\",\n      style: grapheStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"entete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"actionsGraphe\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outlined\",\n      className: \"buttonMain\",\n      disabled: activites.length === 0,\n      color: \"primary\",\n      onClick: this.onOpenModalScenario,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"+\"), React.createElement(Button, {\n      variant: \"outlined\",\n      className: \"buttonMain\",\n      disabled: activites.length === 0 || selection.nodes.length < 2,\n      color: \"primary\",\n      onClick: this.onOpenModalLien,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Lien\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(TelechargerActivite, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    })), React.createElement(Dialog, {\n      open: openScenario,\n      onClose: onCloseModalScenario,\n      \"aria-labelledby\": \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      id: \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Nouveau\"), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(CreateScenario, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    })), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(Dialog, {\n      open: openLien,\n      onClose: onCloseModalLien,\n      \"aria-labelledby\": \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      id: \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Nouveau Lien\"), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(CreateLien, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    })), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }))),\n    /* ici le graphe, il gére tout le drag and drop, le dessin des liens ect*/\n    this.stateData.data.nodes.length !== 0 ? React.createElement(Graph, {\n      id: \"graph-id\" // id is mandatory, if no id is defined rd3g will throw an error\n      ,\n      data: data,\n      config: graphConfig,\n      onClickNode: this.onClickNode,\n      onClickGraph: this.onClickGraph,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(NewDescription, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\abdel\\PhpstormProjects\\update\\src\\App.js"],"names":["React","Component","Graph","NewDescription","Button","Dialog","DialogTitle","DialogContent","DialogActions","Grid","CreateLien","CreateScenario","Constants","graphConfig","grapheStyle","PartieGauche","TelechargerActivite","activites","scenarios","selection","quetes","taches","rechercheNav","update","_isMounted","setState","data","remplissageStockage","monObjet","JSON","parse","localStorage","getItem","console","log","setItem","stringify","onCloseModalLien","stateLien","openLien","onCloseModalScenario","stateActivite","openScenario","LINE_TYPES","STRAIGHT","CURVE_SMOOTH","CURVE_FULL","straightLineRadius","RADIUS_STRATEGIES","getRadiusStrategy","type","buildLinkPathDefinition","source","target","sx","x","sy","y","tx","ty","validType","radius","App","constructor","props","onOpenModalScenario","onOpenModalLien","onClickNode","nodeId","i","nodes","length","color","GRAPH_NODES_DEFAULT_COLOR","id","node","GRAPH_NODES_SELECTED_COLOR","search","tab","onClickGraph","stateData","bind","componentDidMount","componentWillUnmount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Graph} from 'react-d3-graph';\r\nimport NewDescription from \"./NewDescription\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport CreateLien from \"./creation/CreateLien\";\r\nimport CreateScenario from \"./creation/CreateScenario\";\r\n\r\nimport * as Constants from \"./configuration_app/Constants\";\r\nimport { graphConfig } from './configuration_app/graphe';\r\nimport {grapheStyle} from \"./styles/styles\";\r\n\r\nimport PartieGauche from \"./PartieGauche\";\r\nimport TelechargerActivite from \"./conversion/TelechargerActivite\";\r\nimport {activites, scenarios, selection , quetes,taches} from \"./data/data\";\r\nimport {rechercheNav} from \"./fonctions/helper/NavigationHelper\";\r\n\r\n\r\n/* met à jour le graphe */\r\n\r\nexport function update () {\r\n    if (this._isMounted) {\r\n        this.setState({data : selection});\r\n    }\r\n    remplissageStockage();\r\n    let monObjet = JSON.parse(localStorage.getItem(\"Selection\"));\r\n    console.log(monObjet);\r\n\r\n}\r\n\r\nexport function remplissageStockage() {\r\n\r\n    \r\n    localStorage.setItem('Activites', JSON.stringify(activites));\r\n    localStorage.setItem('Taches', JSON.stringify(taches));\r\n    localStorage.setItem('Taches', JSON.stringify(scenarios));\r\n    localStorage.setItem('Taches', JSON.stringify(quetes));\r\n    localStorage.setItem('Selection', JSON.stringify(selection));\r\n\r\n\r\n}\r\n\r\nexport function onCloseModalLien () {\r\n    this.setState(this.stateLien ={openLien: false})\r\n}\r\n\r\nexport function onCloseModalScenario(){\r\n    this.setState(this.stateActivite = {openScenario: false});\r\n}\r\n\r\n/*\r\nfunction smoothCurveRadius(x1, y1, x2, y2) {\r\n    const dx = x2 - x1;\r\n    const dy = y2 - y1;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}*/\r\n\r\nconst LINE_TYPES = {\r\n    STRAIGHT: \"STRAIGHT\",\r\n    CURVE_SMOOTH: \"CURVE_SMOOTH\",\r\n    CURVE_FULL: \"CURVE_FULL\",\r\n};\r\n\r\nfunction straightLineRadius() {\r\n    return 0;\r\n}\r\n\r\nconst RADIUS_STRATEGIES = {\r\n    [LINE_TYPES.STRAIGHT]: straightLineRadius,\r\n};\r\n\r\nfunction getRadiusStrategy(type) {\r\n    return RADIUS_STRATEGIES[type] || RADIUS_STRATEGIES[LINE_TYPES.STRAIGHT];\r\n}\r\n\r\nexport function buildLinkPathDefinition({ source = {}, target = {} }, type = LINE_TYPES.STRAIGHT) {\r\n    const { x: sx, y: sy } = source;\r\n    const { x: tx, y: ty } = target;\r\n    const validType = LINE_TYPES[type] || LINE_TYPES.STRAIGHT;\r\n    const radius = getRadiusStrategy(validType)(sx, sy, tx, ty);\r\n\r\n    return `M${sx},${sy}A${radius},${radius} 0 0,1 ${tx},${ty}`;\r\n}\r\n\r\nclass App extends Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.stateData = {\r\n            data: selection,\r\n        };\r\n        // eslint-disable-next-line\r\n        update = update.bind(this);\r\n        // eslint-disable-next-line\r\n        onCloseModalLien = onCloseModalLien.bind(this);\r\n        // eslint-disable-next-line\r\n        onCloseModalScenario = onCloseModalScenario.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    stateActivite = {\r\n        openScenario: false          // permet ouverture et fermeture du modal activité\r\n    };\r\n\r\n    stateLien ={\r\n        openLien: false\r\n    };\r\n\r\n    //on gére ouverture et fermeture du modal\r\n    onOpenModalScenario = () =>{\r\n        this.setState(this.stateActivite ={ openScenario: true});\r\n\r\n    };\r\n\r\n    onOpenModalLien = () =>{\r\n        this.setState(this.stateLien ={ openLien: true});\r\n\r\n    };\r\n\r\n\r\n    onClickNode = (nodeId) => {\r\n        //fonction qui met une couleur sur le noeud sélectionner du graphe\r\n\r\n        for (let i=0;i<selection.nodes.length;i++){\r\n            selection.nodes[i].color=Constants.GRAPH_NODES_DEFAULT_COLOR;\r\n            if (selection.nodes[i].id==nodeId){\r\n                selection.node=selection.nodes[i];\r\n                selection.nodes[i].color=Constants.GRAPH_NODES_SELECTED_COLOR;\r\n            }\r\n        }\r\n\r\n        let search = rechercheNav(nodeId);\r\n        let tab = search.tab;\r\n        let i = search.i;\r\n        selection.node= tab[i];\r\n        update();\r\n\r\n    };\r\n\r\n    //action si fond du graphe cliquer, permet de réinitialiser le node cliquer (retour sur entité)\r\n    onClickGraph = () => {\r\n        //losrqu'on clique sur le graphe on reinitialise la couleur du dernier élément\r\n        for (let i=0;i<selection.nodes.length;i++){\r\n            selection.nodes[i].color=Constants.GRAPH_NODES_DEFAULT_COLOR;\r\n        }\r\n        selection.node=null;\r\n        update();\r\n\r\n    };\r\n\r\n    render() {\r\n        const { data } = this.stateData;\r\n        const { openScenario } = this.stateActivite;\r\n        const { openLien } = this.stateLien;\r\n\r\n        return (\r\n\r\n            <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"center\"\r\n        alignItems=\"stretch\"\r\n        className=\"App\">\r\n\r\n                {/*************************/}\r\n                <Grid item xs={2}>\r\n                    <PartieGauche/>\r\n                </Grid>\r\n                {/*************************/}\r\n\r\n                {/*************************/}\r\n                <Grid item xs={7}>\r\n                <div className=\"Graphe\" style={grapheStyle} >\r\n                    {/* modal pour créer une activité */}\r\n                    <div className=\"entete\">\r\n                        <div className=\"actionsGraphe\">\r\n                            <Button variant=\"outlined\" className=\"buttonMain\" disabled={activites.length===0} color=\"primary\" onClick={this.onOpenModalScenario}>\r\n                                +\r\n                            </Button>\r\n                            <Button variant=\"outlined\" className=\"buttonMain\" disabled={activites.length===0||selection.nodes.length<2 } color=\"primary\" onClick={this.onOpenModalLien}>\r\n                                Lien\r\n                            </Button>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <TelechargerActivite/>\r\n                        </div>\r\n\r\n                        <Dialog\r\n                            open={openScenario}\r\n                            onClose={onCloseModalScenario}\r\n                            aria-labelledby=\"form-dialog-title\"\r\n                        >\r\n                            <DialogTitle id=\"form-dialog-title\">{\"Nouveau\"}</DialogTitle>\r\n                            <DialogContent>\r\n                                <CreateScenario/>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                            </DialogActions>\r\n                        </Dialog>\r\n\r\n                        <Dialog\r\n                            open={openLien}\r\n                            onClose={onCloseModalLien}\r\n                            aria-labelledby=\"form-dialog-title\"\r\n                        >\r\n                            <DialogTitle id=\"form-dialog-title\">Nouveau Lien</DialogTitle>\r\n                            <DialogContent>\r\n                                <CreateLien/>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                            </DialogActions>\r\n                        </Dialog>\r\n                    </div>\r\n                    {\r\n                        /* ici le graphe, il gére tout le drag and drop, le dessin des liens ect*/\r\n                        this.stateData.data.nodes.length !== 0 ?\r\n                        (\r\n                            <Graph\r\n                                id=\"graph-id\" // id is mandatory, if no id is defined rd3g will throw an error\r\n                                data={data }\r\n                                config={graphConfig}\r\n                                onClickNode={this.onClickNode}\r\n                                onClickGraph={this.onClickGraph}\r\n                            />\r\n                        )\r\n                       :\r\n                        (\r\n                            <div></div>\r\n                        )\r\n                    }\r\n                </div>\r\n                </Grid>\r\n                {/*************************/}\r\n\r\n                {/*************************/}\r\n                {/* affichage de la partie droite, description du noeud séléctioner ou liste des entités */}\r\n                <Grid item xs={3}>\r\n                <div className=\"Description\">\r\n                    <NewDescription/>\r\n                </div>\r\n                </Grid>\r\n                {/*************************/}\r\n            </Grid>\r\n\r\n\r\n\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}