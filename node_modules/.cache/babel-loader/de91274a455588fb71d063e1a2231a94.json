{"ast":null,"code":"/**\r\n * DevExtreme (ui/widget/ui.search_box_mixin.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _text_box = require(\"../text_box\");\n\nvar _text_box2 = _interopRequireDefault(_text_box);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = {\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      searchMode: \"\",\n      searchExpr: null,\n      searchValue: \"\",\n      searchEnabled: false,\n      searchEditorOptions: {}\n    });\n  },\n  _initMarkup: function () {\n    this._renderSearch();\n\n    this.callBase();\n  },\n  _renderSearch: function () {\n    var editorOptions,\n        $element = this.$element(),\n        searchEnabled = this.option(\"searchEnabled\"),\n        searchBoxClassName = this._addWidgetPrefix(\"search\"),\n        rootElementClassName = this._addWidgetPrefix(\"with-search\");\n\n    if (!searchEnabled) {\n      $element.removeClass(rootElementClassName);\n\n      this._removeSearchBox();\n\n      return;\n    }\n\n    editorOptions = this._getSearchEditorOptions();\n\n    if (this._searchEditor) {\n      this._searchEditor.option(editorOptions);\n    } else {\n      $element.addClass(rootElementClassName);\n      this._$searchEditorElement = (0, _renderer2.default)(\"<div>\").addClass(searchBoxClassName).prependTo($element);\n      this._searchEditor = this._createComponent(this._$searchEditorElement, _text_box2.default, editorOptions);\n    }\n  },\n  _removeSearchBox: function () {\n    this._$searchEditorElement && this._$searchEditorElement.remove();\n    delete this._$searchEditorElement;\n    delete this._searchEditor;\n  },\n  _getSearchEditorOptions: function () {\n    var that = this,\n        userEditorOptions = that.option(\"searchEditorOptions\");\n    return (0, _extend.extend)({\n      mode: \"search\",\n      placeholder: _message2.default.format(\"Search\"),\n      tabIndex: that.option(\"tabIndex\"),\n      value: that.option(\"searchValue\"),\n      valueChangeEvent: \"input\",\n      onValueChanged: function (e) {\n        var searchTimeout = that.option(\"searchTimeout\");\n        that._valueChangeDeferred = new _deferred.Deferred();\n        clearTimeout(that._valueChangeTimeout);\n\n        that._valueChangeDeferred.done(function () {\n          this.option(\"searchValue\", e.value);\n        }.bind(that));\n\n        if (e.event && \"input\" === e.event.type && searchTimeout) {\n          that._valueChangeTimeout = setTimeout(function () {\n            that._valueChangeDeferred.resolve();\n          }, searchTimeout);\n        } else {\n          that._valueChangeDeferred.resolve();\n        }\n      }\n    }, userEditorOptions);\n  },\n  _getAriaTarget: function () {\n    if (this.option(\"searchEnabled\")) {\n      return this._itemContainer(true);\n    }\n\n    return this.$element();\n  },\n  _focusTarget: function () {\n    if (this.option(\"searchEnabled\")) {\n      return this._itemContainer(true);\n    }\n\n    return this.callBase();\n  },\n  _updateFocusState: function (e, isFocused) {\n    if (this.option(\"searchEnabled\")) {\n      this._toggleFocusClass(isFocused, this.$element());\n    }\n\n    this.callBase(e, isFocused);\n  },\n  getOperationBySearchMode: function (searchMode) {\n    return \"equals\" === searchMode ? \"=\" : searchMode;\n  },\n  _cleanAria: function ($target) {\n    this.setAria({\n      role: null,\n      activedescendant: null\n    }, $target);\n    $target.attr(\"tabIndex\", null);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"searchEnabled\":\n      case \"searchEditorOptions\":\n        this._cleanAria(this.option(\"searchEnabled\") ? this.$element() : this._itemContainer());\n\n        this._invalidate();\n\n        break;\n\n      case \"searchExpr\":\n      case \"searchMode\":\n      case \"searchValue\":\n        if (!this._dataSource) {\n          _ui2.default.log(\"W1009\");\n\n          return;\n        }\n\n        if (\"searchMode\" === args.name) {\n          this._dataSource.searchOperation(this.getOperationBySearchMode(args.value));\n        } else {\n          this._dataSource[args.name](args.value);\n        }\n\n        this._dataSource.load();\n\n        break;\n\n      case \"searchTimeout\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  focus: function () {\n    if (!this.option(\"focusedElement\") && this.option(\"searchEnabled\")) {\n      this._searchEditor && this._searchEditor.focus();\n      return;\n    }\n\n    this.callBase();\n  },\n  _refresh: function () {\n    if (this._valueChangeDeferred) {\n      this._valueChangeDeferred.resolve();\n    }\n\n    this.callBase();\n  }\n};","map":{"version":3,"sources":["C:/Users/abdel/PhpstormProjects/editeur_scenario_jeu/node_modules/devextreme/ui/widget/ui.search_box_mixin.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_extend","_message","_message2","_text_box","_text_box2","_ui","_ui2","_deferred","obj","__esModule","module","exports","_getDefaultOptions","extend","callBase","searchMode","searchExpr","searchValue","searchEnabled","searchEditorOptions","_initMarkup","_renderSearch","editorOptions","$element","option","searchBoxClassName","_addWidgetPrefix","rootElementClassName","removeClass","_removeSearchBox","_getSearchEditorOptions","_searchEditor","addClass","_$searchEditorElement","default","prependTo","_createComponent","remove","that","userEditorOptions","mode","placeholder","format","tabIndex","value","valueChangeEvent","onValueChanged","e","searchTimeout","_valueChangeDeferred","Deferred","clearTimeout","_valueChangeTimeout","done","bind","event","type","setTimeout","resolve","_getAriaTarget","_itemContainer","_focusTarget","_updateFocusState","isFocused","_toggleFocusClass","getOperationBySearchMode","_cleanAria","$target","setAria","role","activedescendant","attr","_optionChanged","args","name","_invalidate","_dataSource","log","searchOperation","load","focus","_refresh"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/widget/ui.search_box_mixin.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _text_box = require(\"../text_box\");\r\nvar _text_box2 = _interopRequireDefault(_text_box);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nmodule.exports = {\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            searchMode: \"\",\r\n            searchExpr: null,\r\n            searchValue: \"\",\r\n            searchEnabled: false,\r\n            searchEditorOptions: {}\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSearch();\r\n        this.callBase()\r\n    },\r\n    _renderSearch: function() {\r\n        var editorOptions, $element = this.$element(),\r\n            searchEnabled = this.option(\"searchEnabled\"),\r\n            searchBoxClassName = this._addWidgetPrefix(\"search\"),\r\n            rootElementClassName = this._addWidgetPrefix(\"with-search\");\r\n        if (!searchEnabled) {\r\n            $element.removeClass(rootElementClassName);\r\n            this._removeSearchBox();\r\n            return\r\n        }\r\n        editorOptions = this._getSearchEditorOptions();\r\n        if (this._searchEditor) {\r\n            this._searchEditor.option(editorOptions)\r\n        } else {\r\n            $element.addClass(rootElementClassName);\r\n            this._$searchEditorElement = (0, _renderer2.default)(\"<div>\").addClass(searchBoxClassName).prependTo($element);\r\n            this._searchEditor = this._createComponent(this._$searchEditorElement, _text_box2.default, editorOptions)\r\n        }\r\n    },\r\n    _removeSearchBox: function() {\r\n        this._$searchEditorElement && this._$searchEditorElement.remove();\r\n        delete this._$searchEditorElement;\r\n        delete this._searchEditor\r\n    },\r\n    _getSearchEditorOptions: function() {\r\n        var that = this,\r\n            userEditorOptions = that.option(\"searchEditorOptions\");\r\n        return (0, _extend.extend)({\r\n            mode: \"search\",\r\n            placeholder: _message2.default.format(\"Search\"),\r\n            tabIndex: that.option(\"tabIndex\"),\r\n            value: that.option(\"searchValue\"),\r\n            valueChangeEvent: \"input\",\r\n            onValueChanged: function(e) {\r\n                var searchTimeout = that.option(\"searchTimeout\");\r\n                that._valueChangeDeferred = new _deferred.Deferred;\r\n                clearTimeout(that._valueChangeTimeout);\r\n                that._valueChangeDeferred.done(function() {\r\n                    this.option(\"searchValue\", e.value)\r\n                }.bind(that));\r\n                if (e.event && \"input\" === e.event.type && searchTimeout) {\r\n                    that._valueChangeTimeout = setTimeout(function() {\r\n                        that._valueChangeDeferred.resolve()\r\n                    }, searchTimeout)\r\n                } else {\r\n                    that._valueChangeDeferred.resolve()\r\n                }\r\n            }\r\n        }, userEditorOptions)\r\n    },\r\n    _getAriaTarget: function() {\r\n        if (this.option(\"searchEnabled\")) {\r\n            return this._itemContainer(true)\r\n        }\r\n        return this.$element()\r\n    },\r\n    _focusTarget: function() {\r\n        if (this.option(\"searchEnabled\")) {\r\n            return this._itemContainer(true)\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _updateFocusState: function(e, isFocused) {\r\n        if (this.option(\"searchEnabled\")) {\r\n            this._toggleFocusClass(isFocused, this.$element())\r\n        }\r\n        this.callBase(e, isFocused)\r\n    },\r\n    getOperationBySearchMode: function(searchMode) {\r\n        return \"equals\" === searchMode ? \"=\" : searchMode\r\n    },\r\n    _cleanAria: function($target) {\r\n        this.setAria({\r\n            role: null,\r\n            activedescendant: null\r\n        }, $target);\r\n        $target.attr(\"tabIndex\", null)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"searchEnabled\":\r\n            case \"searchEditorOptions\":\r\n                this._cleanAria(this.option(\"searchEnabled\") ? this.$element() : this._itemContainer());\r\n                this._invalidate();\r\n                break;\r\n            case \"searchExpr\":\r\n            case \"searchMode\":\r\n            case \"searchValue\":\r\n                if (!this._dataSource) {\r\n                    _ui2.default.log(\"W1009\");\r\n                    return\r\n                }\r\n                if (\"searchMode\" === args.name) {\r\n                    this._dataSource.searchOperation(this.getOperationBySearchMode(args.value))\r\n                } else {\r\n                    this._dataSource[args.name](args.value)\r\n                }\r\n                this._dataSource.load();\r\n                break;\r\n            case \"searchTimeout\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    focus: function() {\r\n        if (!this.option(\"focusedElement\") && this.option(\"searchEnabled\")) {\r\n            this._searchEditor && this._searchEditor.focus();\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _refresh: function() {\r\n        if (this._valueChangeDeferred) {\r\n            this._valueChangeDeferred.resolve()\r\n        }\r\n        this.callBase()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}