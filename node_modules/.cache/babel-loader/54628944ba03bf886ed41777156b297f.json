{"ast":null,"code":"/**\r\n * DevExtreme (core/component.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _typeof = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n\n      if (\"value\" in descriptor) {\n        descriptor.writable = true;\n      }\n\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) {\n      defineProperties(Constructor.prototype, protoProps);\n    }\n\n    if (staticProps) {\n      defineProperties(Constructor, staticProps);\n    }\n\n    return Constructor;\n  };\n}();\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar Config = require(\"./config\"),\n    domAdapter = require(\"./dom_adapter\"),\n    extend = require(\"./utils/extend\").extend,\n    Class = require(\"./class\"),\n    Action = require(\"./action\"),\n    errors = require(\"./errors\"),\n    coreDataUtils = require(\"./utils/data\"),\n    commonUtils = require(\"./utils/common\"),\n    typeUtils = require(\"./utils/type\"),\n    deferredUtils = require(\"../core/utils/deferred\"),\n    Deferred = deferredUtils.Deferred,\n    when = deferredUtils.when,\n    Callbacks = require(\"./utils/callbacks\"),\n    EventsMixin = require(\"./events_mixin\"),\n    publicComponentUtils = require(\"./utils/public_component\"),\n    devices = require(\"./devices\"),\n    isFunction = typeUtils.isFunction,\n    noop = commonUtils.noop;\n\nvar cachedGetters = {};\nvar cachedSetters = {};\n\nvar PostponedOperations = function () {\n  function PostponedOperations() {\n    _classCallCheck(this, PostponedOperations);\n\n    this._postponedOperations = {};\n  }\n\n  _createClass(PostponedOperations, [{\n    key: \"add\",\n    value: function (key, fn, postponedPromise) {\n      if (key in this._postponedOperations) {\n        postponedPromise && this._postponedOperations[key].promises.push(postponedPromise);\n      } else {\n        var completePromise = new Deferred();\n        this._postponedOperations[key] = {\n          fn: fn,\n          completePromise: completePromise,\n          promises: postponedPromise ? [postponedPromise] : []\n        };\n      }\n\n      return this._postponedOperations[key].completePromise.promise();\n    }\n  }, {\n    key: \"callPostponedOperations\",\n    value: function () {\n      for (var key in this._postponedOperations) {\n        var operation = this._postponedOperations[key];\n\n        if (typeUtils.isDefined(operation)) {\n          if (operation.promises && operation.promises.length) {\n            when.apply(void 0, _toConsumableArray(operation.promises)).done(operation.fn).then(operation.completePromise.resolve);\n          } else {\n            operation.fn().done(operation.completePromise.resolve);\n          }\n        }\n      }\n\n      this._postponedOperations = {};\n    }\n  }]);\n\n  return PostponedOperations;\n}();\n\nvar Component = Class.inherit({\n  _setDeprecatedOptions: function () {\n    this._deprecatedOptions = {};\n  },\n  _getDeprecatedOptions: function () {\n    return this._deprecatedOptions;\n  },\n  _getOptionAliasesByName: function (optionName) {\n    var _this = this;\n\n    return Object.keys(this._deprecatedOptions).filter(function (aliasName) {\n      return optionName === _this._deprecatedOptions[aliasName].alias;\n    });\n  },\n  _getDefaultOptions: function () {\n    return {\n      onInitialized: null,\n      onOptionChanged: null,\n      onDisposing: null,\n      defaultOptionsRules: null\n    };\n  },\n  _setDefaultOptions: function () {\n    this._options = this._getDefaultOptions();\n  },\n  _defaultOptionsRules: function () {\n    return [];\n  },\n  _setOptionsByDevice: function (customRules) {\n    var rules = this._defaultOptionsRules();\n\n    if (Array.isArray(customRules)) {\n      rules = rules.concat(customRules);\n    }\n\n    var rulesOptions = this._convertRulesToOptions(rules);\n\n    extend(true, this._options, rulesOptions);\n\n    for (var fieldName in this._optionsByReference) {\n      if (rulesOptions.hasOwnProperty(fieldName)) {\n        this._options[fieldName] = rulesOptions[fieldName];\n      }\n    }\n  },\n  _convertRulesToOptions: function (rules) {\n    var options = {};\n    var currentDevice = devices.current();\n\n    var deviceMatch = function (device, filter) {\n      var filterArray = [];\n      Array.prototype.push.call(filterArray, filter);\n      return 1 === filterArray.length && typeUtils.isEmptyObject(filterArray[0]) || commonUtils.findBestMatches(device, filterArray).length > 0;\n    };\n\n    for (var i = 0; i < rules.length; i++) {\n      var match,\n          rule = rules[i],\n          deviceFilter = rule.device || {};\n\n      if (isFunction(deviceFilter)) {\n        match = deviceFilter(currentDevice);\n      } else {\n        match = deviceMatch(currentDevice, deviceFilter);\n      }\n\n      if (match) {\n        extend(options, rule.options);\n      }\n    }\n\n    return options;\n  },\n  _isInitialOptionValue: function (name) {\n    var optionValue = this.option(name),\n        initialOptionValue = this.initialOption(name),\n        isInitialOption = isFunction(optionValue) && isFunction(initialOptionValue) ? optionValue.toString() === initialOptionValue.toString() : commonUtils.equalByValue(optionValue, initialOptionValue);\n    return isInitialOption;\n  },\n  _setOptionsByReference: function () {\n    this._optionsByReference = {};\n  },\n  _getOptionsByReference: function () {\n    return this._optionsByReference;\n  },\n  ctor: function (options) {\n    this.NAME = publicComponentUtils.name(this.constructor);\n    options = options || {};\n\n    if (options.eventsStrategy) {\n      this.setEventsStrategy(options.eventsStrategy);\n    }\n\n    this._options = {};\n    this._updateLockCount = 0;\n    this._optionChangedCallbacks = options._optionChangedCallbacks || Callbacks();\n    this._disposingCallbacks = options._disposingCallbacks || Callbacks();\n    this.postponedOperations = new PostponedOperations();\n    this.beginUpdate();\n\n    try {\n      this._suppressDeprecatedWarnings();\n\n      this._setOptionsByReference();\n\n      this._setDeprecatedOptions();\n\n      this._setDefaultOptions();\n\n      if (options && options.onInitializing) {\n        options.onInitializing.apply(this, [options]);\n      }\n\n      this._setOptionsByDevice(options.defaultOptionsRules);\n\n      this._resumeDeprecatedWarnings();\n\n      this._initOptions(options);\n    } finally {\n      this.endUpdate();\n    }\n  },\n  _initOptions: function (options) {\n    this.option(options);\n  },\n  _optionValuesEqual: function (name, oldValue, newValue) {\n    oldValue = coreDataUtils.toComparable(oldValue, true);\n    newValue = coreDataUtils.toComparable(newValue, true);\n\n    if (oldValue && newValue && typeUtils.isRenderer(oldValue) && typeUtils.isRenderer(newValue)) {\n      return newValue.is(oldValue);\n    }\n\n    var oldValueIsNaN = oldValue !== oldValue,\n        newValueIsNaN = newValue !== newValue;\n\n    if (oldValueIsNaN && newValueIsNaN) {\n      return true;\n    }\n\n    if (null === oldValue || \"object\" !== (\"undefined\" === typeof oldValue ? \"undefined\" : _typeof(oldValue)) || domAdapter.isElementNode(oldValue)) {\n      return oldValue === newValue;\n    }\n\n    return false;\n  },\n  _init: function () {\n    this._createOptionChangedAction();\n\n    this.on(\"disposing\", function (args) {\n      this._disposingCallbacks.fireWith(this, [args]);\n    }.bind(this));\n  },\n  _createOptionChangedAction: function () {\n    this._optionChangedAction = this._createActionByOption(\"onOptionChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\", \"designMode\"]\n    });\n  },\n  _createDisposingAction: function () {\n    this._disposingAction = this._createActionByOption(\"onDisposing\", {\n      excludeValidators: [\"disabled\", \"readOnly\", \"designMode\"]\n    });\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"onDisposing\":\n      case \"onInitialized\":\n        break;\n\n      case \"onOptionChanged\":\n        this._createOptionChangedAction();\n\n        break;\n\n      case \"defaultOptionsRules\":\n    }\n  },\n  _dispose: function () {\n    this._optionChangedCallbacks.empty();\n\n    this._createDisposingAction();\n\n    this._disposingAction();\n\n    this._disposeEvents();\n\n    this._disposed = true;\n  },\n  instance: function () {\n    return this;\n  },\n  beginUpdate: function () {\n    this._updateLockCount++;\n  },\n  endUpdate: function () {\n    this._updateLockCount = Math.max(this._updateLockCount - 1, 0);\n\n    if (!this._updateLockCount) {\n      this.postponedOperations.callPostponedOperations();\n\n      if (!this._initializing && !this._initialized) {\n        this._initializing = true;\n\n        try {\n          this._init();\n        } finally {\n          this._initializing = false;\n          this._updateLockCount++;\n\n          this._createActionByOption(\"onInitialized\", {\n            excludeValidators: [\"disabled\", \"readOnly\", \"designMode\"]\n          })();\n\n          this._updateLockCount--;\n          this._initialized = true;\n        }\n      }\n    }\n  },\n  _logWarningIfDeprecated: function (option) {\n    var info = this._deprecatedOptions[option];\n\n    if (info && !this._deprecatedOptionsSuppressed) {\n      this._logDeprecatedWarning(option, info);\n    }\n  },\n  _logDeprecatedWarningCount: 0,\n  _logDeprecatedWarning: function (option, info) {\n    var message = info.message || \"Use the '\" + info.alias + \"' option instead\";\n    errors.log(\"W0001\", this.NAME, option, info.since, message);\n    ++this._logDeprecatedWarningCount;\n  },\n  _suppressDeprecatedWarnings: function () {\n    this._deprecatedOptionsSuppressed = true;\n  },\n  _resumeDeprecatedWarnings: function () {\n    this._deprecatedOptionsSuppressed = false;\n  },\n  _optionChanging: noop,\n  _notifyOptionChanged: function (option, value, previousValue) {\n    var that = this;\n\n    if (this._initialized) {\n      var optionNames = [option].concat(that._getOptionAliasesByName(option));\n\n      for (var i = 0; i < optionNames.length; i++) {\n        var name = optionNames[i],\n            args = {\n          name: name.split(/[.[]/)[0],\n          fullName: name,\n          value: value,\n          previousValue: previousValue\n        };\n\n        that._optionChangedCallbacks.fireWith(that, [extend(that._defaultActionArgs(), args)]);\n\n        that._optionChangedAction(extend({}, args));\n\n        if (!that._disposed && this._cancelOptionChange !== args.name) {\n          that._optionChanged(args);\n        }\n      }\n    }\n  },\n  initialOption: function (optionName) {\n    var currentOptions,\n        currentInitialized = this._initialized;\n\n    if (!this._initialOptions) {\n      currentOptions = this._options;\n      this._options = {};\n      this._initialized = false;\n\n      this._setDefaultOptions();\n\n      this._setOptionsByDevice(currentOptions.defaultOptionsRules);\n\n      this._initialOptions = this._options;\n      this._options = currentOptions;\n      this._initialized = currentInitialized;\n    }\n\n    return this._initialOptions[optionName];\n  },\n  _defaultActionConfig: function () {\n    return {\n      context: this,\n      component: this\n    };\n  },\n  _defaultActionArgs: function () {\n    return {\n      component: this\n    };\n  },\n  _createAction: function (actionSource, config) {\n    var action,\n        that = this;\n    return function (e) {\n      if (!arguments.length) {\n        e = {};\n      }\n\n      if (!typeUtils.isPlainObject(e)) {\n        e = {\n          actionValue: e\n        };\n      }\n\n      action = action || new Action(actionSource, extend(config, that._defaultActionConfig()));\n      return action.execute.call(action, extend(e, that._defaultActionArgs()));\n    };\n  },\n  _createActionByOption: function (optionName, config) {\n    var action,\n        eventName,\n        actionFunc,\n        that = this;\n\n    var result = function () {\n      if (!eventName) {\n        config = config || {};\n\n        if (\"string\" !== typeof optionName) {\n          throw errors.Error(\"E0008\");\n        }\n\n        if (0 === optionName.indexOf(\"on\")) {\n          eventName = that._getEventName(optionName);\n        }\n\n        actionFunc = that.option(optionName);\n      }\n\n      if (!action && !actionFunc && !config.beforeExecute && !config.afterExecute && !that.hasEvent(eventName)) {\n        return;\n      }\n\n      if (!action) {\n        var beforeExecute = config.beforeExecute;\n\n        config.beforeExecute = function (args) {\n          beforeExecute && beforeExecute.apply(that, arguments);\n          that.fireEvent(eventName, args.args);\n        };\n\n        that._suppressDeprecatedWarnings();\n\n        action = that._createAction(actionFunc, config);\n\n        that._resumeDeprecatedWarnings();\n      }\n\n      if (Config().wrapActionsBeforeExecute) {\n        var beforeActionExecute = that.option(\"beforeActionExecute\") || noop;\n        var wrappedAction = beforeActionExecute(that, action, config) || action;\n        return wrappedAction.apply(that, arguments);\n      }\n\n      return action.apply(that, arguments);\n    };\n\n    if (!Config().wrapActionsBeforeExecute) {\n      var onActionCreated = that.option(\"onActionCreated\") || noop;\n      result = onActionCreated(that, result, config) || result;\n    }\n\n    return result;\n  },\n  _getEventName: function (actionName) {\n    return actionName.charAt(2).toLowerCase() + actionName.substr(3);\n  },\n  hasActionSubscription: function (actionName) {\n    return !!this.option(actionName) || this.hasEvent(this._getEventName(actionName));\n  },\n  isOptionDeprecated: function (name) {\n    var deprecatedOptions = this._getDeprecatedOptions();\n\n    return deprecatedOptions.hasOwnProperty(name);\n  },\n  _setOptionSilent: function (name, value) {\n    this._cancelOptionChange = name;\n    this.option(name, value);\n    this._cancelOptionChange = false;\n  },\n  option: function () {\n    var normalizeOptionName = function (that, name) {\n      var deprecate;\n\n      if (name) {\n        if (!that._cachedDeprecateNames) {\n          that._cachedDeprecateNames = [];\n\n          for (var optionName in that._deprecatedOptions) {\n            that._cachedDeprecateNames.push(optionName);\n          }\n        }\n\n        for (var i = 0; i < that._cachedDeprecateNames.length; i++) {\n          if (that._cachedDeprecateNames[i] === name) {\n            deprecate = that._deprecatedOptions[name];\n            break;\n          }\n        }\n\n        if (deprecate) {\n          that._logWarningIfDeprecated(name);\n\n          var alias = deprecate.alias;\n\n          if (alias) {\n            name = alias;\n          }\n        }\n      }\n\n      return name;\n    };\n\n    var getPreviousName = function (fullName) {\n      var splitNames = fullName.split(\".\");\n      splitNames.pop();\n      return splitNames.join(\".\");\n    };\n\n    var getFieldName = function (fullName) {\n      var splitNames = fullName.split(\".\");\n      return splitNames[splitNames.length - 1];\n    };\n\n    var getOptionValue = function (options, name, unwrapObservables) {\n      var getter = cachedGetters[name];\n\n      if (!getter) {\n        getter = cachedGetters[name] = coreDataUtils.compileGetter(name);\n      }\n\n      return getter(options, {\n        functionsAsIs: true,\n        unwrapObservables: unwrapObservables\n      });\n    };\n\n    var clearOptionsField = function (options, name) {\n      delete options[name];\n      var previousFieldName = getPreviousName(name),\n          fieldName = getFieldName(name),\n          fieldObject = previousFieldName ? getOptionValue(options, previousFieldName, false) : options;\n\n      if (fieldObject) {\n        delete fieldObject[fieldName];\n      }\n    };\n\n    var setOptionsField = function (options, fullName, value) {\n      var fieldObject,\n          fieldName = \"\";\n\n      do {\n        if (fieldName) {\n          fieldName = \".\" + fieldName;\n        }\n\n        fieldName = getFieldName(fullName) + fieldName;\n        fullName = getPreviousName(fullName);\n        fieldObject = fullName ? getOptionValue(options, fullName, false) : options;\n      } while (!fieldObject);\n\n      fieldObject[fieldName] = value;\n    };\n\n    var normalizeOptionValue = function (that, options, name, value) {\n      if (name) {\n        var alias = normalizeOptionName(that, name);\n\n        if (alias && alias !== name) {\n          setOptionsField(options, alias, value);\n          clearOptionsField(options, name);\n        }\n      }\n    };\n\n    var prepareOption = function prepareOption(that, options, name, value) {\n      if (typeUtils.isPlainObject(value)) {\n        for (var valueName in value) {\n          prepareOption(that, options, name + \".\" + valueName, value[valueName]);\n        }\n      }\n\n      normalizeOptionValue(that, options, name, value);\n    };\n\n    var setOptionValue = function (that, name, value) {\n      if (!cachedSetters[name]) {\n        cachedSetters[name] = coreDataUtils.compileSetter(name);\n      }\n\n      var path = name.split(/[.[]/);\n      cachedSetters[name](that._options, value, {\n        functionsAsIs: true,\n        merge: !that._getOptionsByReference()[name],\n        unwrapObservables: path.length > 1 && !!that._getOptionsByReference()[path[0]]\n      });\n    };\n\n    var setOption = function (that, name, value) {\n      var previousValue = getOptionValue(that._options, name, false);\n\n      if (that._optionValuesEqual(name, previousValue, value)) {\n        return;\n      }\n\n      if (that._initialized) {\n        that._optionChanging(name, previousValue, value);\n      }\n\n      setOptionValue(that, name, value);\n\n      that._notifyOptionChanged(name, value, previousValue);\n    };\n\n    return function (options, value) {\n      var that = this,\n          name = options;\n\n      if (arguments.length < 2 && \"object\" !== typeUtils.type(name)) {\n        name = normalizeOptionName(that, name);\n        return getOptionValue(that._options, name);\n      }\n\n      if (\"string\" === typeof name) {\n        options = {};\n        options[name] = value;\n      }\n\n      that.beginUpdate();\n\n      try {\n        var optionName;\n\n        for (optionName in options) {\n          prepareOption(that, options, optionName, options[optionName]);\n        }\n\n        for (optionName in options) {\n          setOption(that, optionName, options[optionName]);\n        }\n      } finally {\n        that.endUpdate();\n      }\n    };\n  }(),\n  _getOptionValue: function (name, context) {\n    var value = this.option(name);\n\n    if (isFunction(value)) {\n      return value.bind(context)();\n    }\n\n    return value;\n  }\n}).include(EventsMixin);\nmodule.exports = Component;\nmodule.exports.PostponedOperations = PostponedOperations;","map":{"version":3,"sources":["C:/Users/abdel/PhpstormProjects/editeur_scenario_jeu/node_modules/devextreme/core/component.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","Config","require","domAdapter","extend","Class","Action","errors","coreDataUtils","commonUtils","typeUtils","deferredUtils","Deferred","when","Callbacks","EventsMixin","publicComponentUtils","devices","isFunction","noop","cachedGetters","cachedSetters","PostponedOperations","_postponedOperations","value","fn","postponedPromise","promises","push","completePromise","promise","operation","isDefined","apply","done","then","resolve","Component","inherit","_setDeprecatedOptions","_deprecatedOptions","_getDeprecatedOptions","_getOptionAliasesByName","optionName","_this","keys","filter","aliasName","alias","_getDefaultOptions","onInitialized","onOptionChanged","onDisposing","defaultOptionsRules","_setDefaultOptions","_options","_defaultOptionsRules","_setOptionsByDevice","customRules","rules","concat","rulesOptions","_convertRulesToOptions","fieldName","_optionsByReference","hasOwnProperty","options","currentDevice","current","deviceMatch","device","filterArray","call","isEmptyObject","findBestMatches","match","rule","deviceFilter","_isInitialOptionValue","name","optionValue","option","initialOptionValue","initialOption","isInitialOption","toString","equalByValue","_setOptionsByReference","_getOptionsByReference","ctor","NAME","eventsStrategy","setEventsStrategy","_updateLockCount","_optionChangedCallbacks","_disposingCallbacks","postponedOperations","beginUpdate","_suppressDeprecatedWarnings","onInitializing","_resumeDeprecatedWarnings","_initOptions","endUpdate","_optionValuesEqual","oldValue","newValue","toComparable","isRenderer","is","oldValueIsNaN","newValueIsNaN","isElementNode","_init","_createOptionChangedAction","on","args","fireWith","bind","_optionChangedAction","_createActionByOption","excludeValidators","_createDisposingAction","_disposingAction","_optionChanged","_dispose","empty","_disposeEvents","_disposed","Math","max","callPostponedOperations","_initializing","_initialized","_logWarningIfDeprecated","info","_deprecatedOptionsSuppressed","_logDeprecatedWarning","_logDeprecatedWarningCount","message","log","since","_optionChanging","_notifyOptionChanged","previousValue","that","optionNames","split","fullName","_defaultActionArgs","_cancelOptionChange","currentOptions","currentInitialized","_initialOptions","_defaultActionConfig","context","component","_createAction","actionSource","config","action","e","arguments","isPlainObject","actionValue","execute","eventName","actionFunc","result","Error","indexOf","_getEventName","beforeExecute","afterExecute","hasEvent","fireEvent","wrapActionsBeforeExecute","beforeActionExecute","wrappedAction","onActionCreated","actionName","charAt","toLowerCase","substr","hasActionSubscription","isOptionDeprecated","deprecatedOptions","_setOptionSilent","normalizeOptionName","deprecate","_cachedDeprecateNames","getPreviousName","splitNames","pop","join","getFieldName","getOptionValue","unwrapObservables","getter","compileGetter","functionsAsIs","clearOptionsField","previousFieldName","fieldObject","setOptionsField","normalizeOptionValue","prepareOption","valueName","setOptionValue","compileSetter","path","merge","setOption","type","_getOptionValue","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/component.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _typeof = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function(obj) {\r\n    return typeof obj\r\n} : function(obj) {\r\n    return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n};\r\nvar _createClass = function() {\r\n    function defineProperties(target, props) {\r\n        for (var i = 0; i < props.length; i++) {\r\n            var descriptor = props[i];\r\n            descriptor.enumerable = descriptor.enumerable || false;\r\n            descriptor.configurable = true;\r\n            if (\"value\" in descriptor) {\r\n                descriptor.writable = true\r\n            }\r\n            Object.defineProperty(target, descriptor.key, descriptor)\r\n        }\r\n    }\r\n    return function(Constructor, protoProps, staticProps) {\r\n        if (protoProps) {\r\n            defineProperties(Constructor.prototype, protoProps)\r\n        }\r\n        if (staticProps) {\r\n            defineProperties(Constructor, staticProps)\r\n        }\r\n        return Constructor\r\n    }\r\n}();\r\n\r\nfunction _toConsumableArray(arr) {\r\n    if (Array.isArray(arr)) {\r\n        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\r\n            arr2[i] = arr[i]\r\n        }\r\n        return arr2\r\n    } else {\r\n        return Array.from(arr)\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\nvar Config = require(\"./config\"),\r\n    domAdapter = require(\"./dom_adapter\"),\r\n    extend = require(\"./utils/extend\").extend,\r\n    Class = require(\"./class\"),\r\n    Action = require(\"./action\"),\r\n    errors = require(\"./errors\"),\r\n    coreDataUtils = require(\"./utils/data\"),\r\n    commonUtils = require(\"./utils/common\"),\r\n    typeUtils = require(\"./utils/type\"),\r\n    deferredUtils = require(\"../core/utils/deferred\"),\r\n    Deferred = deferredUtils.Deferred,\r\n    when = deferredUtils.when,\r\n    Callbacks = require(\"./utils/callbacks\"),\r\n    EventsMixin = require(\"./events_mixin\"),\r\n    publicComponentUtils = require(\"./utils/public_component\"),\r\n    devices = require(\"./devices\"),\r\n    isFunction = typeUtils.isFunction,\r\n    noop = commonUtils.noop;\r\nvar cachedGetters = {};\r\nvar cachedSetters = {};\r\nvar PostponedOperations = function() {\r\n    function PostponedOperations() {\r\n        _classCallCheck(this, PostponedOperations);\r\n        this._postponedOperations = {}\r\n    }\r\n    _createClass(PostponedOperations, [{\r\n        key: \"add\",\r\n        value: function(key, fn, postponedPromise) {\r\n            if (key in this._postponedOperations) {\r\n                postponedPromise && this._postponedOperations[key].promises.push(postponedPromise)\r\n            } else {\r\n                var completePromise = new Deferred;\r\n                this._postponedOperations[key] = {\r\n                    fn: fn,\r\n                    completePromise: completePromise,\r\n                    promises: postponedPromise ? [postponedPromise] : []\r\n                }\r\n            }\r\n            return this._postponedOperations[key].completePromise.promise()\r\n        }\r\n    }, {\r\n        key: \"callPostponedOperations\",\r\n        value: function() {\r\n            for (var key in this._postponedOperations) {\r\n                var operation = this._postponedOperations[key];\r\n                if (typeUtils.isDefined(operation)) {\r\n                    if (operation.promises && operation.promises.length) {\r\n                        when.apply(void 0, _toConsumableArray(operation.promises)).done(operation.fn).then(operation.completePromise.resolve)\r\n                    } else {\r\n                        operation.fn().done(operation.completePromise.resolve)\r\n                    }\r\n                }\r\n            }\r\n            this._postponedOperations = {}\r\n        }\r\n    }]);\r\n    return PostponedOperations\r\n}();\r\nvar Component = Class.inherit({\r\n    _setDeprecatedOptions: function() {\r\n        this._deprecatedOptions = {}\r\n    },\r\n    _getDeprecatedOptions: function() {\r\n        return this._deprecatedOptions\r\n    },\r\n    _getOptionAliasesByName: function(optionName) {\r\n        var _this = this;\r\n        return Object.keys(this._deprecatedOptions).filter(function(aliasName) {\r\n            return optionName === _this._deprecatedOptions[aliasName].alias\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return {\r\n            onInitialized: null,\r\n            onOptionChanged: null,\r\n            onDisposing: null,\r\n            defaultOptionsRules: null\r\n        }\r\n    },\r\n    _setDefaultOptions: function() {\r\n        this._options = this._getDefaultOptions()\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return []\r\n    },\r\n    _setOptionsByDevice: function(customRules) {\r\n        var rules = this._defaultOptionsRules();\r\n        if (Array.isArray(customRules)) {\r\n            rules = rules.concat(customRules)\r\n        }\r\n        var rulesOptions = this._convertRulesToOptions(rules);\r\n        extend(true, this._options, rulesOptions);\r\n        for (var fieldName in this._optionsByReference) {\r\n            if (rulesOptions.hasOwnProperty(fieldName)) {\r\n                this._options[fieldName] = rulesOptions[fieldName]\r\n            }\r\n        }\r\n    },\r\n    _convertRulesToOptions: function(rules) {\r\n        var options = {};\r\n        var currentDevice = devices.current();\r\n        var deviceMatch = function(device, filter) {\r\n            var filterArray = [];\r\n            Array.prototype.push.call(filterArray, filter);\r\n            return 1 === filterArray.length && typeUtils.isEmptyObject(filterArray[0]) || commonUtils.findBestMatches(device, filterArray).length > 0\r\n        };\r\n        for (var i = 0; i < rules.length; i++) {\r\n            var match, rule = rules[i],\r\n                deviceFilter = rule.device || {};\r\n            if (isFunction(deviceFilter)) {\r\n                match = deviceFilter(currentDevice)\r\n            } else {\r\n                match = deviceMatch(currentDevice, deviceFilter)\r\n            }\r\n            if (match) {\r\n                extend(options, rule.options)\r\n            }\r\n        }\r\n        return options\r\n    },\r\n    _isInitialOptionValue: function(name) {\r\n        var optionValue = this.option(name),\r\n            initialOptionValue = this.initialOption(name),\r\n            isInitialOption = isFunction(optionValue) && isFunction(initialOptionValue) ? optionValue.toString() === initialOptionValue.toString() : commonUtils.equalByValue(optionValue, initialOptionValue);\r\n        return isInitialOption\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this._optionsByReference = {}\r\n    },\r\n    _getOptionsByReference: function() {\r\n        return this._optionsByReference\r\n    },\r\n    ctor: function(options) {\r\n        this.NAME = publicComponentUtils.name(this.constructor);\r\n        options = options || {};\r\n        if (options.eventsStrategy) {\r\n            this.setEventsStrategy(options.eventsStrategy)\r\n        }\r\n        this._options = {};\r\n        this._updateLockCount = 0;\r\n        this._optionChangedCallbacks = options._optionChangedCallbacks || Callbacks();\r\n        this._disposingCallbacks = options._disposingCallbacks || Callbacks();\r\n        this.postponedOperations = new PostponedOperations;\r\n        this.beginUpdate();\r\n        try {\r\n            this._suppressDeprecatedWarnings();\r\n            this._setOptionsByReference();\r\n            this._setDeprecatedOptions();\r\n            this._setDefaultOptions();\r\n            if (options && options.onInitializing) {\r\n                options.onInitializing.apply(this, [options])\r\n            }\r\n            this._setOptionsByDevice(options.defaultOptionsRules);\r\n            this._resumeDeprecatedWarnings();\r\n            this._initOptions(options)\r\n        } finally {\r\n            this.endUpdate()\r\n        }\r\n    },\r\n    _initOptions: function(options) {\r\n        this.option(options)\r\n    },\r\n    _optionValuesEqual: function(name, oldValue, newValue) {\r\n        oldValue = coreDataUtils.toComparable(oldValue, true);\r\n        newValue = coreDataUtils.toComparable(newValue, true);\r\n        if (oldValue && newValue && typeUtils.isRenderer(oldValue) && typeUtils.isRenderer(newValue)) {\r\n            return newValue.is(oldValue)\r\n        }\r\n        var oldValueIsNaN = oldValue !== oldValue,\r\n            newValueIsNaN = newValue !== newValue;\r\n        if (oldValueIsNaN && newValueIsNaN) {\r\n            return true\r\n        }\r\n        if (null === oldValue || \"object\" !== (\"undefined\" === typeof oldValue ? \"undefined\" : _typeof(oldValue)) || domAdapter.isElementNode(oldValue)) {\r\n            return oldValue === newValue\r\n        }\r\n        return false\r\n    },\r\n    _init: function() {\r\n        this._createOptionChangedAction();\r\n        this.on(\"disposing\", function(args) {\r\n            this._disposingCallbacks.fireWith(this, [args])\r\n        }.bind(this))\r\n    },\r\n    _createOptionChangedAction: function() {\r\n        this._optionChangedAction = this._createActionByOption(\"onOptionChanged\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\", \"designMode\"]\r\n        })\r\n    },\r\n    _createDisposingAction: function() {\r\n        this._disposingAction = this._createActionByOption(\"onDisposing\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\", \"designMode\"]\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"onDisposing\":\r\n            case \"onInitialized\":\r\n                break;\r\n            case \"onOptionChanged\":\r\n                this._createOptionChangedAction();\r\n                break;\r\n            case \"defaultOptionsRules\":\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this._optionChangedCallbacks.empty();\r\n        this._createDisposingAction();\r\n        this._disposingAction();\r\n        this._disposeEvents();\r\n        this._disposed = true\r\n    },\r\n    instance: function() {\r\n        return this\r\n    },\r\n    beginUpdate: function() {\r\n        this._updateLockCount++\r\n    },\r\n    endUpdate: function() {\r\n        this._updateLockCount = Math.max(this._updateLockCount - 1, 0);\r\n        if (!this._updateLockCount) {\r\n            this.postponedOperations.callPostponedOperations();\r\n            if (!this._initializing && !this._initialized) {\r\n                this._initializing = true;\r\n                try {\r\n                    this._init()\r\n                } finally {\r\n                    this._initializing = false;\r\n                    this._updateLockCount++;\r\n                    this._createActionByOption(\"onInitialized\", {\r\n                        excludeValidators: [\"disabled\", \"readOnly\", \"designMode\"]\r\n                    })();\r\n                    this._updateLockCount--;\r\n                    this._initialized = true\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _logWarningIfDeprecated: function(option) {\r\n        var info = this._deprecatedOptions[option];\r\n        if (info && !this._deprecatedOptionsSuppressed) {\r\n            this._logDeprecatedWarning(option, info)\r\n        }\r\n    },\r\n    _logDeprecatedWarningCount: 0,\r\n    _logDeprecatedWarning: function(option, info) {\r\n        var message = info.message || \"Use the '\" + info.alias + \"' option instead\";\r\n        errors.log(\"W0001\", this.NAME, option, info.since, message);\r\n        ++this._logDeprecatedWarningCount\r\n    },\r\n    _suppressDeprecatedWarnings: function() {\r\n        this._deprecatedOptionsSuppressed = true\r\n    },\r\n    _resumeDeprecatedWarnings: function() {\r\n        this._deprecatedOptionsSuppressed = false\r\n    },\r\n    _optionChanging: noop,\r\n    _notifyOptionChanged: function(option, value, previousValue) {\r\n        var that = this;\r\n        if (this._initialized) {\r\n            var optionNames = [option].concat(that._getOptionAliasesByName(option));\r\n            for (var i = 0; i < optionNames.length; i++) {\r\n                var name = optionNames[i],\r\n                    args = {\r\n                        name: name.split(/[.[]/)[0],\r\n                        fullName: name,\r\n                        value: value,\r\n                        previousValue: previousValue\r\n                    };\r\n                that._optionChangedCallbacks.fireWith(that, [extend(that._defaultActionArgs(), args)]);\r\n                that._optionChangedAction(extend({}, args));\r\n                if (!that._disposed && this._cancelOptionChange !== args.name) {\r\n                    that._optionChanged(args)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    initialOption: function(optionName) {\r\n        var currentOptions, currentInitialized = this._initialized;\r\n        if (!this._initialOptions) {\r\n            currentOptions = this._options;\r\n            this._options = {};\r\n            this._initialized = false;\r\n            this._setDefaultOptions();\r\n            this._setOptionsByDevice(currentOptions.defaultOptionsRules);\r\n            this._initialOptions = this._options;\r\n            this._options = currentOptions;\r\n            this._initialized = currentInitialized\r\n        }\r\n        return this._initialOptions[optionName]\r\n    },\r\n    _defaultActionConfig: function() {\r\n        return {\r\n            context: this,\r\n            component: this\r\n        }\r\n    },\r\n    _defaultActionArgs: function() {\r\n        return {\r\n            component: this\r\n        }\r\n    },\r\n    _createAction: function(actionSource, config) {\r\n        var action, that = this;\r\n        return function(e) {\r\n            if (!arguments.length) {\r\n                e = {}\r\n            }\r\n            if (!typeUtils.isPlainObject(e)) {\r\n                e = {\r\n                    actionValue: e\r\n                }\r\n            }\r\n            action = action || new Action(actionSource, extend(config, that._defaultActionConfig()));\r\n            return action.execute.call(action, extend(e, that._defaultActionArgs()))\r\n        }\r\n    },\r\n    _createActionByOption: function(optionName, config) {\r\n        var action, eventName, actionFunc, that = this;\r\n        var result = function() {\r\n            if (!eventName) {\r\n                config = config || {};\r\n                if (\"string\" !== typeof optionName) {\r\n                    throw errors.Error(\"E0008\")\r\n                }\r\n                if (0 === optionName.indexOf(\"on\")) {\r\n                    eventName = that._getEventName(optionName)\r\n                }\r\n                actionFunc = that.option(optionName)\r\n            }\r\n            if (!action && !actionFunc && !config.beforeExecute && !config.afterExecute && !that.hasEvent(eventName)) {\r\n                return\r\n            }\r\n            if (!action) {\r\n                var beforeExecute = config.beforeExecute;\r\n                config.beforeExecute = function(args) {\r\n                    beforeExecute && beforeExecute.apply(that, arguments);\r\n                    that.fireEvent(eventName, args.args)\r\n                };\r\n                that._suppressDeprecatedWarnings();\r\n                action = that._createAction(actionFunc, config);\r\n                that._resumeDeprecatedWarnings()\r\n            }\r\n            if (Config().wrapActionsBeforeExecute) {\r\n                var beforeActionExecute = that.option(\"beforeActionExecute\") || noop;\r\n                var wrappedAction = beforeActionExecute(that, action, config) || action;\r\n                return wrappedAction.apply(that, arguments)\r\n            }\r\n            return action.apply(that, arguments)\r\n        };\r\n        if (!Config().wrapActionsBeforeExecute) {\r\n            var onActionCreated = that.option(\"onActionCreated\") || noop;\r\n            result = onActionCreated(that, result, config) || result\r\n        }\r\n        return result\r\n    },\r\n    _getEventName: function(actionName) {\r\n        return actionName.charAt(2).toLowerCase() + actionName.substr(3)\r\n    },\r\n    hasActionSubscription: function(actionName) {\r\n        return !!this.option(actionName) || this.hasEvent(this._getEventName(actionName))\r\n    },\r\n    isOptionDeprecated: function(name) {\r\n        var deprecatedOptions = this._getDeprecatedOptions();\r\n        return deprecatedOptions.hasOwnProperty(name)\r\n    },\r\n    _setOptionSilent: function(name, value) {\r\n        this._cancelOptionChange = name;\r\n        this.option(name, value);\r\n        this._cancelOptionChange = false\r\n    },\r\n    option: function() {\r\n        var normalizeOptionName = function(that, name) {\r\n            var deprecate;\r\n            if (name) {\r\n                if (!that._cachedDeprecateNames) {\r\n                    that._cachedDeprecateNames = [];\r\n                    for (var optionName in that._deprecatedOptions) {\r\n                        that._cachedDeprecateNames.push(optionName)\r\n                    }\r\n                }\r\n                for (var i = 0; i < that._cachedDeprecateNames.length; i++) {\r\n                    if (that._cachedDeprecateNames[i] === name) {\r\n                        deprecate = that._deprecatedOptions[name];\r\n                        break\r\n                    }\r\n                }\r\n                if (deprecate) {\r\n                    that._logWarningIfDeprecated(name);\r\n                    var alias = deprecate.alias;\r\n                    if (alias) {\r\n                        name = alias\r\n                    }\r\n                }\r\n            }\r\n            return name\r\n        };\r\n        var getPreviousName = function(fullName) {\r\n            var splitNames = fullName.split(\".\");\r\n            splitNames.pop();\r\n            return splitNames.join(\".\")\r\n        };\r\n        var getFieldName = function(fullName) {\r\n            var splitNames = fullName.split(\".\");\r\n            return splitNames[splitNames.length - 1]\r\n        };\r\n        var getOptionValue = function(options, name, unwrapObservables) {\r\n            var getter = cachedGetters[name];\r\n            if (!getter) {\r\n                getter = cachedGetters[name] = coreDataUtils.compileGetter(name)\r\n            }\r\n            return getter(options, {\r\n                functionsAsIs: true,\r\n                unwrapObservables: unwrapObservables\r\n            })\r\n        };\r\n        var clearOptionsField = function(options, name) {\r\n            delete options[name];\r\n            var previousFieldName = getPreviousName(name),\r\n                fieldName = getFieldName(name),\r\n                fieldObject = previousFieldName ? getOptionValue(options, previousFieldName, false) : options;\r\n            if (fieldObject) {\r\n                delete fieldObject[fieldName]\r\n            }\r\n        };\r\n        var setOptionsField = function(options, fullName, value) {\r\n            var fieldObject, fieldName = \"\";\r\n            do {\r\n                if (fieldName) {\r\n                    fieldName = \".\" + fieldName\r\n                }\r\n                fieldName = getFieldName(fullName) + fieldName;\r\n                fullName = getPreviousName(fullName);\r\n                fieldObject = fullName ? getOptionValue(options, fullName, false) : options\r\n            } while (!fieldObject);\r\n            fieldObject[fieldName] = value\r\n        };\r\n        var normalizeOptionValue = function(that, options, name, value) {\r\n            if (name) {\r\n                var alias = normalizeOptionName(that, name);\r\n                if (alias && alias !== name) {\r\n                    setOptionsField(options, alias, value);\r\n                    clearOptionsField(options, name)\r\n                }\r\n            }\r\n        };\r\n        var prepareOption = function prepareOption(that, options, name, value) {\r\n            if (typeUtils.isPlainObject(value)) {\r\n                for (var valueName in value) {\r\n                    prepareOption(that, options, name + \".\" + valueName, value[valueName])\r\n                }\r\n            }\r\n            normalizeOptionValue(that, options, name, value)\r\n        };\r\n        var setOptionValue = function(that, name, value) {\r\n            if (!cachedSetters[name]) {\r\n                cachedSetters[name] = coreDataUtils.compileSetter(name)\r\n            }\r\n            var path = name.split(/[.[]/);\r\n            cachedSetters[name](that._options, value, {\r\n                functionsAsIs: true,\r\n                merge: !that._getOptionsByReference()[name],\r\n                unwrapObservables: path.length > 1 && !!that._getOptionsByReference()[path[0]]\r\n            })\r\n        };\r\n        var setOption = function(that, name, value) {\r\n            var previousValue = getOptionValue(that._options, name, false);\r\n            if (that._optionValuesEqual(name, previousValue, value)) {\r\n                return\r\n            }\r\n            if (that._initialized) {\r\n                that._optionChanging(name, previousValue, value)\r\n            }\r\n            setOptionValue(that, name, value);\r\n            that._notifyOptionChanged(name, value, previousValue)\r\n        };\r\n        return function(options, value) {\r\n            var that = this,\r\n                name = options;\r\n            if (arguments.length < 2 && \"object\" !== typeUtils.type(name)) {\r\n                name = normalizeOptionName(that, name);\r\n                return getOptionValue(that._options, name)\r\n            }\r\n            if (\"string\" === typeof name) {\r\n                options = {};\r\n                options[name] = value\r\n            }\r\n            that.beginUpdate();\r\n            try {\r\n                var optionName;\r\n                for (optionName in options) {\r\n                    prepareOption(that, options, optionName, options[optionName])\r\n                }\r\n                for (optionName in options) {\r\n                    setOption(that, optionName, options[optionName])\r\n                }\r\n            } finally {\r\n                that.endUpdate()\r\n            }\r\n        }\r\n    }(),\r\n    _getOptionValue: function(name, context) {\r\n        var value = this.option(name);\r\n        if (isFunction(value)) {\r\n            return value.bind(context)()\r\n        }\r\n        return value\r\n    }\r\n}).include(EventsMixin);\r\nmodule.exports = Component;\r\nmodule.exports.PostponedOperations = PostponedOperations;\r\n"]},"metadata":{},"sourceType":"script"}