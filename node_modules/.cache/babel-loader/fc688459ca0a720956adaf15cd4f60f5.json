{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abdel\\\\PhpstormProjects\\\\update\\\\src\\\\navigation\\\\Navigation.js\";\nimport React, { Component } from \"react\";\nimport TreeView from \"devextreme-react/tree-view\";\nimport * as Constants from \"../configuration_app/Constants\";\nimport { activites, selection, supprimerActivite, supprimerScenario } from \"../data/data\";\nimport { onCloseModalScenario, update } from \"../App\";\nimport { mise_a_jour_na, rechercheNav } from \"../fonctions/helper/NavigationHelper\";\nimport { compositions } from \"../types/TypeComposition\";\nimport { liste_entite } from \"../fonctions/helper/AppHelper\";\nimport { ajouterActivite } from \"../fonctions/helper/ActiviteHelper\";\nimport DialogTitle from \"../App\";\nimport DialogContent from \"../App\";\nimport CreateScenario from \"../App\";\nimport DialogActions from \"../App\";\nimport Dialog from \"../App\"; //fonction qui met a jour la navigation\n\nexport function update_navigation() {\n  let nav = mise_a_jour_na();\n  this.setState({\n    p: nav\n  });\n}\nexport function onCloseModalActivite() {\n  this.setState(this.stateActivite = {\n    openActivite: false\n  });\n}\n\nclass Navigation extends Component {\n  constructor(props) {\n    super(props);\n    this.stateActivite = {\n      openActivite: false // permet ouverture et fermeture du modal activité\n\n    };\n    this.stateModifie = {\n      active: false\n    };\n\n    this.recherche = id => {\n      // renvoie la liste des nodes et des links\n      return rechercheNav(id);\n    };\n\n    this.onOpenModalActivite = () => {\n      this.setState(this.stateActivite = {\n        openActivite: true\n      });\n    };\n\n    this.state = {\n      nom: 'test',\n      value: \"contains\",\n      p: []\n    };\n    this.itemClicked = this.itemClicked.bind(this);\n    update_navigation = update_navigation.bind(this);\n    onCloseModalActivite = onCloseModalActivite.bind(this);\n  }\n\n  itemClicked(e) {\n    for (let i = 0; i < selection.nodes.length; i++) selection.nodes[i].color = Constants.GRAPH_NODES_DEFAULT_COLOR;\n\n    let search = this.recherche(e.itemData.id);\n    let tab = search.tab;\n    let i = search.i;\n    selection.nodes = tab[i].nodes;\n    selection.links = tab[i].links;\n    selection.node = null;\n    selection.link = null;\n    selection.nom = tab[i].nom;\n    selection.idPere = tab[i].idPere;\n    selection.id = tab[i].id;\n    selection.description = tab[i].description;\n    selection.type = tab[i].type;\n    selection.listeEntites = liste_entite(selection);\n\n    if (tab[i].type === compositions.ACTIVITE) {\n      selection.idPere = null;\n      selection.listeEntites = tab[i].listeEntites;\n    }\n\n    update();\n    update_navigation();\n  }\n\n  componentWillMount() {\n    update_navigation();\n  }\n\n  supprimer() {\n    supprimerActivite(selection.id);\n\n    for (let i = 0; i < selection.nodes.length; i++) {\n      supprimerScenario(selection.nodes[i].id);\n    }\n\n    selection.id = null;\n    selection.nodes = [];\n    selection.listeEntites = [];\n    update_navigation();\n    update();\n  }\n\n  modifier() {\n    selection.nom = 'test';\n    let search = rechercheNav(selection.id);\n    let tab = search.tab;\n    let i = search.i;\n    tab[i].nom = 'test';\n    update_navigation();\n  }\n\n  ajouter() {\n    ajouterActivite('test', 'leegr');\n    update_navigation();\n  } //on gére ouverture et fermeture du modal\n\n\n  render() {\n    // const { openActivite } = this.stateActivite\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(TreeView, {\n      id: \"treeview\",\n      items: this.state.p,\n      height: Constants.NAV_DEFAULT_HEIGHT,\n      width: Constants.NAV_DEFAULT_WIDTH,\n      searchMode: Constants.NAV_DEFAULT_SEARCH_MODE,\n      searchEnabled: Constants.NAV_DEFAULT_SEARCH_ENABLE,\n      selectionMode: 'single',\n      selectByClick: true,\n      onItemClick: this.itemClicked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.supprimer,\n      hidden: selection.type !== compositions.ACTIVITE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"del\"), React.createElement(\"button\", {\n      onClick: this.modifier,\n      hidden: selection.type !== compositions.ACTIVITE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"mod\"), React.createElement(\"button\", {\n      onClick: this.ajouter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"add\"), React.createElement(Dialog, {\n      open: openActivite,\n      onClose: onCloseModalActivite,\n      \"aria-labelledby\": \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      id: \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Nouveau\"), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(CreateScenario, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Navigation;","map":{"version":3,"sources":["C:\\Users\\abdel\\PhpstormProjects\\update\\src\\navigation\\Navigation.js"],"names":["React","Component","TreeView","Constants","activites","selection","supprimerActivite","supprimerScenario","onCloseModalScenario","update","mise_a_jour_na","rechercheNav","compositions","liste_entite","ajouterActivite","DialogTitle","DialogContent","CreateScenario","DialogActions","Dialog","update_navigation","nav","setState","p","onCloseModalActivite","stateActivite","openActivite","Navigation","constructor","props","stateModifie","active","recherche","id","onOpenModalActivite","state","nom","value","itemClicked","bind","e","i","nodes","length","color","GRAPH_NODES_DEFAULT_COLOR","search","itemData","tab","links","node","link","idPere","description","type","listeEntites","ACTIVITE","componentWillMount","supprimer","modifier","ajouter","render","NAV_DEFAULT_HEIGHT","NAV_DEFAULT_WIDTH","NAV_DEFAULT_SEARCH_MODE","NAV_DEFAULT_SEARCH_ENABLE"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport TreeView from \"devextreme-react/tree-view\";\r\n\r\nimport * as Constants from \"../configuration_app/Constants\";\r\n\r\nimport {activites, selection, supprimerActivite, supprimerScenario} from \"../data/data\";\r\nimport {onCloseModalScenario, update} from \"../App\";\r\nimport { mise_a_jour_na, rechercheNav} from \"../fonctions/helper/NavigationHelper\";\r\nimport {compositions} from \"../types/TypeComposition\";\r\nimport {liste_entite} from \"../fonctions/helper/AppHelper\";\r\nimport {ajouterActivite} from \"../fonctions/helper/ActiviteHelper\";\r\nimport DialogTitle from \"../App\";\r\nimport DialogContent from \"../App\";\r\nimport CreateScenario from \"../App\";\r\nimport DialogActions from \"../App\";\r\nimport Dialog from \"../App\";\r\n\r\n\r\n//fonction qui met a jour la navigation\r\nexport function update_navigation (){\r\n    let nav = mise_a_jour_na();\r\n    this.setState({p:nav});\r\n}\r\n\r\n\r\nexport function onCloseModalActivite(){\r\n    this.setState(this.stateActivite = {openActivite: false});\r\n}\r\n\r\nclass Navigation extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            nom:'test',\r\n            value: \"contains\",\r\n            p:[],\r\n        };\r\n\r\n        this.itemClicked = this.itemClicked.bind(this);\r\n        update_navigation = update_navigation.bind(this);\r\n        onCloseModalActivite = onCloseModalActivite.bind(this);\r\n    }\r\n\r\n    stateActivite = {\r\n        openActivite: false          // permet ouverture et fermeture du modal activité\r\n    };\r\n\r\n    stateModifie = {\r\n        active:false\r\n    };\r\n\r\n\r\n    recherche=(id)=>{\r\n        // renvoie la liste des nodes et des links\r\n        return  rechercheNav(id);\r\n    };\r\n\r\n\r\n    itemClicked(e) {\r\n\r\n        for(let i=0;i<selection.nodes.length;i++) selection.nodes[i].color=Constants.GRAPH_NODES_DEFAULT_COLOR;\r\n\r\n\r\n        let search =this.recherche(e.itemData.id);\r\n        let tab = search.tab;\r\n        let i = search.i;\r\n\r\n        selection.nodes=tab[i].nodes;\r\n        selection.links=tab[i].links;\r\n        selection.node=null;\r\n        selection.link=null;\r\n        selection.nom=tab[i].nom;\r\n        selection.idPere=tab[i].idPere;\r\n        selection.id=tab[i].id;\r\n        selection.description=tab[i].description;\r\n        selection.type = tab[i].type;\r\n        selection.listeEntites = liste_entite(selection);\r\n\r\n        if (tab[i].type === compositions.ACTIVITE){\r\n            selection.idPere=null;\r\n            selection.listeEntites=tab[i].listeEntites;\r\n        }\r\n\r\n\r\n\r\n        update();\r\n        update_navigation()\r\n    }\r\n\r\n    componentWillMount() {\r\n        update_navigation();\r\n    }\r\n\r\n    supprimer(){\r\n        supprimerActivite(selection.id);\r\n        for(let i =0 ; i<selection.nodes.length;i++){\r\n            supprimerScenario(selection.nodes[i].id);\r\n        }\r\n        selection.id=null;\r\n        selection.nodes=[];\r\n        selection.listeEntites=[];\r\n        update_navigation();\r\n        update();\r\n\r\n    }\r\n\r\n    modifier(){\r\n        selection.nom  = 'test';\r\n        let search = rechercheNav(selection.id);\r\n        let tab = search.tab;\r\n        let i = search.i;\r\n        tab[i].nom='test';\r\n        update_navigation();\r\n    }\r\n\r\n\r\n    ajouter(){\r\n        ajouterActivite('test','leegr');\r\n        update_navigation();\r\n    }\r\n\r\n\r\n    //on gére ouverture et fermeture du modal\r\n    onOpenModalActivite = () =>{\r\n        this.setState(this.stateActivite ={ openActivite: true});\r\n\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n       // const { openActivite } = this.stateActivite\r\n        return (\r\n            <React.Fragment>\r\n                <TreeView\r\n                    id={ \"treeview\" }\r\n                    items={ this.state.p }\r\n                    height={ Constants.NAV_DEFAULT_HEIGHT }\r\n                    width={ Constants.NAV_DEFAULT_WIDTH }\r\n                    searchMode= { Constants.NAV_DEFAULT_SEARCH_MODE }\r\n                    searchEnabled={ Constants.NAV_DEFAULT_SEARCH_ENABLE }\r\n                    selectionMode={'single'}\r\n                    selectByClick={true}\r\n                    onItemClick={ this.itemClicked }\r\n                />\r\n                <button onClick={ this.supprimer}  hidden={selection.type!==compositions.ACTIVITE}>del</button>\r\n                <button onClick={this.modifier} hidden={selection.type!==compositions.ACTIVITE}>mod</button>\r\n                <button  onClick={this.ajouter}>add</button>\r\n\r\n                <Dialog\r\n                    open={openActivite}\r\n                    onClose={onCloseModalActivite}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">{\"Nouveau\"}</DialogTitle>\r\n                    <DialogContent>\r\n                        <CreateScenario/>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Navigation;"]},"metadata":{},"sourceType":"module"}