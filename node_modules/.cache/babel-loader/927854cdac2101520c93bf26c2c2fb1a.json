{"ast":null,"code":"/**\r\n * DevExtreme (ui/overlay/ui.overlay.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _typeof = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar $ = require(\"../../core/renderer\"),\n    domAdapter = require(\"../../core/dom_adapter\"),\n    windowUtils = require(\"../../core/utils/window\"),\n    ready = require(\"../../core/utils/ready_callbacks\").add,\n    window = windowUtils.getWindow(),\n    navigator = windowUtils.getNavigator(),\n    eventsEngine = require(\"../../events/core/events_engine\"),\n    fx = require(\"../../animation/fx\"),\n    translator = require(\"../../animation/translator\"),\n    compareVersions = require(\"../../core/utils/version\").compare,\n    viewPortUtils = require(\"../../core/utils/view_port\"),\n    extend = require(\"../../core/utils/extend\").extend,\n    inArray = require(\"../../core/utils/array\").inArray,\n    getPublicElement = require(\"../../core/utils/dom\").getPublicElement,\n    viewPortChanged = viewPortUtils.changeCallback,\n    hideTopOverlayCallback = require(\"../../mobile/hide_top_overlay\").hideCallback,\n    positionUtils = require(\"../../animation/position\"),\n    fitIntoRange = require(\"../../core/utils/math\").fitIntoRange,\n    domUtils = require(\"../../core/utils/dom\"),\n    noop = require(\"../../core/utils/common\").noop,\n    typeUtils = require(\"../../core/utils/type\"),\n    each = require(\"../../core/utils/iterator\").each,\n    devices = require(\"../../core/devices\"),\n    browser = require(\"../../core/utils/browser\"),\n    registerComponent = require(\"../../core/component_registrator\"),\n    Widget = require(\"../widget/ui.widget\"),\n    KeyboardProcessor = require(\"../widget/ui.keyboard_processor\"),\n    selectors = require(\"../widget/selectors\"),\n    dragEvents = require(\"../../events/drag\"),\n    eventUtils = require(\"../../events/utils\"),\n    pointerEvents = require(\"../../events/pointer\"),\n    Resizable = require(\"../resizable\"),\n    EmptyTemplate = require(\"../widget/empty_template\"),\n    Deferred = require(\"../../core/utils/deferred\").Deferred,\n    zIndexPool = require(\"./z_index\"),\n    swatch = require(\"../widget/swatch_container\");\n\nvar OVERLAY_CLASS = \"dx-overlay\",\n    OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\",\n    OVERLAY_CONTENT_CLASS = \"dx-overlay-content\",\n    OVERLAY_SHADER_CLASS = \"dx-overlay-shader\",\n    OVERLAY_MODAL_CLASS = \"dx-overlay-modal\",\n    INNER_OVERLAY_CLASS = \"dx-inner-overlay\",\n    INVISIBLE_STATE_CLASS = \"dx-state-invisible\",\n    ANONYMOUS_TEMPLATE_NAME = \"content\",\n    RTL_DIRECTION_CLASS = \"dx-rtl\",\n    ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"],\n    OVERLAY_STACK = [],\n    DISABLED_STATE_CLASS = \"dx-state-disabled\",\n    TAB_KEY = \"tab\",\n    POSITION_ALIASES = {\n  top: {\n    my: \"top center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"bottom center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"right center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"left center\",\n    at: \"left center\"\n  },\n  center: {\n    my: \"center\",\n    at: \"center\"\n  },\n  \"right bottom\": {\n    my: \"right bottom\",\n    at: \"right bottom\"\n  },\n  \"right top\": {\n    my: \"right top\",\n    at: \"right top\"\n  },\n  \"left bottom\": {\n    my: \"left bottom\",\n    at: \"left bottom\"\n  },\n  \"left top\": {\n    my: \"left top\",\n    at: \"left top\"\n  }\n};\nvar realDevice = devices.real(),\n    realVersion = realDevice.version,\n    firefoxDesktop = browser.mozilla && \"desktop\" === realDevice.deviceType,\n    iOS = \"ios\" === realDevice.platform,\n    hasSafariAddressBar = browser.safari && \"desktop\" !== realDevice.deviceType,\n    iOS7_0andBelow = iOS && compareVersions(realVersion, [7, 1]) < 0,\n    android4_0nativeBrowser = \"android\" === realDevice.platform && 0 === compareVersions(realVersion, [4, 0], 2) && navigator.userAgent.indexOf(\"Chrome\") === -1;\n\nvar forceRepaint = function ($element) {\n  if (iOS7_0andBelow || firefoxDesktop) {\n    $element.width();\n  }\n\n  if (android4_0nativeBrowser) {\n    var $parents = $element.parents(),\n        inScrollView = $parents.is(\".dx-scrollable-native\");\n\n    if (!inScrollView) {\n      $parents.css(\"backfaceVisibility\", \"hidden\");\n      $parents.css(\"backfaceVisibility\");\n      $parents.css(\"backfaceVisibility\", \"visible\");\n    }\n  }\n};\n\nvar getElement = function (value) {\n  return value && $(value.target || value);\n};\n\nready(function () {\n  eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, function (e) {\n    for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\nvar Overlay = Widget.inherit({\n  _supportedKeys: function () {\n    var offsetSize = 5,\n        move = function (top, left, e) {\n      if (!this.option(\"dragEnabled\")) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      var allowedOffsets = this._allowedOffsets();\n\n      var offset = {\n        top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),\n        left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)\n      };\n\n      this._changePosition(offset);\n    };\n\n    return extend(this.callBase(), {\n      escape: function () {\n        this.hide();\n      },\n      upArrow: move.bind(this, -offsetSize, 0),\n      downArrow: move.bind(this, offsetSize, 0),\n      leftArrow: move.bind(this, 0, -offsetSize),\n      rightArrow: move.bind(this, 0, offsetSize)\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      position: {\n        my: \"center\",\n        at: \"center\"\n      },\n      width: function () {\n        return .8 * $(window).width();\n      },\n      minWidth: null,\n      maxWidth: null,\n      height: function () {\n        return .8 * $(window).height();\n      },\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          to: {\n            opacity: 0,\n            scale: .55\n          },\n          from: {\n            opacity: 1,\n            scale: 1\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      closeOnBackButton: true,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      dragEnabled: false,\n      resizeEnabled: false,\n      onResizeStart: null,\n      onResize: null,\n      onResizeEnd: null,\n      innerOverlay: false,\n      target: void 0,\n      container: void 0,\n      hideTopOverlayHandler: void 0,\n      closeOnTargetScroll: false,\n      onPositioned: null,\n      boundaryOffset: {\n        h: 0,\n        v: 0\n      },\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        var realDevice = devices.real(),\n            realPlatform = realDevice.platform,\n            realVersion = realDevice.version;\n        return \"android\" === realPlatform && compareVersions(realVersion, [4, 2]) < 0;\n      },\n      options: {\n        animation: {\n          show: {\n            type: \"fade\",\n            duration: 400\n          },\n          hide: {\n            type: \"fade\",\n            duration: 400,\n            to: {\n              opacity: 0\n            },\n            from: {\n              opacity: 1\n            }\n          }\n        }\n      }\n    }, {\n      device: function () {\n        return !windowUtils.hasWindow();\n      },\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    extend(this._optionsByReference, {\n      animation: true\n    });\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _wrapper: function () {\n    return this._$wrapper;\n  },\n  _container: function () {\n    return this._$content;\n  },\n  _eventBindingTarget: function () {\n    return this._$content;\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initActions();\n\n    this._initCloseOnOutsideClickHandler();\n\n    this._initTabTerminatorHandler();\n\n    this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\n    this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\n\n    this._initInnerOverlayClass();\n\n    var $element = this.$element();\n\n    this._$wrapper.addClass($element.attr(\"class\"));\n\n    $element.addClass(OVERLAY_CLASS);\n\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n\n    eventsEngine.on(this._$wrapper, \"MSPointerDown\", noop);\n    eventsEngine.on(this._$wrapper, \"focusin\", function (e) {\n      e.stopPropagation();\n    });\n\n    this._toggleViewPortSubscription(true);\n  },\n  _initOptions: function (options) {\n    this._initTarget(options.target);\n\n    var container = void 0 === options.container ? this.option(\"container\") : options.container;\n\n    this._initContainer(container);\n\n    this._initHideTopOverlayHandler(options.hideTopOverlayHandler);\n\n    this.callBase(options);\n  },\n  _initInnerOverlayClass: function () {\n    this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"));\n  },\n  _initTarget: function (target) {\n    if (!typeUtils.isDefined(target)) {\n      return;\n    }\n\n    var options = this.option();\n    each([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], function (_, path) {\n      var pathParts = path.split(\".\");\n      var option = options;\n\n      while (option) {\n        if (1 === pathParts.length) {\n          if (typeUtils.isPlainObject(option)) {\n            option[pathParts.shift()] = target;\n          }\n\n          break;\n        } else {\n          option = option[pathParts.shift()];\n        }\n      }\n    });\n  },\n  _initContainer: function (container) {\n    container = void 0 === container ? viewPortUtils.value() : container;\n    var $element = this.$element();\n    var $container = $element.closest(container);\n\n    if (!$container.length) {\n      $container = $(container).first();\n    }\n\n    this._$container = $container.length ? $container : $element.parent();\n  },\n  _initHideTopOverlayHandler: function (handler) {\n    this._hideTopOverlayHandler = void 0 !== handler ? handler : this._defaultHideTopOverlayHandler.bind(this);\n  },\n  _defaultHideTopOverlayHandler: function () {\n    this.hide();\n  },\n  _initActions: function () {\n    this._actions = {};\n    each(ACTIONS, function (_, action) {\n      this._actions[action] = this._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || noop;\n    }.bind(this));\n  },\n  _initCloseOnOutsideClickHandler: function () {\n    var that = this;\n\n    this._proxiedDocumentDownHandler = function () {\n      return that._documentDownHandler.apply(that, arguments);\n    };\n  },\n  _documentDownHandler: function (e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n\n    var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n    if (typeUtils.isFunction(closeOnOutsideClick)) {\n      closeOnOutsideClick = closeOnOutsideClick(e);\n    }\n\n    var $container = this._$content,\n        isAttachedTarget = $(window.document).is(e.target) || domUtils.contains(window.document, e.target),\n        isInnerOverlay = $(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length,\n        outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || domUtils.contains($container.get(0), e.target));\n\n    if (outsideClick && closeOnOutsideClick) {\n      if (this.option(\"shading\")) {\n        e.preventDefault();\n      }\n\n      this.hide();\n    }\n\n    return this.option(\"propagateOutsideClick\");\n  },\n  _initTemplates: function () {\n    this.callBase();\n    this._defaultTemplates.content = new EmptyTemplate(this);\n  },\n  _isTopOverlay: function () {\n    var overlayStack = this._overlayStack();\n\n    for (var i = overlayStack.length - 1; i >= 0; i--) {\n      var tabbableElements = overlayStack[i]._findTabbableBounds();\n\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n\n    return false;\n  },\n  _overlayStack: function () {\n    return OVERLAY_STACK;\n  },\n  _zIndexInitValue: function () {\n    return Overlay.baseZIndex();\n  },\n  _toggleViewPortSubscription: function (toggle) {\n    viewPortChanged.remove(this._viewPortChangeHandle);\n\n    if (toggle) {\n      this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  },\n  _viewPortChangeHandler: function () {\n    this._initContainer(this.option(\"container\"));\n\n    this._refresh();\n  },\n  _renderVisibilityAnimate: function (visible) {\n    this._stopAnimation();\n\n    return visible ? this._show() : this._hide();\n  },\n  _normalizePosition: function () {\n    var position = this.option(\"position\");\n    this._position = \"function\" === typeof position ? position() : position;\n  },\n  _getAnimationConfig: function () {\n    var animation = this.option(\"animation\");\n\n    if (typeUtils.isFunction(animation)) {\n      animation = animation.call(this);\n    }\n\n    return animation;\n  },\n  _show: function () {\n    var that = this,\n        deferred = new Deferred();\n    this._parentHidden = this._isParentHidden();\n    deferred.done(function () {\n      delete that._parentHidden;\n    });\n\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return deferred.resolve();\n    }\n\n    if (this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = true;\n\n    this._normalizePosition();\n\n    var animation = that._getAnimationConfig() || {},\n        showAnimation = this._normalizeAnimation(animation.show, \"to\"),\n        startShowAnimation = showAnimation && showAnimation.start || noop,\n        completeShowAnimation = showAnimation && showAnimation.complete || noop;\n\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n      deferred.resolve();\n    } else {\n      var show = function () {\n        this._renderVisibility(true);\n\n        this._animate(showAnimation, function () {\n          if (that.option(\"focusStateEnabled\")) {\n            eventsEngine.trigger(that._focusTarget(), \"focus\");\n          }\n\n          completeShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = false;\n\n          that._actions.onShown();\n\n          deferred.resolve();\n        }, function () {\n          startShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = true;\n        });\n      }.bind(this);\n\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n\n    return deferred.promise();\n  },\n  _normalizeAnimation: function (animation, prop) {\n    if (animation) {\n      animation = extend({\n        type: \"slide\"\n      }, animation);\n\n      if (animation[prop] && \"object\" === _typeof(animation[prop])) {\n        extend(animation[prop], {\n          position: this._position\n        });\n      }\n    }\n\n    return animation;\n  },\n  _hide: function () {\n    if (!this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = false;\n\n    var that = this,\n        deferred = new Deferred(),\n        animation = that._getAnimationConfig() || {},\n        hideAnimation = this._normalizeAnimation(animation.hide, \"from\"),\n        startHideAnimation = hideAnimation && hideAnimation.start || noop,\n        completeHideAnimation = hideAnimation && hideAnimation.complete || noop,\n        hidingArgs = {\n      cancel: false\n    };\n\n    this._actions.onHiding(hidingArgs);\n\n    if (hidingArgs.cancel) {\n      this._isHidingActionCanceled = true;\n      this.option(\"visible\", true);\n      deferred.resolve();\n    } else {\n      this._forceFocusLost();\n\n      this._toggleShading(false);\n\n      this._toggleSubscriptions(false);\n\n      this._stopShowTimer();\n\n      this._animate(hideAnimation, function () {\n        that._$content.css(\"pointerEvents\", \"\");\n\n        that._renderVisibility(false);\n\n        completeHideAnimation.apply(this, arguments);\n\n        that._actions.onHidden();\n\n        deferred.resolve();\n      }, function () {\n        that._$content.css(\"pointerEvents\", \"none\");\n\n        startHideAnimation.apply(this, arguments);\n      });\n    }\n\n    return deferred.promise();\n  },\n  _forceFocusLost: function () {\n    var activeElement = domAdapter.getActiveElement();\n    var shouldResetActiveElement = !!this._$content.find(activeElement).length;\n\n    if (shouldResetActiveElement) {\n      domUtils.resetActiveElement();\n    }\n  },\n  _animate: function (animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || noop;\n      fx.animate(this._$content, extend({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  },\n  _stopAnimation: function () {\n    fx.stop(this._$content, true);\n  },\n  _renderVisibility: function (visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n\n    this._currentVisible = visible;\n\n    this._stopAnimation();\n\n    if (!visible) {\n      domUtils.triggerHidingEvent(this._$content);\n    }\n\n    this._toggleVisibility(visible);\n\n    this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\n\n    this._updateZIndexStackPosition(visible);\n\n    if (visible) {\n      this._renderContent();\n\n      this._actions.onShowing();\n\n      this._moveToContainer();\n\n      this._renderGeometry();\n\n      domUtils.triggerShownEvent(this._$content);\n      domUtils.triggerResizeEvent(this._$content);\n    } else {\n      this._moveFromContainer();\n    }\n\n    this._toggleShading(visible);\n\n    this._toggleSubscriptions(visible);\n  },\n  _updateZIndexStackPosition: function (pushToStack) {\n    var overlayStack = this._overlayStack(),\n        index = inArray(this, overlayStack);\n\n    if (pushToStack) {\n      if (index === -1) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else {\n      if (index !== -1) {\n        overlayStack.splice(index, 1);\n        zIndexPool.remove(this._zIndex);\n      }\n    }\n  },\n  _toggleShading: function (visible) {\n    this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\n\n    this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\n\n    this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\n\n    this._toggleTabTerminator(visible && this.option(\"shading\"));\n  },\n  _initTabTerminatorHandler: function () {\n    var that = this;\n\n    this._proxiedTabTerminatorHandler = function () {\n      that._tabKeyHandler.apply(that, arguments);\n    };\n  },\n  _toggleTabTerminator: function (enabled) {\n    var eventName = eventUtils.addNamespace(\"keydown\", this.NAME);\n\n    if (enabled) {\n      eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  },\n  _findTabbableBounds: function () {\n    var $elements = this._$wrapper.find(\"*\");\n\n    var elementsCount = $elements.length - 1;\n    var result = {\n      first: null,\n      last: null\n    };\n\n    for (var i = 0; i <= elementsCount; i++) {\n      if (!result.first && $elements.eq(i).is(selectors.tabbable)) {\n        result.first = $elements.eq(i);\n      }\n\n      if (!result.last && $elements.eq(elementsCount - i).is(selectors.tabbable)) {\n        result.last = $elements.eq(elementsCount - i);\n      }\n\n      if (result.first && result.last) {\n        break;\n      }\n    }\n\n    return result;\n  },\n  _tabKeyHandler: function (e) {\n    if (eventUtils.normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\n      return;\n    }\n\n    var tabbableElements = this._findTabbableBounds(),\n        $firstTabbable = tabbableElements.first,\n        $lastTabbable = tabbableElements.last,\n        isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0),\n        isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0),\n        isEmptyTabList = 0 === tabbableElements.length,\n        isOutsideTarget = !domUtils.contains(this._$wrapper.get(0), e.target);\n\n    if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\n      e.preventDefault();\n      var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n      eventsEngine.trigger($focusElement, \"focusin\");\n      eventsEngine.trigger($focusElement, \"focus\");\n    }\n  },\n  _toggleSubscriptions: function (enabled) {\n    if (windowUtils.hasWindow()) {\n      this._toggleHideTopOverlayCallback(enabled);\n\n      this._toggleParentsScrollSubscription(enabled);\n    }\n  },\n  _toggleHideTopOverlayCallback: function (subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n\n    if (subscribe && this.option(\"closeOnBackButton\")) {\n      hideTopOverlayCallback.add(this._hideTopOverlayHandler);\n    } else {\n      hideTopOverlayCallback.remove(this._hideTopOverlayHandler);\n    }\n  },\n  _toggleParentsScrollSubscription: function (subscribe) {\n    if (!this._position) {\n      return;\n    }\n\n    var target = this._position.of || $(),\n        closeOnScroll = this.option(\"closeOnTargetScroll\"),\n        $parents = getElement(target).parents(),\n        scrollEvent = eventUtils.addNamespace(\"scroll\", this.NAME);\n\n    if (\"generic\" === devices.real().platform) {\n      $parents = $parents.add(window);\n    }\n\n    this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function (e) {\n      this._targetParentsScrollHandler(e);\n    }.bind(this);\n\n    eventsEngine.off($().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\n\n    if (subscribe && closeOnScroll) {\n      eventsEngine.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\n      this._$prevTargetParents = $parents;\n    }\n  },\n  _targetParentsScrollHandler: function (e) {\n    var closeHandled = false,\n        closeOnScroll = this.option(\"closeOnTargetScroll\");\n\n    if (typeUtils.isFunction(closeOnScroll)) {\n      closeHandled = closeOnScroll(e);\n    }\n\n    if (!closeHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  },\n  _render: function () {\n    this.callBase();\n\n    this._appendContentToElement();\n\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  },\n  _appendContentToElement: function () {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  },\n  _renderContent: function () {\n    var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n\n    var isParentHidden = this.option(\"visible\") && this._isParentHidden();\n\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n\n    this._contentAlreadyRendered = true;\n\n    this._appendContentToElement();\n\n    this.callBase();\n  },\n  _isParentHidden: function () {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n\n    var $parent = this.$element().parent();\n\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n\n    var isHidden = false;\n    $parent.add($parent.parents()).each(function () {\n      var $element = $(this);\n\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !domAdapter.getBody().contains($parent.get(0));\n  },\n  _renderContentImpl: function () {\n    var _this = this;\n\n    var whenContentRendered = new Deferred();\n\n    var contentTemplateOption = this.option(\"contentTemplate\"),\n        contentTemplate = this._getTemplate(contentTemplateOption),\n        transclude = this._getAnonymousTemplateName() === contentTemplateOption;\n\n    contentTemplate && contentTemplate.render({\n      container: getPublicElement(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: function () {\n        whenContentRendered.resolve();\n      }\n    });\n\n    this._renderDrag();\n\n    this._renderResize();\n\n    this._renderScrollTerminator();\n\n    whenContentRendered.done(function () {\n      if (_this.option(\"visible\")) {\n        _this._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  },\n  _renderDrag: function () {\n    var $dragTarget = this._getDragTarget();\n\n    if (!$dragTarget) {\n      return;\n    }\n\n    var startEventName = eventUtils.addNamespace(dragEvents.start, this.NAME),\n        updateEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\n    eventsEngine.off($dragTarget, startEventName);\n    eventsEngine.off($dragTarget, updateEventName);\n\n    if (!this.option(\"dragEnabled\")) {\n      return;\n    }\n\n    eventsEngine.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\n    eventsEngine.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this));\n  },\n  _renderResize: function () {\n    this._resizable = this._createComponent(this._$content, Resizable, {\n      handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\n      onResizeEnd: this._resizeEndHandler.bind(this),\n      onResize: this._actions.onResize.bind(this),\n      onResizeStart: this._actions.onResizeStart.bind(this),\n      minHeight: 100,\n      minWidth: 100,\n      area: this._getDragResizeContainer()\n    });\n  },\n  _resizeEndHandler: function () {\n    this._positionChangeHandled = true;\n\n    var width = this._resizable.option(\"width\"),\n        height = this._resizable.option(\"height\");\n\n    width && this.option(\"width\", width);\n    height && this.option(\"height\", height);\n\n    this._actions.onResizeEnd();\n  },\n  _renderScrollTerminator: function () {\n    var $scrollTerminator = this._wrapper();\n\n    var terminatorEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\n    eventsEngine.off($scrollTerminator, terminatorEventName);\n    eventsEngine.on($scrollTerminator, terminatorEventName, {\n      validate: function () {\n        return true;\n      },\n      getDirection: function () {\n        return \"both\";\n      },\n      _toggleGestureCover: noop,\n      _clearSelection: noop,\n      isNative: true\n    }, function (e) {\n      var originalEvent = e.originalEvent.originalEvent;\n      e._cancelPreventDefault = true;\n\n      if (originalEvent && \"mousemove\" !== originalEvent.type) {\n        e.preventDefault();\n      }\n    });\n  },\n  _getDragTarget: function () {\n    return this.$content();\n  },\n  _dragStartHandler: function (e) {\n    e.targetElements = [];\n    this._prevOffset = {\n      x: 0,\n      y: 0\n    };\n\n    var allowedOffsets = this._allowedOffsets();\n\n    e.maxTopOffset = allowedOffsets.top;\n    e.maxBottomOffset = allowedOffsets.bottom;\n    e.maxLeftOffset = allowedOffsets.left;\n    e.maxRightOffset = allowedOffsets.right;\n  },\n  _getDragResizeContainer: function () {\n    var isContainerDefined = viewPortUtils.originalViewPort().get(0) || this.option(\"container\"),\n        $container = !isContainerDefined ? $(window) : this._$container;\n    return $container;\n  },\n  _deltaSize: function () {\n    var $content = this._$content,\n        $container = this._getDragResizeContainer();\n\n    var contentWidth = $content.outerWidth(),\n        contentHeight = $content.outerHeight(),\n        containerWidth = $container.outerWidth(),\n        containerHeight = $container.outerHeight();\n\n    if (this._isWindow($container)) {\n      var document = domAdapter.getDocument(),\n          fullPageHeight = Math.max($(document).outerHeight(), containerHeight),\n          fullPageWidth = Math.max($(document).outerWidth(), containerWidth);\n      containerHeight = fullPageHeight;\n      containerWidth = fullPageWidth;\n    }\n\n    return {\n      width: containerWidth - contentWidth,\n      height: containerHeight - contentHeight\n    };\n  },\n  _dragUpdateHandler: function (e) {\n    var offset = e.offset,\n        prevOffset = this._prevOffset,\n        targetOffset = {\n      top: offset.y - prevOffset.y,\n      left: offset.x - prevOffset.x\n    };\n\n    this._changePosition(targetOffset);\n\n    this._prevOffset = offset;\n  },\n  _changePosition: function (offset) {\n    var position = translator.locate(this._$content);\n    translator.move(this._$content, {\n      left: position.left + offset.left,\n      top: position.top + offset.top\n    });\n    this._positionChangeHandled = true;\n  },\n  _allowedOffsets: function () {\n    var position = translator.locate(this._$content),\n        deltaSize = this._deltaSize(),\n        isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0,\n        shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? translator.locate(this._$wrapper) : {\n      top: 0,\n      left: 0\n    },\n        boundaryOffset = this.option(\"boundaryOffset\");\n\n    return {\n      top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\n      bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\n      left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\n      right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\n    };\n  },\n  _moveFromContainer: function () {\n    this._$content.appendTo(this.$element());\n\n    this._detachWrapperToContainer();\n  },\n  _detachWrapperToContainer: function () {\n    this._$wrapper.detach();\n  },\n  _moveToContainer: function () {\n    this._attachWrapperToContainer();\n\n    this._$content.appendTo(this._$wrapper);\n  },\n  _attachWrapperToContainer: function () {\n    var $element = this.$element();\n    var containerDefined = void 0 !== this.option(\"container\");\n    var renderContainer = containerDefined ? this._$container : swatch.getSwatchContainer($element);\n\n    if (renderContainer && renderContainer[0] === $element.parent()[0]) {\n      renderContainer = $element;\n    }\n\n    this._$wrapper.appendTo(renderContainer);\n  },\n  _fixHeightAfterSafariAddressBarResizing: function () {\n    if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\n      this._$wrapper.css(\"minHeight\", window.innerHeight);\n    }\n  },\n  _renderGeometry: function () {\n    if (this.option(\"visible\") && windowUtils.hasWindow()) {\n      this._renderGeometryImpl();\n    }\n  },\n  _renderGeometryImpl: function () {\n    this._stopAnimation();\n\n    this._normalizePosition();\n\n    this._renderShading();\n\n    this._fixHeightAfterSafariAddressBarResizing();\n\n    this._renderDimensions();\n\n    var resultPosition = this._renderPosition();\n\n    this._actions.onPositioned({\n      position: resultPosition\n    });\n  },\n  _renderShading: function () {\n    var $wrapper = this._$wrapper,\n        $container = this._getContainer();\n\n    $wrapper.css(\"position\", this._isWindow($container) && !iOS ? \"fixed\" : \"absolute\");\n\n    this._renderShadingDimensions();\n\n    this._renderShadingPosition();\n  },\n  _renderShadingPosition: function () {\n    if (this.option(\"shading\")) {\n      var $container = this._getContainer();\n\n      positionUtils.setup(this._$wrapper, {\n        my: \"top left\",\n        at: \"top left\",\n        of: $container\n      });\n    }\n  },\n  _renderShadingDimensions: function () {\n    var wrapperWidth, wrapperHeight;\n\n    if (this.option(\"shading\")) {\n      var $container = this._getContainer();\n\n      wrapperWidth = this._isWindow($container) ? \"100%\" : $container.outerWidth(), wrapperHeight = this._isWindow($container) ? \"100%\" : $container.outerHeight();\n    } else {\n      wrapperWidth = \"\";\n      wrapperHeight = \"\";\n    }\n\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  },\n  _isWindow: function ($element) {\n    return !!$element && typeUtils.isWindow($element.get(0));\n  },\n  _getContainer: function () {\n    var position = this._position,\n        container = this.option(\"container\"),\n        positionOf = position ? position.of || window : null;\n    return getElement(container || positionOf);\n  },\n  _renderDimensions: function () {\n    var content = this._$content.get(0);\n\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  },\n  _renderPosition: function () {\n    if (this._positionChangeHandled) {\n      var allowedOffsets = this._allowedOffsets();\n\n      this._changePosition({\n        top: fitIntoRange(0, -allowedOffsets.top, allowedOffsets.bottom),\n        left: fitIntoRange(0, -allowedOffsets.left, allowedOffsets.right)\n      });\n    } else {\n      this._renderOverlayBoundaryOffset();\n\n      translator.resetPosition(this._$content);\n\n      var position = this._transformStringPosition(this._position, POSITION_ALIASES),\n          resultPosition = positionUtils.setup(this._$content, position);\n\n      forceRepaint(this._$content);\n\n      this._actions.onPositioning();\n\n      return resultPosition;\n    }\n  },\n  _transformStringPosition: function (position, positionAliases) {\n    if (typeUtils.isString(position)) {\n      position = extend({}, positionAliases[position]);\n    }\n\n    return position;\n  },\n  _renderOverlayBoundaryOffset: function () {\n    var boundaryOffset = this.option(\"boundaryOffset\");\n\n    this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\");\n  },\n  _focusTarget: function () {\n    return this._$content;\n  },\n  _attachKeyboardEvents: function () {\n    this._keyboardProcessor = new KeyboardProcessor({\n      element: this._$content,\n      handler: this._keyboardHandler,\n      context: this\n    });\n  },\n  _keyboardHandler: function (options) {\n    var e = options.originalEvent,\n        $target = $(e.target);\n\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      this.callBase.apply(this, arguments);\n    }\n  },\n  _isVisible: function () {\n    return this.option(\"visible\");\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  },\n  _dimensionChanged: function () {\n    this._renderGeometry();\n  },\n  _clean: function () {\n    if (!this._contentAlreadyRendered) {\n      this.$content().empty();\n    }\n\n    this._renderVisibility(false);\n\n    this._stopShowTimer();\n\n    this._cleanFocusState();\n  },\n  _stopShowTimer: function () {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n\n    this._asyncShowTimeout = null;\n  },\n  _dispose: function () {\n    fx.stop(this._$content, false);\n    clearTimeout(this._deferShowTimer);\n\n    this._toggleViewPortSubscription(false);\n\n    this._toggleSubscriptions(false);\n\n    this._updateZIndexStackPosition(false);\n\n    this._toggleTabTerminator(false);\n\n    this._actions = null;\n    this.callBase();\n    zIndexPool.remove(this._zIndex);\n\n    this._$wrapper.remove();\n\n    this._$content.remove();\n  },\n  _toggleDisabledState: function (value) {\n    this.callBase.apply(this, arguments);\n\n    this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value));\n  },\n  _toggleRTLDirection: function (rtl) {\n    this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl);\n  },\n  _optionChanged: function (args) {\n    var value = args.value;\n\n    if (inArray(args.name, ACTIONS) > -1) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"dragEnabled\":\n        this._renderDrag();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"resizeEnabled\":\n        this._renderResize();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"shading\":\n      case \"shadingColor\":\n        this._toggleShading(this.option(\"visible\"));\n\n        break;\n\n      case \"width\":\n      case \"height\":\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n      case \"boundaryOffset\":\n        this._renderGeometry();\n\n        break;\n\n      case \"position\":\n        this._positionChangeHandled = false;\n\n        this._renderGeometry();\n\n        break;\n\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(function () {\n          if (!this._animateDeferred) {\n            return;\n          }\n\n          this._animateDeferred.resolveWith(this);\n        }.bind(this));\n\n        break;\n\n      case \"target\":\n        this._initTarget(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"container\":\n        this._initContainer(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n\n        break;\n\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n\n        this._clean();\n\n        this._invalidate();\n\n        break;\n\n      case \"closeOnBackButton\":\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnTargetScroll\":\n        this._toggleParentsScrollSubscription(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnOutsideClick\":\n      case \"animation\":\n      case \"propagateOutsideClick\":\n        break;\n\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        this.option(\"visible\", false);\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  toggle: function (showing) {\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n\n    if (showing === this.option(\"visible\")) {\n      return new Deferred().resolve().promise();\n    }\n\n    var animateDeferred = new Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    return animateDeferred.promise().done(function () {\n      delete this._animateDeferred;\n    }.bind(this));\n  },\n  $content: function () {\n    return this._$content;\n  },\n  show: function () {\n    return this.toggle(true);\n  },\n  hide: function () {\n    return this.toggle(false);\n  },\n  content: function () {\n    return getPublicElement(this._$content);\n  },\n  repaint: function () {\n    this._renderGeometry();\n  }\n});\n\nOverlay.baseZIndex = function (zIndex) {\n  return zIndexPool.base(zIndex);\n};\n\nregisterComponent(\"dxOverlay\", Overlay);\nmodule.exports = Overlay;","map":{"version":3,"sources":["C:/Users/abdel/PhpstormProjects/editeur_scenario_jeu/node_modules/devextreme/ui/overlay/ui.overlay.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","$","require","domAdapter","windowUtils","ready","add","window","getWindow","navigator","getNavigator","eventsEngine","fx","translator","compareVersions","compare","viewPortUtils","extend","inArray","getPublicElement","viewPortChanged","changeCallback","hideTopOverlayCallback","hideCallback","positionUtils","fitIntoRange","domUtils","noop","typeUtils","each","devices","browser","registerComponent","Widget","KeyboardProcessor","selectors","dragEvents","eventUtils","pointerEvents","Resizable","EmptyTemplate","Deferred","zIndexPool","swatch","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","OVERLAY_MODAL_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","ACTIONS","OVERLAY_STACK","DISABLED_STATE_CLASS","TAB_KEY","POSITION_ALIASES","top","my","at","bottom","right","left","center","realDevice","real","realVersion","version","firefoxDesktop","mozilla","deviceType","iOS","platform","hasSafariAddressBar","safari","iOS7_0andBelow","android4_0nativeBrowser","userAgent","indexOf","forceRepaint","$element","width","$parents","parents","inScrollView","is","css","getElement","value","target","subscribeGlobal","getDocument","down","e","i","length","_proxiedDocumentDownHandler","Overlay","inherit","_supportedKeys","offsetSize","move","option","preventDefault","stopPropagation","allowedOffsets","_allowedOffsets","offset","_changePosition","callBase","escape","hide","upArrow","bind","downArrow","leftArrow","rightArrow","_getDefaultOptions","activeStateEnabled","visible","deferRendering","shading","shadingColor","position","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","to","opacity","closeOnOutsideClick","closeOnBackButton","onShowing","onShown","onHiding","onHidden","contentTemplate","dragEnabled","resizeEnabled","onResizeStart","onResize","onResizeEnd","innerOverlay","container","hideTopOverlayHandler","closeOnTargetScroll","onPositioned","boundaryOffset","h","v","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_defaultOptionsRules","concat","device","realPlatform","options","hasWindow","_setOptionsByReference","_optionsByReference","_getAnonymousTemplateName","_wrapper","_$wrapper","_container","_$content","_eventBindingTarget","_init","_initActions","_initCloseOnOutsideClickHandler","_initTabTerminatorHandler","addClass","_initInnerOverlayClass","attr","on","_toggleViewPortSubscription","_initOptions","_initTarget","_initContainer","_initHideTopOverlayHandler","toggleClass","isDefined","_","path","pathParts","split","isPlainObject","shift","$container","closest","first","_$container","parent","handler","_hideTopOverlayHandler","_defaultHideTopOverlayHandler","_actions","action","_createActionByOption","excludeValidators","that","_documentDownHandler","apply","arguments","_showAnimationProcessing","_stopAnimation","isFunction","isAttachedTarget","document","contains","isInnerOverlay","outsideClick","get","_initTemplates","_defaultTemplates","content","_isTopOverlay","overlayStack","_overlayStack","tabbableElements","_findTabbableBounds","last","_zIndexInitValue","baseZIndex","toggle","remove","_viewPortChangeHandle","_viewPortChangeHandler","_refresh","_renderVisibilityAnimate","_show","_hide","_normalizePosition","_position","_getAnimationConfig","call","deferred","_parentHidden","_isParentHidden","done","_isHidden","resolve","_currentVisible","promise","showAnimation","_normalizeAnimation","startShowAnimation","start","completeShowAnimation","complete","_isHidingActionCanceled","_renderVisibility","_animate","trigger","_focusTarget","_stopShowTimer","_asyncShowTimeout","setTimeout","prop","hideAnimation","startHideAnimation","completeHideAnimation","hidingArgs","cancel","_forceFocusLost","_toggleShading","_toggleSubscriptions","activeElement","getActiveElement","shouldResetActiveElement","find","resetActiveElement","completeCallback","startCallback","animate","stop","triggerHidingEvent","_toggleVisibility","_updateZIndexStackPosition","_renderContent","_moveToContainer","_renderGeometry","triggerShownEvent","triggerResizeEvent","_moveFromContainer","pushToStack","index","_zIndex","create","push","splice","_toggleTabTerminator","_proxiedTabTerminatorHandler","_tabKeyHandler","enabled","eventName","addNamespace","NAME","off","$elements","elementsCount","result","eq","tabbable","normalizeKeyName","$firstTabbable","$lastTabbable","isTabOnLast","shiftKey","isShiftTabOnFirst","isEmptyTabList","isOutsideTarget","$focusElement","_toggleHideTopOverlayCallback","_toggleParentsScrollSubscription","subscribe","of","closeOnScroll","scrollEvent","_proxiedTargetParentsScrollHandler","_targetParentsScrollHandler","_$prevTargetParents","closeHandled","_render","_appendContentToElement","appendTo","shouldDeferRendering","isParentHidden","_contentAlreadyRendered","$parent","isHidden","getBody","_renderContentImpl","_this","whenContentRendered","contentTemplateOption","_getTemplate","transclude","render","$content","noModel","onRendered","_renderDrag","_renderResize","_renderScrollTerminator","$dragTarget","_getDragTarget","startEventName","updateEventName","_dragStartHandler","_dragUpdateHandler","_resizable","_createComponent","handles","_resizeEndHandler","area","_getDragResizeContainer","_positionChangeHandled","$scrollTerminator","terminatorEventName","validate","getDirection","_toggleGestureCover","_clearSelection","isNative","originalEvent","_cancelPreventDefault","targetElements","_prevOffset","x","y","maxTopOffset","maxBottomOffset","maxLeftOffset","maxRightOffset","isContainerDefined","originalViewPort","_deltaSize","contentWidth","outerWidth","contentHeight","outerHeight","containerWidth","containerHeight","_isWindow","fullPageHeight","Math","max","fullPageWidth","prevOffset","targetOffset","locate","deltaSize","isAllowedDrag","shaderOffset","_getContainer","_detachWrapperToContainer","detach","_attachWrapperToContainer","containerDefined","renderContainer","getSwatchContainer","_fixHeightAfterSafariAddressBarResizing","innerHeight","_renderGeometryImpl","_renderShading","_renderDimensions","resultPosition","_renderPosition","$wrapper","_renderShadingDimensions","_renderShadingPosition","setup","wrapperWidth","wrapperHeight","isWindow","positionOf","_getOptionValue","_renderOverlayBoundaryOffset","resetPosition","_transformStringPosition","onPositioning","positionAliases","isString","_attachKeyboardEvents","_keyboardProcessor","element","_keyboardHandler","context","$target","_isVisible","_visibilityChanged","_dimensionChanged","_clean","empty","_cleanFocusState","clearTimeout","_dispose","_deferShowTimer","_toggleDisabledState","Boolean","_toggleRTLDirection","rtl","_optionChanged","args","name","_animateDeferred","resolveWith","_invalidate","showing","animateDeferred","repaint","zIndex","base","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/overlay/ui.overlay.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _typeof = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function(obj) {\r\n    return typeof obj\r\n} : function(obj) {\r\n    return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n};\r\nvar $ = require(\"../../core/renderer\"),\r\n    domAdapter = require(\"../../core/dom_adapter\"),\r\n    windowUtils = require(\"../../core/utils/window\"),\r\n    ready = require(\"../../core/utils/ready_callbacks\").add,\r\n    window = windowUtils.getWindow(),\r\n    navigator = windowUtils.getNavigator(),\r\n    eventsEngine = require(\"../../events/core/events_engine\"),\r\n    fx = require(\"../../animation/fx\"),\r\n    translator = require(\"../../animation/translator\"),\r\n    compareVersions = require(\"../../core/utils/version\").compare,\r\n    viewPortUtils = require(\"../../core/utils/view_port\"),\r\n    extend = require(\"../../core/utils/extend\").extend,\r\n    inArray = require(\"../../core/utils/array\").inArray,\r\n    getPublicElement = require(\"../../core/utils/dom\").getPublicElement,\r\n    viewPortChanged = viewPortUtils.changeCallback,\r\n    hideTopOverlayCallback = require(\"../../mobile/hide_top_overlay\").hideCallback,\r\n    positionUtils = require(\"../../animation/position\"),\r\n    fitIntoRange = require(\"../../core/utils/math\").fitIntoRange,\r\n    domUtils = require(\"../../core/utils/dom\"),\r\n    noop = require(\"../../core/utils/common\").noop,\r\n    typeUtils = require(\"../../core/utils/type\"),\r\n    each = require(\"../../core/utils/iterator\").each,\r\n    devices = require(\"../../core/devices\"),\r\n    browser = require(\"../../core/utils/browser\"),\r\n    registerComponent = require(\"../../core/component_registrator\"),\r\n    Widget = require(\"../widget/ui.widget\"),\r\n    KeyboardProcessor = require(\"../widget/ui.keyboard_processor\"),\r\n    selectors = require(\"../widget/selectors\"),\r\n    dragEvents = require(\"../../events/drag\"),\r\n    eventUtils = require(\"../../events/utils\"),\r\n    pointerEvents = require(\"../../events/pointer\"),\r\n    Resizable = require(\"../resizable\"),\r\n    EmptyTemplate = require(\"../widget/empty_template\"),\r\n    Deferred = require(\"../../core/utils/deferred\").Deferred,\r\n    zIndexPool = require(\"./z_index\"),\r\n    swatch = require(\"../widget/swatch_container\");\r\nvar OVERLAY_CLASS = \"dx-overlay\",\r\n    OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\",\r\n    OVERLAY_CONTENT_CLASS = \"dx-overlay-content\",\r\n    OVERLAY_SHADER_CLASS = \"dx-overlay-shader\",\r\n    OVERLAY_MODAL_CLASS = \"dx-overlay-modal\",\r\n    INNER_OVERLAY_CLASS = \"dx-inner-overlay\",\r\n    INVISIBLE_STATE_CLASS = \"dx-state-invisible\",\r\n    ANONYMOUS_TEMPLATE_NAME = \"content\",\r\n    RTL_DIRECTION_CLASS = \"dx-rtl\",\r\n    ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"],\r\n    OVERLAY_STACK = [],\r\n    DISABLED_STATE_CLASS = \"dx-state-disabled\",\r\n    TAB_KEY = \"tab\",\r\n    POSITION_ALIASES = {\r\n        top: {\r\n            my: \"top center\",\r\n            at: \"top center\"\r\n        },\r\n        bottom: {\r\n            my: \"bottom center\",\r\n            at: \"bottom center\"\r\n        },\r\n        right: {\r\n            my: \"right center\",\r\n            at: \"right center\"\r\n        },\r\n        left: {\r\n            my: \"left center\",\r\n            at: \"left center\"\r\n        },\r\n        center: {\r\n            my: \"center\",\r\n            at: \"center\"\r\n        },\r\n        \"right bottom\": {\r\n            my: \"right bottom\",\r\n            at: \"right bottom\"\r\n        },\r\n        \"right top\": {\r\n            my: \"right top\",\r\n            at: \"right top\"\r\n        },\r\n        \"left bottom\": {\r\n            my: \"left bottom\",\r\n            at: \"left bottom\"\r\n        },\r\n        \"left top\": {\r\n            my: \"left top\",\r\n            at: \"left top\"\r\n        }\r\n    };\r\nvar realDevice = devices.real(),\r\n    realVersion = realDevice.version,\r\n    firefoxDesktop = browser.mozilla && \"desktop\" === realDevice.deviceType,\r\n    iOS = \"ios\" === realDevice.platform,\r\n    hasSafariAddressBar = browser.safari && \"desktop\" !== realDevice.deviceType,\r\n    iOS7_0andBelow = iOS && compareVersions(realVersion, [7, 1]) < 0,\r\n    android4_0nativeBrowser = \"android\" === realDevice.platform && 0 === compareVersions(realVersion, [4, 0], 2) && navigator.userAgent.indexOf(\"Chrome\") === -1;\r\nvar forceRepaint = function($element) {\r\n    if (iOS7_0andBelow || firefoxDesktop) {\r\n        $element.width()\r\n    }\r\n    if (android4_0nativeBrowser) {\r\n        var $parents = $element.parents(),\r\n            inScrollView = $parents.is(\".dx-scrollable-native\");\r\n        if (!inScrollView) {\r\n            $parents.css(\"backfaceVisibility\", \"hidden\");\r\n            $parents.css(\"backfaceVisibility\");\r\n            $parents.css(\"backfaceVisibility\", \"visible\")\r\n        }\r\n    }\r\n};\r\nvar getElement = function(value) {\r\n    return value && $(value.target || value)\r\n};\r\nready(function() {\r\n    eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, function(e) {\r\n        for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    })\r\n});\r\nvar Overlay = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        var offsetSize = 5,\r\n            move = function(top, left, e) {\r\n                if (!this.option(\"dragEnabled\")) {\r\n                    return\r\n                }\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                var allowedOffsets = this._allowedOffsets();\r\n                var offset = {\r\n                    top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),\r\n                    left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)\r\n                };\r\n                this._changePosition(offset)\r\n            };\r\n        return extend(this.callBase(), {\r\n            escape: function() {\r\n                this.hide()\r\n            },\r\n            upArrow: move.bind(this, -offsetSize, 0),\r\n            downArrow: move.bind(this, offsetSize, 0),\r\n            leftArrow: move.bind(this, 0, -offsetSize),\r\n            rightArrow: move.bind(this, 0, offsetSize)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            position: {\r\n                my: \"center\",\r\n                at: \"center\"\r\n            },\r\n            width: function() {\r\n                return .8 * $(window).width()\r\n            },\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: function() {\r\n                return .8 * $(window).height()\r\n            },\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    },\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            closeOnBackButton: true,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            dragEnabled: false,\r\n            resizeEnabled: false,\r\n            onResizeStart: null,\r\n            onResize: null,\r\n            onResizeEnd: null,\r\n            innerOverlay: false,\r\n            target: void 0,\r\n            container: void 0,\r\n            hideTopOverlayHandler: void 0,\r\n            closeOnTargetScroll: false,\r\n            onPositioned: null,\r\n            boundaryOffset: {\r\n                h: 0,\r\n                v: 0\r\n            },\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                var realDevice = devices.real(),\r\n                    realPlatform = realDevice.platform,\r\n                    realVersion = realDevice.version;\r\n                return \"android\" === realPlatform && compareVersions(realVersion, [4, 2]) < 0\r\n            },\r\n            options: {\r\n                animation: {\r\n                    show: {\r\n                        type: \"fade\",\r\n                        duration: 400\r\n                    },\r\n                    hide: {\r\n                        type: \"fade\",\r\n                        duration: 400,\r\n                        to: {\r\n                            opacity: 0\r\n                        },\r\n                        from: {\r\n                            opacity: 1\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !windowUtils.hasWindow()\r\n            },\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _container: function() {\r\n        return this._$content\r\n    },\r\n    _eventBindingTarget: function() {\r\n        return this._$content\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions();\r\n        this._initCloseOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\r\n        this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\r\n        this._initInnerOverlayClass();\r\n        var $element = this.$element();\r\n        this._$wrapper.addClass($element.attr(\"class\"));\r\n        $element.addClass(OVERLAY_CLASS);\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        eventsEngine.on(this._$wrapper, \"MSPointerDown\", noop);\r\n        eventsEngine.on(this._$wrapper, \"focusin\", function(e) {\r\n            e.stopPropagation()\r\n        });\r\n        this._toggleViewPortSubscription(true)\r\n    },\r\n    _initOptions: function(options) {\r\n        this._initTarget(options.target);\r\n        var container = void 0 === options.container ? this.option(\"container\") : options.container;\r\n        this._initContainer(container);\r\n        this._initHideTopOverlayHandler(options.hideTopOverlayHandler);\r\n        this.callBase(options)\r\n    },\r\n    _initInnerOverlayClass: function() {\r\n        this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"))\r\n    },\r\n    _initTarget: function(target) {\r\n        if (!typeUtils.isDefined(target)) {\r\n            return\r\n        }\r\n        var options = this.option();\r\n        each([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], function(_, path) {\r\n            var pathParts = path.split(\".\");\r\n            var option = options;\r\n            while (option) {\r\n                if (1 === pathParts.length) {\r\n                    if (typeUtils.isPlainObject(option)) {\r\n                        option[pathParts.shift()] = target\r\n                    }\r\n                    break\r\n                } else {\r\n                    option = option[pathParts.shift()]\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _initContainer: function(container) {\r\n        container = void 0 === container ? viewPortUtils.value() : container;\r\n        var $element = this.$element();\r\n        var $container = $element.closest(container);\r\n        if (!$container.length) {\r\n            $container = $(container).first()\r\n        }\r\n        this._$container = $container.length ? $container : $element.parent()\r\n    },\r\n    _initHideTopOverlayHandler: function(handler) {\r\n        this._hideTopOverlayHandler = void 0 !== handler ? handler : this._defaultHideTopOverlayHandler.bind(this)\r\n    },\r\n    _defaultHideTopOverlayHandler: function() {\r\n        this.hide()\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        each(ACTIONS, function(_, action) {\r\n            this._actions[action] = this._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || noop\r\n        }.bind(this))\r\n    },\r\n    _initCloseOnOutsideClickHandler: function() {\r\n        var that = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return that._documentDownHandler.apply(that, arguments)\r\n        }\r\n    },\r\n    _documentDownHandler: function(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n        if (typeUtils.isFunction(closeOnOutsideClick)) {\r\n            closeOnOutsideClick = closeOnOutsideClick(e)\r\n        }\r\n        var $container = this._$content,\r\n            isAttachedTarget = $(window.document).is(e.target) || domUtils.contains(window.document, e.target),\r\n            isInnerOverlay = $(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length,\r\n            outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || domUtils.contains($container.get(0), e.target));\r\n        if (outsideClick && closeOnOutsideClick) {\r\n            if (this.option(\"shading\")) {\r\n                e.preventDefault()\r\n            }\r\n            this.hide()\r\n        }\r\n        return this.option(\"propagateOutsideClick\")\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.content = new EmptyTemplate(this)\r\n    },\r\n    _isTopOverlay: function() {\r\n        var overlayStack = this._overlayStack();\r\n        for (var i = overlayStack.length - 1; i >= 0; i--) {\r\n            var tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _overlayStack: function() {\r\n        return OVERLAY_STACK\r\n    },\r\n    _zIndexInitValue: function() {\r\n        return Overlay.baseZIndex()\r\n    },\r\n    _toggleViewPortSubscription: function(toggle) {\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    },\r\n    _viewPortChangeHandler: function() {\r\n        this._initContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    },\r\n    _renderVisibilityAnimate: function(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    },\r\n    _normalizePosition: function() {\r\n        var position = this.option(\"position\");\r\n        this._position = \"function\" === typeof position ? position() : position\r\n    },\r\n    _getAnimationConfig: function() {\r\n        var animation = this.option(\"animation\");\r\n        if (typeUtils.isFunction(animation)) {\r\n            animation = animation.call(this)\r\n        }\r\n        return animation\r\n    },\r\n    _show: function() {\r\n        var that = this,\r\n            deferred = new Deferred;\r\n        this._parentHidden = this._isParentHidden();\r\n        deferred.done(function() {\r\n            delete that._parentHidden\r\n        });\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return deferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        this._normalizePosition();\r\n        var animation = that._getAnimationConfig() || {},\r\n            showAnimation = this._normalizeAnimation(animation.show, \"to\"),\r\n            startShowAnimation = showAnimation && showAnimation.start || noop,\r\n            completeShowAnimation = showAnimation && showAnimation.complete || noop;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            deferred.resolve()\r\n        } else {\r\n            var show = function() {\r\n                this._renderVisibility(true);\r\n                this._animate(showAnimation, function() {\r\n                    if (that.option(\"focusStateEnabled\")) {\r\n                        eventsEngine.trigger(that._focusTarget(), \"focus\")\r\n                    }\r\n                    completeShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = false;\r\n                    that._actions.onShown();\r\n                    deferred.resolve()\r\n                }, function() {\r\n                    startShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = true\r\n                })\r\n            }.bind(this);\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _normalizeAnimation: function(animation, prop) {\r\n        if (animation) {\r\n            animation = extend({\r\n                type: \"slide\"\r\n            }, animation);\r\n            if (animation[prop] && \"object\" === _typeof(animation[prop])) {\r\n                extend(animation[prop], {\r\n                    position: this._position\r\n                })\r\n            }\r\n        }\r\n        return animation\r\n    },\r\n    _hide: function() {\r\n        if (!this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        var that = this,\r\n            deferred = new Deferred,\r\n            animation = that._getAnimationConfig() || {},\r\n            hideAnimation = this._normalizeAnimation(animation.hide, \"from\"),\r\n            startHideAnimation = hideAnimation && hideAnimation.start || noop,\r\n            completeHideAnimation = hideAnimation && hideAnimation.complete || noop,\r\n            hidingArgs = {\r\n                cancel: false\r\n            };\r\n        this._actions.onHiding(hidingArgs);\r\n        if (hidingArgs.cancel) {\r\n            this._isHidingActionCanceled = true;\r\n            this.option(\"visible\", true);\r\n            deferred.resolve()\r\n        } else {\r\n            this._forceFocusLost();\r\n            this._toggleShading(false);\r\n            this._toggleSubscriptions(false);\r\n            this._stopShowTimer();\r\n            this._animate(hideAnimation, function() {\r\n                that._$content.css(\"pointerEvents\", \"\");\r\n                that._renderVisibility(false);\r\n                completeHideAnimation.apply(this, arguments);\r\n                that._actions.onHidden();\r\n                deferred.resolve()\r\n            }, function() {\r\n                that._$content.css(\"pointerEvents\", \"none\");\r\n                startHideAnimation.apply(this, arguments)\r\n            })\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _forceFocusLost: function() {\r\n        var activeElement = domAdapter.getActiveElement();\r\n        var shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            domUtils.resetActiveElement()\r\n        }\r\n    },\r\n    _animate: function(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || noop;\r\n            fx.animate(this._$content, extend({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    },\r\n    _stopAnimation: function() {\r\n        fx.stop(this._$content, true)\r\n    },\r\n    _renderVisibility: function(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            domUtils.triggerHidingEvent(this._$content)\r\n        }\r\n        this._toggleVisibility(visible);\r\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\r\n        this._updateZIndexStackPosition(visible);\r\n        if (visible) {\r\n            this._renderContent();\r\n            this._actions.onShowing();\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            domUtils.triggerShownEvent(this._$content);\r\n            domUtils.triggerResizeEvent(this._$content)\r\n        } else {\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    },\r\n    _updateZIndexStackPosition: function(pushToStack) {\r\n        var overlayStack = this._overlayStack(),\r\n            index = inArray(this, overlayStack);\r\n        if (pushToStack) {\r\n            if (index === -1) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else {\r\n            if (index !== -1) {\r\n                overlayStack.splice(index, 1);\r\n                zIndexPool.remove(this._zIndex)\r\n            }\r\n        }\r\n    },\r\n    _toggleShading: function(visible) {\r\n        this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\r\n        this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\r\n        this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\r\n        this._toggleTabTerminator(visible && this.option(\"shading\"))\r\n    },\r\n    _initTabTerminatorHandler: function() {\r\n        var that = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            that._tabKeyHandler.apply(that, arguments)\r\n        }\r\n    },\r\n    _toggleTabTerminator: function(enabled) {\r\n        var eventName = eventUtils.addNamespace(\"keydown\", this.NAME);\r\n        if (enabled) {\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    },\r\n    _findTabbableBounds: function() {\r\n        var $elements = this._$wrapper.find(\"*\");\r\n        var elementsCount = $elements.length - 1;\r\n        var result = {\r\n            first: null,\r\n            last: null\r\n        };\r\n        for (var i = 0; i <= elementsCount; i++) {\r\n            if (!result.first && $elements.eq(i).is(selectors.tabbable)) {\r\n                result.first = $elements.eq(i)\r\n            }\r\n            if (!result.last && $elements.eq(elementsCount - i).is(selectors.tabbable)) {\r\n                result.last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (result.first && result.last) {\r\n                break\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tabKeyHandler: function(e) {\r\n        if (eventUtils.normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        var tabbableElements = this._findTabbableBounds(),\r\n            $firstTabbable = tabbableElements.first,\r\n            $lastTabbable = tabbableElements.last,\r\n            isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0),\r\n            isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0),\r\n            isEmptyTabList = 0 === tabbableElements.length,\r\n            isOutsideTarget = !domUtils.contains(this._$wrapper.get(0), e.target);\r\n        if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\r\n            e.preventDefault();\r\n            var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            eventsEngine.trigger($focusElement, \"focusin\");\r\n            eventsEngine.trigger($focusElement, \"focus\")\r\n        }\r\n    },\r\n    _toggleSubscriptions: function(enabled) {\r\n        if (windowUtils.hasWindow()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleParentsScrollSubscription(enabled)\r\n        }\r\n    },\r\n    _toggleHideTopOverlayCallback: function(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe && this.option(\"closeOnBackButton\")) {\r\n            hideTopOverlayCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            hideTopOverlayCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    },\r\n    _toggleParentsScrollSubscription: function(subscribe) {\r\n        if (!this._position) {\r\n            return\r\n        }\r\n        var target = this._position.of || $(),\r\n            closeOnScroll = this.option(\"closeOnTargetScroll\"),\r\n            $parents = getElement(target).parents(),\r\n            scrollEvent = eventUtils.addNamespace(\"scroll\", this.NAME);\r\n        if (\"generic\" === devices.real().platform) {\r\n            $parents = $parents.add(window)\r\n        }\r\n        this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function(e) {\r\n            this._targetParentsScrollHandler(e)\r\n        }.bind(this);\r\n        eventsEngine.off($().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n        if (subscribe && closeOnScroll) {\r\n            eventsEngine.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n            this._$prevTargetParents = $parents\r\n        }\r\n    },\r\n    _targetParentsScrollHandler: function(e) {\r\n        var closeHandled = false,\r\n            closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        if (typeUtils.isFunction(closeOnScroll)) {\r\n            closeHandled = closeOnScroll(e)\r\n        }\r\n        if (!closeHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    },\r\n    _appendContentToElement: function() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    },\r\n    _renderContent: function() {\r\n        var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        var isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        this.callBase()\r\n    },\r\n    _isParentHidden: function() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        var $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        var isHidden = false;\r\n        $parent.add($parent.parents()).each(function() {\r\n            var $element = $(this);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        });\r\n        return isHidden || !domAdapter.getBody().contains($parent.get(0))\r\n    },\r\n    _renderContentImpl: function() {\r\n        var _this = this;\r\n        var whenContentRendered = new Deferred;\r\n        var contentTemplateOption = this.option(\"contentTemplate\"),\r\n            contentTemplate = this._getTemplate(contentTemplateOption),\r\n            transclude = this._getAnonymousTemplateName() === contentTemplateOption;\r\n        contentTemplate && contentTemplate.render({\r\n            container: getPublicElement(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: function() {\r\n                whenContentRendered.resolve()\r\n            }\r\n        });\r\n        this._renderDrag();\r\n        this._renderResize();\r\n        this._renderScrollTerminator();\r\n        whenContentRendered.done(function() {\r\n            if (_this.option(\"visible\")) {\r\n                _this._moveToContainer()\r\n            }\r\n        });\r\n        return whenContentRendered.promise()\r\n    },\r\n    _renderDrag: function() {\r\n        var $dragTarget = this._getDragTarget();\r\n        if (!$dragTarget) {\r\n            return\r\n        }\r\n        var startEventName = eventUtils.addNamespace(dragEvents.start, this.NAME),\r\n            updateEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\r\n        eventsEngine.off($dragTarget, startEventName);\r\n        eventsEngine.off($dragTarget, updateEventName);\r\n        if (!this.option(\"dragEnabled\")) {\r\n            return\r\n        }\r\n        eventsEngine.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\r\n        eventsEngine.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this))\r\n    },\r\n    _renderResize: function() {\r\n        this._resizable = this._createComponent(this._$content, Resizable, {\r\n            handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\r\n            onResizeEnd: this._resizeEndHandler.bind(this),\r\n            onResize: this._actions.onResize.bind(this),\r\n            onResizeStart: this._actions.onResizeStart.bind(this),\r\n            minHeight: 100,\r\n            minWidth: 100,\r\n            area: this._getDragResizeContainer()\r\n        })\r\n    },\r\n    _resizeEndHandler: function() {\r\n        this._positionChangeHandled = true;\r\n        var width = this._resizable.option(\"width\"),\r\n            height = this._resizable.option(\"height\");\r\n        width && this.option(\"width\", width);\r\n        height && this.option(\"height\", height);\r\n        this._actions.onResizeEnd()\r\n    },\r\n    _renderScrollTerminator: function() {\r\n        var $scrollTerminator = this._wrapper();\r\n        var terminatorEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\r\n        eventsEngine.off($scrollTerminator, terminatorEventName);\r\n        eventsEngine.on($scrollTerminator, terminatorEventName, {\r\n            validate: function() {\r\n                return true\r\n            },\r\n            getDirection: function() {\r\n                return \"both\"\r\n            },\r\n            _toggleGestureCover: noop,\r\n            _clearSelection: noop,\r\n            isNative: true\r\n        }, function(e) {\r\n            var originalEvent = e.originalEvent.originalEvent;\r\n            e._cancelPreventDefault = true;\r\n            if (originalEvent && \"mousemove\" !== originalEvent.type) {\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    },\r\n    _getDragTarget: function() {\r\n        return this.$content()\r\n    },\r\n    _dragStartHandler: function(e) {\r\n        e.targetElements = [];\r\n        this._prevOffset = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        var allowedOffsets = this._allowedOffsets();\r\n        e.maxTopOffset = allowedOffsets.top;\r\n        e.maxBottomOffset = allowedOffsets.bottom;\r\n        e.maxLeftOffset = allowedOffsets.left;\r\n        e.maxRightOffset = allowedOffsets.right\r\n    },\r\n    _getDragResizeContainer: function() {\r\n        var isContainerDefined = viewPortUtils.originalViewPort().get(0) || this.option(\"container\"),\r\n            $container = !isContainerDefined ? $(window) : this._$container;\r\n        return $container\r\n    },\r\n    _deltaSize: function() {\r\n        var $content = this._$content,\r\n            $container = this._getDragResizeContainer();\r\n        var contentWidth = $content.outerWidth(),\r\n            contentHeight = $content.outerHeight(),\r\n            containerWidth = $container.outerWidth(),\r\n            containerHeight = $container.outerHeight();\r\n        if (this._isWindow($container)) {\r\n            var document = domAdapter.getDocument(),\r\n                fullPageHeight = Math.max($(document).outerHeight(), containerHeight),\r\n                fullPageWidth = Math.max($(document).outerWidth(), containerWidth);\r\n            containerHeight = fullPageHeight;\r\n            containerWidth = fullPageWidth\r\n        }\r\n        return {\r\n            width: containerWidth - contentWidth,\r\n            height: containerHeight - contentHeight\r\n        }\r\n    },\r\n    _dragUpdateHandler: function(e) {\r\n        var offset = e.offset,\r\n            prevOffset = this._prevOffset,\r\n            targetOffset = {\r\n                top: offset.y - prevOffset.y,\r\n                left: offset.x - prevOffset.x\r\n            };\r\n        this._changePosition(targetOffset);\r\n        this._prevOffset = offset\r\n    },\r\n    _changePosition: function(offset) {\r\n        var position = translator.locate(this._$content);\r\n        translator.move(this._$content, {\r\n            left: position.left + offset.left,\r\n            top: position.top + offset.top\r\n        });\r\n        this._positionChangeHandled = true\r\n    },\r\n    _allowedOffsets: function() {\r\n        var position = translator.locate(this._$content),\r\n            deltaSize = this._deltaSize(),\r\n            isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0,\r\n            shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? translator.locate(this._$wrapper) : {\r\n                top: 0,\r\n                left: 0\r\n            },\r\n            boundaryOffset = this.option(\"boundaryOffset\");\r\n        return {\r\n            top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\r\n            bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\r\n            left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\r\n            right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\r\n        }\r\n    },\r\n    _moveFromContainer: function() {\r\n        this._$content.appendTo(this.$element());\r\n        this._detachWrapperToContainer()\r\n    },\r\n    _detachWrapperToContainer: function() {\r\n        this._$wrapper.detach()\r\n    },\r\n    _moveToContainer: function() {\r\n        this._attachWrapperToContainer();\r\n        this._$content.appendTo(this._$wrapper)\r\n    },\r\n    _attachWrapperToContainer: function() {\r\n        var $element = this.$element();\r\n        var containerDefined = void 0 !== this.option(\"container\");\r\n        var renderContainer = containerDefined ? this._$container : swatch.getSwatchContainer($element);\r\n        if (renderContainer && renderContainer[0] === $element.parent()[0]) {\r\n            renderContainer = $element\r\n        }\r\n        this._$wrapper.appendTo(renderContainer)\r\n    },\r\n    _fixHeightAfterSafariAddressBarResizing: function() {\r\n        if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\r\n            this._$wrapper.css(\"minHeight\", window.innerHeight)\r\n        }\r\n    },\r\n    _renderGeometry: function() {\r\n        if (this.option(\"visible\") && windowUtils.hasWindow()) {\r\n            this._renderGeometryImpl()\r\n        }\r\n    },\r\n    _renderGeometryImpl: function() {\r\n        this._stopAnimation();\r\n        this._normalizePosition();\r\n        this._renderShading();\r\n        this._fixHeightAfterSafariAddressBarResizing();\r\n        this._renderDimensions();\r\n        var resultPosition = this._renderPosition();\r\n        this._actions.onPositioned({\r\n            position: resultPosition\r\n        })\r\n    },\r\n    _renderShading: function() {\r\n        var $wrapper = this._$wrapper,\r\n            $container = this._getContainer();\r\n        $wrapper.css(\"position\", this._isWindow($container) && !iOS ? \"fixed\" : \"absolute\");\r\n        this._renderShadingDimensions();\r\n        this._renderShadingPosition()\r\n    },\r\n    _renderShadingPosition: function() {\r\n        if (this.option(\"shading\")) {\r\n            var $container = this._getContainer();\r\n            positionUtils.setup(this._$wrapper, {\r\n                my: \"top left\",\r\n                at: \"top left\",\r\n                of: $container\r\n            })\r\n        }\r\n    },\r\n    _renderShadingDimensions: function() {\r\n        var wrapperWidth, wrapperHeight;\r\n        if (this.option(\"shading\")) {\r\n            var $container = this._getContainer();\r\n            wrapperWidth = this._isWindow($container) ? \"100%\" : $container.outerWidth(), wrapperHeight = this._isWindow($container) ? \"100%\" : $container.outerHeight()\r\n        } else {\r\n            wrapperWidth = \"\";\r\n            wrapperHeight = \"\"\r\n        }\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    },\r\n    _isWindow: function($element) {\r\n        return !!$element && typeUtils.isWindow($element.get(0))\r\n    },\r\n    _getContainer: function() {\r\n        var position = this._position,\r\n            container = this.option(\"container\"),\r\n            positionOf = position ? position.of || window : null;\r\n        return getElement(container || positionOf)\r\n    },\r\n    _renderDimensions: function() {\r\n        var content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    },\r\n    _renderPosition: function() {\r\n        if (this._positionChangeHandled) {\r\n            var allowedOffsets = this._allowedOffsets();\r\n            this._changePosition({\r\n                top: fitIntoRange(0, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: fitIntoRange(0, -allowedOffsets.left, allowedOffsets.right)\r\n            })\r\n        } else {\r\n            this._renderOverlayBoundaryOffset();\r\n            translator.resetPosition(this._$content);\r\n            var position = this._transformStringPosition(this._position, POSITION_ALIASES),\r\n                resultPosition = positionUtils.setup(this._$content, position);\r\n            forceRepaint(this._$content);\r\n            this._actions.onPositioning();\r\n            return resultPosition\r\n        }\r\n    },\r\n    _transformStringPosition: function(position, positionAliases) {\r\n        if (typeUtils.isString(position)) {\r\n            position = extend({}, positionAliases[position])\r\n        }\r\n        return position\r\n    },\r\n    _renderOverlayBoundaryOffset: function() {\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\")\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$content\r\n    },\r\n    _attachKeyboardEvents: function() {\r\n        this._keyboardProcessor = new KeyboardProcessor({\r\n            element: this._$content,\r\n            handler: this._keyboardHandler,\r\n            context: this\r\n        })\r\n    },\r\n    _keyboardHandler: function(options) {\r\n        var e = options.originalEvent,\r\n            $target = $(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.option(\"visible\")\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._renderGeometry()\r\n    },\r\n    _clean: function() {\r\n        if (!this._contentAlreadyRendered) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    },\r\n    _stopShowTimer: function() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    },\r\n    _dispose: function() {\r\n        fx.stop(this._$content, false);\r\n        clearTimeout(this._deferShowTimer);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._actions = null;\r\n        this.callBase();\r\n        zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    },\r\n    _toggleDisabledState: function(value) {\r\n        this.callBase.apply(this, arguments);\r\n        this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value))\r\n    },\r\n    _toggleRTLDirection: function(rtl) {\r\n        this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        if (inArray(args.name, ACTIONS) > -1) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"dragEnabled\":\r\n                this._renderDrag();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"resizeEnabled\":\r\n                this._renderResize();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"shading\":\r\n            case \"shadingColor\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n            case \"boundaryOffset\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionChangeHandled = false;\r\n                this._renderGeometry();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done(function() {\r\n                    if (!this._animateDeferred) {\r\n                        return\r\n                    }\r\n                    this._animateDeferred.resolveWith(this)\r\n                }.bind(this));\r\n                break;\r\n            case \"target\":\r\n                this._initTarget(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"container\":\r\n                this._initContainer(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"closeOnBackButton\":\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnTargetScroll\":\r\n                this._toggleParentsScrollSubscription(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"animation\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                this.option(\"visible\", false);\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    toggle: function(showing) {\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        if (showing === this.option(\"visible\")) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        var animateDeferred = new Deferred;\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        return animateDeferred.promise().done(function() {\r\n            delete this._animateDeferred\r\n        }.bind(this))\r\n    },\r\n    $content: function() {\r\n        return this._$content\r\n    },\r\n    show: function() {\r\n        return this.toggle(true)\r\n    },\r\n    hide: function() {\r\n        return this.toggle(false)\r\n    },\r\n    content: function() {\r\n        return getPublicElement(this._$content)\r\n    },\r\n    repaint: function() {\r\n        this._renderGeometry()\r\n    }\r\n});\r\nOverlay.baseZIndex = function(zIndex) {\r\n    return zIndexPool.base(zIndex)\r\n};\r\nregisterComponent(\"dxOverlay\", Overlay);\r\nmodule.exports = Overlay;\r\n"]},"metadata":{},"sourceType":"script"}