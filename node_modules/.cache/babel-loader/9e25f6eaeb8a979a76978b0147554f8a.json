{"ast":null,"code":"/**\r\n * DevExtreme (ui/collection/ui.collection_widget.base.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _action = require(\"../../core/action\");\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _data_helper = require(\"../../data_helper\");\n\nvar _data_helper2 = _interopRequireDefault(_data_helper);\n\nvar _item = require(\"./item\");\n\nvar _item2 = _interopRequireDefault(_item);\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _selectors2 = _interopRequireDefault(_selectors);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _hold = require(\"../../events/hold\");\n\nvar _hold2 = _interopRequireDefault(_hold);\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _contextmenu = require(\"../../events/contextmenu\");\n\nvar _contextmenu2 = _interopRequireDefault(_contextmenu);\n\nvar _bindable_template = require(\"../widget/bindable_template\");\n\nvar _bindable_template2 = _interopRequireDefault(_bindable_template);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COLLECTION_CLASS = \"dx-collection\";\nvar ITEM_CLASS = \"dx-item\";\nvar CONTENT_CLASS_POSTFIX = \"-content\";\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nvar ITEM_DATA_KEY = \"dxItemData\";\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nvar ITEMS_SELECTOR = \"[data-options*='dxItem']\";\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_PAGE_UP = \"pageup\";\nvar FOCUS_PAGE_DOWN = \"pagedown\";\nvar FOCUS_LAST = \"last\";\nvar FOCUS_FIRST = \"first\";\n\nvar CollectionWidget = _ui2.default.inherit({\n  _activeStateUnit: \".\" + ITEM_CLASS,\n  _supportedKeys: function () {\n    var enter = function (e) {\n      var $itemElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n      if (!$itemElement.length) {\n        return;\n      }\n\n      this._itemClickHandler((0, _extend.extend)({}, e, {\n        target: $itemElement,\n        currentTarget: $itemElement\n      }));\n    },\n        space = function (e) {\n      e.preventDefault();\n      enter.call(this, e);\n    },\n        move = function (location, e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this._moveFocus(location, e);\n    };\n\n    return (0, _extend.extend)(this.callBase(), {\n      space: space,\n      enter: enter,\n      leftArrow: move.bind(this, FOCUS_LEFT),\n      rightArrow: move.bind(this, FOCUS_RIGHT),\n      upArrow: move.bind(this, FOCUS_UP),\n      downArrow: move.bind(this, FOCUS_DOWN),\n      pageUp: move.bind(this, FOCUS_UP),\n      pageDown: move.bind(this, FOCUS_DOWN),\n      home: move.bind(this, FOCUS_FIRST),\n      end: move.bind(this, FOCUS_LAST)\n    });\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\n      dataSource: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusOnSelectedItem: true,\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: function (data) {\n        return data ? data.disabled : void 0;\n      },\n      visibleExpr: function (data) {\n        return data ? data.visible : void 0;\n      }\n    });\n  },\n  _getAnonymousTemplateName: function () {\n    return \"item\";\n  },\n  _init: function () {\n    this._compileDisplayGetter();\n\n    this.callBase();\n\n    this._cleanRenderedItems();\n\n    this._refreshDataSource();\n  },\n  _compileDisplayGetter: function () {\n    var displayExpr = this.option(\"displayExpr\");\n    this._displayGetter = displayExpr ? (0, _data.compileGetter)(this.option(\"displayExpr\")) : void 0;\n  },\n  _initTemplates: function () {\n    this._initItemsFromMarkup();\n\n    this.callBase();\n\n    this._initDefaultItemTemplate();\n  },\n  _initDefaultItemTemplate: function () {\n    var fieldsMap = this._getFieldsMap();\n\n    this._defaultTemplates.item = new _bindable_template2.default(function ($container, data) {\n      if ((0, _type.isPlainObject)(data)) {\n        this._prepareDefaultItemTemplate(data, $container);\n      } else {\n        if (fieldsMap && (0, _type.isFunction)(fieldsMap.text)) {\n          data = fieldsMap.text(data);\n        }\n\n        $container.text(String(_common2.default.ensureDefined(data, \"\")));\n      }\n    }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap);\n  },\n  _getBindableFields: function () {\n    return [\"text\", \"html\"];\n  },\n  _getFieldsMap: function () {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n  },\n  _prepareDefaultItemTemplate: function (data, $container) {\n    if ((0, _type.isDefined)(data.text)) {\n      $container.text(data.text);\n    }\n\n    if ((0, _type.isDefined)(data.html)) {\n      $container.html(data.html);\n    }\n  },\n  _initItemsFromMarkup: function () {\n    var _this = this;\n\n    var $items = this.$element().contents().filter(ITEMS_SELECTOR);\n\n    if (!$items.length || this.option(\"items\").length) {\n      return;\n    }\n\n    var items = [].slice.call($items).map(function (item) {\n      var $item = (0, _renderer2.default)(item);\n      var result = (0, _dom.getElementOptions)(item).dxItem;\n      var isTemplateRequired = $item.html().trim() && !result.template;\n\n      if (isTemplateRequired) {\n        result.template = _this._prepareItemTemplate($item);\n      } else {\n        $item.remove();\n      }\n\n      return result;\n    });\n    this.option(\"items\", items);\n  },\n  _prepareItemTemplate: function ($item) {\n    var templateId = ITEM_TEMPLATE_ID_PREFIX + new _guid2.default();\n    var $template = $item.detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\n\n    this._saveTemplate(templateId, $template);\n\n    return templateId;\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _cleanRenderedItems: function () {\n    this._renderedItemsCount = 0;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (e) {\n    this.callBase.apply(this, arguments);\n\n    if ((0, _array.inArray)(e.target, this._focusTarget()) === -1) {\n      return;\n    }\n\n    var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      this._setFocusedItem($focusedElement);\n    } else {\n      var $activeItem = this._getActiveItem();\n\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", (0, _dom.getPublicElement)($activeItem));\n      }\n    }\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n    var $target = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n    if ($target.length) {\n      this._toggleFocusClass(false, $target);\n    }\n  },\n  _getActiveItem: function (last) {\n    var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n\n    var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\n\n    var activeElements = this._getActiveElement();\n\n    var lastIndex = activeElements.length - 1;\n\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n\n    return activeElements.eq(index);\n  },\n  _renderFocusTarget: function () {\n    this.callBase.apply(this, arguments);\n\n    this._refreshActiveDescendant();\n  },\n  _moveFocus: function (location) {\n    var $newTarget,\n        $items = this._getAvailableItems();\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        $newTarget = this._prevItem($items);\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        $newTarget = this._nextItem($items);\n        break;\n\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n        break;\n\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n        break;\n\n      default:\n        return false;\n    }\n\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", (0, _dom.getPublicElement)($newTarget));\n    }\n  },\n  _getVisibleItems: function ($itemElements) {\n    $itemElements = $itemElements || this._itemElements();\n    return $itemElements.filter(\":visible\");\n  },\n  _getAvailableItems: function ($itemElements) {\n    return this._getVisibleItems($itemElements).not(\".dx-state-disabled\");\n  },\n  _prevItem: function ($items) {\n    var $target = this._getActiveItem(),\n        targetIndex = $items.index($target),\n        $last = $items.last(),\n        $item = (0, _renderer2.default)($items[targetIndex - 1]),\n        loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n\n    return $item;\n  },\n  _nextItem: function ($items) {\n    var $target = this._getActiveItem(true),\n        targetIndex = $items.index($target),\n        $first = $items.first(),\n        $item = (0, _renderer2.default)($items[targetIndex + 1]),\n        loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n\n    return $item;\n  },\n  _selectFocusedItem: function ($target) {\n    this.selectItem($target);\n  },\n  _removeFocusedItem: function (target) {\n    var $target = (0, _renderer2.default)(target);\n\n    if ($target.length) {\n      this._toggleFocusClass(false, $target);\n\n      $target.removeAttr(\"id\");\n    }\n  },\n  _refreshActiveDescendant: function () {\n    this.setAria(\"activedescendant\", \"\");\n    this.setAria(\"activedescendant\", this.getFocusedItemId());\n  },\n  _setFocusedItem: function ($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n\n    $target.attr(\"id\", this.getFocusedItemId());\n\n    this._toggleFocusClass(true, $target);\n\n    this.onFocusedItemChanged(this.getFocusedItemId());\n\n    this._refreshActiveDescendant();\n\n    if (this.option(\"selectOnFocus\")) {\n      this._selectFocusedItem($target);\n    }\n  },\n  _findItemElementByItem: function (item) {\n    var result = (0, _renderer2.default)(),\n        that = this;\n    this.itemElements().each(function () {\n      var $item = (0, _renderer2.default)(this);\n\n      if ($item.data(that._itemDataKey()) === item) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _getIndexByItem: function (item) {\n    return this.option(\"items\").indexOf(item);\n  },\n  _itemOptionChanged: function (item, property, value, oldValue) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n  },\n  _refreshItem: function ($item) {\n    var itemData = this._getItemData($item),\n        index = $item.data(this._itemIndexKey());\n\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  },\n  _optionChanged: function (args) {\n    if (\"items\" === args.name) {\n      var matches = args.fullName.match(ITEM_PATH_REGEX);\n\n      if (matches && matches.length) {\n        var property = matches[matches.length - 1],\n            itemPath = args.fullName.replace(\".\" + property, \"\"),\n            item = this.option(itemPath);\n\n        this._itemOptionChanged(item, property, args.value, args.previousValue);\n\n        return;\n      }\n    }\n\n    switch (args.name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n        this._cleanRenderedItems();\n\n        this._invalidate();\n\n        break;\n\n      case \"dataSource\":\n        this._refreshDataSource();\n\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"noDataText\":\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"itemTemplate\":\n        this._invalidate();\n\n        break;\n\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n\n        break;\n\n      case \"onItemClick\":\n        break;\n\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n\n        break;\n\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n      case \"focusOnSelectedItem\":\n        break;\n\n      case \"focusedElement\":\n        this._removeFocusedItem(args.previousValue);\n\n        this._setFocusedItem((0, _renderer2.default)(args.value));\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._initDefaultItemTemplate();\n\n        this._invalidate();\n\n        break;\n\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _loadNextPage: function () {\n    var dataSource = this._dataSource;\n\n    this._expectNextPageLoading();\n\n    dataSource.pageIndex(1 + dataSource.pageIndex());\n    return dataSource.load();\n  },\n  _expectNextPageLoading: function () {\n    this._startIndexForAppendedItems = 0;\n  },\n  _expectLastItemLoading: function () {\n    this._startIndexForAppendedItems = -1;\n  },\n  _forgetNextPageLoading: function () {\n    this._startIndexForAppendedItems = null;\n  },\n  _dataSourceChangedHandler: function (newItems) {\n    var items = this.option(\"items\");\n\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n\n      if (!this._isLastPage() || this._startIndexForAppendedItems !== -1) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n\n      this._forgetNextPageLoading();\n\n      this._refreshContent();\n\n      this._renderFocusTarget();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  },\n  _refreshContent: function () {\n    this._prepareContent();\n\n    this._renderContent();\n  },\n  _dataSourceLoadErrorHandler: function () {\n    this._forgetNextPageLoading();\n\n    this.option(\"items\", this.option(\"items\"));\n  },\n  _shouldAppendItems: function () {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  },\n  _allowDynamicItemsAppend: function () {\n    return false;\n  },\n  _clean: function () {\n    this._cleanFocusState();\n\n    this._cleanItemContainer();\n  },\n  _cleanItemContainer: function () {\n    (0, _renderer2.default)(this._itemContainer()).empty();\n  },\n  _dispose: function () {\n    this.callBase();\n    clearTimeout(this._itemFocusTimeout);\n  },\n  _refresh: function () {\n    this._cleanRenderedItems();\n\n    this.callBase.apply(this, arguments);\n  },\n  _itemContainer: function () {\n    return this.$element();\n  },\n  _itemClass: function () {\n    return ITEM_CLASS;\n  },\n  _itemContentClass: function () {\n    return this._itemClass() + CONTENT_CLASS_POSTFIX;\n  },\n  _selectedItemClass: function () {\n    return SELECTED_ITEM_CLASS;\n  },\n  _itemResponseWaitClass: function () {\n    return ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemSelector: function () {\n    return \".\" + this._itemClass();\n  },\n  _itemDataKey: function () {\n    return ITEM_DATA_KEY;\n  },\n  _itemIndexKey: function () {\n    return ITEM_INDEX_KEY;\n  },\n  _itemElements: function () {\n    return this._itemContainer().find(this._itemSelector());\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(COLLECTION_CLASS);\n\n    this._prepareContent();\n  },\n  _prepareContent: _common2.default.deferRenderer(function () {\n    this._renderContentImpl();\n  }),\n  _renderContent: function () {\n    this._fireContentReadyAction();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._attachClickEvent();\n\n    this._attachHoldEvent();\n\n    this._attachContextMenuEvent();\n  },\n  _attachClickEvent: function () {\n    var itemSelector = this._itemSelector(),\n        clickEventNamespace = _utils2.default.addNamespace(_click2.default.name, this.NAME),\n        pointerDownEventNamespace = _utils2.default.addNamespace(_pointer2.default.down, this.NAME),\n        that = this;\n\n    var pointerDownAction = new _action2.default(function (args) {\n      var event = args.event;\n\n      that._itemPointerDownHandler(event);\n    });\n\n    _events_engine2.default.off(this._itemContainer(), clickEventNamespace, itemSelector);\n\n    _events_engine2.default.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\n\n    _events_engine2.default.on(this._itemContainer(), clickEventNamespace, itemSelector, function (e) {\n      this._itemClickHandler(e);\n    }.bind(this));\n\n    _events_engine2.default.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function (e) {\n      pointerDownAction.execute({\n        element: (0, _renderer2.default)(e.target),\n        event: e\n      });\n    });\n  },\n  _itemClickHandler: function (e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  },\n  _itemPointerDownHandler: function (e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    this._itemFocusHandler = function () {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = null;\n\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n\n      var $target = (0, _renderer2.default)(e.target),\n          $closestItem = $target.closest(this._itemElements()),\n          $closestFocusable = this._closestFocusable($target);\n\n      if ($closestItem.length && $closestFocusable && (0, _array.inArray)($closestFocusable.get(0), this._focusTarget()) !== -1) {\n        this.option(\"focusedElement\", (0, _dom.getPublicElement)($closestItem));\n      }\n    }.bind(this);\n\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  },\n  _closestFocusable: function ($target) {\n    if ($target.is(_selectors2.default.focusable)) {\n      return $target;\n    } else {\n      $target = $target.parent();\n\n      while ($target.length && !_dom_adapter2.default.isDocument($target.get(0))) {\n        if ($target.is(_selectors2.default.focusable)) {\n          return $target;\n        }\n\n        $target = $target.parent();\n      }\n    }\n  },\n  _forcePointerDownFocus: function () {\n    this._itemFocusHandler && this._itemFocusHandler();\n  },\n  _updateFocusState: function () {\n    this.callBase.apply(this, arguments);\n\n    this._forcePointerDownFocus();\n  },\n  _attachHoldEvent: function () {\n    var $itemContainer = this._itemContainer(),\n        itemSelector = this._itemSelector(),\n        eventName = _utils2.default.addNamespace(_hold2.default.name, this.NAME);\n\n    _events_engine2.default.off($itemContainer, eventName, itemSelector);\n\n    _events_engine2.default.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  },\n  _getHoldTimeout: function () {\n    return this.option(\"itemHoldTimeout\");\n  },\n  _shouldFireHoldEvent: function () {\n    return this.hasActionSubscription(\"onItemHold\");\n  },\n  _itemHoldHandler: function (e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _attachContextMenuEvent: function () {\n    var $itemContainer = this._itemContainer(),\n        itemSelector = this._itemSelector(),\n        eventName = _utils2.default.addNamespace(_contextmenu2.default.name, this.NAME);\n\n    _events_engine2.default.off($itemContainer, eventName, itemSelector);\n\n    _events_engine2.default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  },\n  _shouldFireContextMenuEvent: function () {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  },\n  _itemContextMenuHandler: function (e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _renderContentImpl: function () {\n    var items = this.option(\"items\") || [];\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n  },\n  _renderItems: function (items) {\n    if (items.length) {\n      _iterator2.default.each(items, function (index, itemData) {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      }.bind(this));\n    }\n\n    this._renderEmptyMessage();\n  },\n  _renderItem: function (index, itemData, $container, $itemToReplace) {\n    $container = $container || this._itemContainer();\n\n    var $itemFrame = this._renderItemFrame(index, itemData, $container, $itemToReplace);\n\n    this._setElementData($itemFrame, itemData, index);\n\n    $itemFrame.attr(this.option(\"_itemAttributes\"));\n\n    this._attachItemClickEvent(itemData, $itemFrame);\n\n    var $itemContent = this._getItemContent($itemFrame);\n\n    var renderContentPromise = this._renderItemContent({\n      index: index,\n      itemData: itemData,\n      container: (0, _dom.getPublicElement)($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: this.option(\"itemTemplate\")\n    });\n\n    var that = this;\n    (0, _deferred.when)(renderContentPromise).done(function ($itemContent) {\n      that._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $itemContent,\n        itemData: itemData,\n        itemIndex: index\n      });\n\n      that._executeItemRenderAction(index, itemData, (0, _dom.getPublicElement)($itemFrame));\n    });\n    return $itemFrame;\n  },\n  _getItemContent: function ($itemFrame) {\n    var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\n    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\n    return $itemContent;\n  },\n  _attachItemClickEvent: function (itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n\n    _events_engine2.default.on($itemElement, _click2.default.name, function (e) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }.bind(this));\n  },\n  _renderItemContent: function (args) {\n    var itemTemplateName = this._getItemTemplateName(args);\n\n    var itemTemplate = this._getTemplate(itemTemplateName);\n\n    this._addItemContentClasses(args);\n\n    var $templateResult = (0, _renderer2.default)(this._createItemByTemplate(itemTemplate, args));\n\n    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\n      return args.container;\n    }\n\n    return this._renderItemContentByNode(args, $templateResult);\n  },\n  _renderItemContentByNode: function (args, $node) {\n    (0, _renderer2.default)(args.container).replaceWith($node);\n    args.container = (0, _dom.getPublicElement)($node);\n\n    this._addItemContentClasses(args);\n\n    return $node;\n  },\n  _addItemContentClasses: function (args) {\n    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\n    (0, _renderer2.default)(args.container).addClass(classes.join(\" \"));\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  },\n  _renderItemFrame: function (index, itemData, $container, $itemToReplace) {\n    var $itemFrame = (0, _renderer2.default)(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n\n    if ($itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n\n    return $itemFrame;\n  },\n  _itemOptions: function () {\n    var that = this;\n    return {\n      watchMethod: function () {\n        return that.option(\"integrationOptions.watchMethod\");\n      },\n      fieldGetter: function (field) {\n        var expr = that.option(field + \"Expr\"),\n            getter = (0, _data.compileGetter)(expr);\n        return getter;\n      }\n    };\n  },\n  _postprocessRenderItem: _common2.default.noop,\n  _executeItemRenderAction: function (index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  },\n  _setElementData: function (element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  },\n  _createItemRenderAction: function () {\n    return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"designMode\", \"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n  },\n  _getItemRenderAction: function () {\n    return this._itemRenderAction || this._createItemRenderAction();\n  },\n  _getItemTemplateName: function (args) {\n    var data = args.itemData,\n        templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\"),\n        template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  },\n  _createItemByTemplate: function (itemTemplate, renderArgs) {\n    return itemTemplate.render({\n      model: renderArgs.itemData,\n      container: renderArgs.container,\n      index: renderArgs.index\n    });\n  },\n  _emptyMessageContainer: function () {\n    return this._itemContainer();\n  },\n  _renderEmptyMessage: function (items) {\n    items = items || this.option(\"items\");\n\n    var noDataText = this.option(\"noDataText\"),\n        hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\n\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n\n    if (!hideNoData) {\n      this._$noData = this._$noData || (0, _renderer2.default)(\"<div>\").addClass(\"dx-empty-message\");\n\n      this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\n\n      this.setAria(\"label\", noDataText);\n    }\n\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  },\n  _itemDXEventHandler: function (dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, (0, _extend.extend)(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  },\n  _itemEventHandler: function (initiator, handlerOptionName, actionArgs, actionConfig) {\n    var action = this._createActionByOption(handlerOptionName, (0, _extend.extend)({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerByHandler: function (initiator, handler, actionArgs, actionConfig) {\n    var action = this._createAction(handler, (0, _extend.extend)({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerImpl: function (initiator, action, actionArgs) {\n    var $itemElement = this._closestItemElement((0, _renderer2.default)(initiator)),\n        args = (0, _extend.extend)({}, actionArgs);\n\n    return action((0, _extend.extend)(actionArgs, this._extendActionArgs($itemElement), args));\n  },\n  _extendActionArgs: function ($itemElement) {\n    return {\n      itemElement: (0, _dom.getPublicElement)($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  },\n  _closestItemElement: function ($element) {\n    return (0, _renderer2.default)($element).closest(this._itemSelector());\n  },\n  _getItemData: function (itemElement) {\n    return (0, _renderer2.default)(itemElement).data(this._itemDataKey());\n  },\n  _getSummaryItemsWidth: function (items, includeMargin) {\n    var result = 0;\n\n    if (items) {\n      _iterator2.default.each(items, function (_, item) {\n        result += (0, _renderer2.default)(item).outerWidth(includeMargin || false);\n      });\n    }\n\n    return result;\n  },\n  getFocusedItemId: function () {\n    if (!this._focusedItemId) {\n      this._focusedItemId = \"dx-\" + new _guid2.default();\n    }\n\n    return this._focusedItemId;\n  },\n  itemElements: function () {\n    return this._itemElements();\n  },\n  itemsContainer: function () {\n    return this._itemContainer();\n  }\n}).include(_data_helper2.default);\n\nCollectionWidget.ItemClass = _item2.default;\nmodule.exports = CollectionWidget;","map":{"version":3,"sources":["C:/Users/abdel/PhpstormProjects/editeur_scenario_jeu/node_modules/devextreme/ui/collection/ui.collection_widget.base.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_common","_common2","_dom","_dom_adapter","_dom_adapter2","_type","_deferred","_extend","_array","_iterator","_iterator2","_action","_action2","_guid","_guid2","_ui","_ui2","_utils","_utils2","_pointer","_pointer2","_data_helper","_data_helper2","_item","_item2","_selectors","_selectors2","_message","_message2","_hold","_hold2","_data","_click","_click2","_contextmenu","_contextmenu2","_bindable_template","_bindable_template2","obj","__esModule","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_SELECTOR","SELECTED_ITEM_CLASS","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","default","inherit","_activeStateUnit","_supportedKeys","enter","e","$itemElement","option","length","_itemClickHandler","extend","target","currentTarget","space","preventDefault","call","move","location","stopPropagation","_moveFocus","callBase","leftArrow","bind","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","format","dataSource","_itemAttributes","itemTemplateProperty","focusOnSelectedItem","focusedElement","displayExpr","disabledExpr","data","disabled","visibleExpr","visible","_getAnonymousTemplateName","_init","_compileDisplayGetter","_cleanRenderedItems","_refreshDataSource","_displayGetter","compileGetter","_initTemplates","_initItemsFromMarkup","_initDefaultItemTemplate","fieldsMap","_getFieldsMap","_defaultTemplates","item","$container","isPlainObject","_prepareDefaultItemTemplate","isFunction","text","String","ensureDefined","_getBindableFields","isDefined","html","_this","$items","$element","contents","filter","slice","map","$item","result","getElementOptions","dxItem","isTemplateRequired","trim","template","_prepareItemTemplate","remove","templateId","$template","detach","clone","removeAttr","addClass","_saveTemplate","_dataSourceOptions","paginate","_renderedItemsCount","_focusTarget","_focusInHandler","apply","arguments","inArray","$focusedElement","_setFocusedItem","$activeItem","_getActiveItem","getPublicElement","_focusOutHandler","$target","_toggleFocusClass","last","index","activeElements","_getActiveElement","lastIndex","eq","_renderFocusTarget","_refreshActiveDescendant","$newTarget","_getAvailableItems","_prevItem","_nextItem","first","_getVisibleItems","$itemElements","_itemElements","not","targetIndex","$last","loop","$first","_selectFocusedItem","selectItem","_removeFocusedItem","setAria","getFocusedItemId","attr","_findItemElementByItem","that","itemElements","each","_itemDataKey","_getIndexByItem","indexOf","_itemOptionChanged","property","value","oldValue","constructor","ItemClass","getInstance","setDataField","_refreshItem","itemData","_getItemData","_itemIndexKey","_renderItem","_optionChanged","args","name","matches","fullName","match","itemPath","replace","previousValue","_invalidate","_renderEmptyMessage","_createItemRenderAction","_attachHoldEvent","_attachContextMenuEvent","_createActionByOption","_loadNextPage","_dataSource","_expectNextPageLoading","pageIndex","load","_startIndexForAppendedItems","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_initialized","_shouldAppendItems","_isLastPage","concat","_refreshContent","_prepareContent","_renderContent","_dataSourceLoadErrorHandler","_allowDynamicItemsAppend","_clean","_cleanFocusState","_cleanItemContainer","_itemContainer","empty","_dispose","clearTimeout","_itemFocusTimeout","_refresh","_itemClass","_itemContentClass","_selectedItemClass","_itemResponseWaitClass","_itemSelector","find","_initMarkup","deferRenderer","_renderContentImpl","_fireContentReadyAction","_render","_attachClickEvent","itemSelector","clickEventNamespace","addNamespace","NAME","pointerDownEventNamespace","down","pointerDownAction","event","_itemPointerDownHandler","off","on","execute","element","config","_itemDXEventHandler","_itemFocusHandler","isDefaultPrevented","$closestItem","closest","$closestFocusable","_closestFocusable","get","setTimeout","_forcePointerDownFocus","is","focusable","parent","isDocument","_updateFocusState","$itemContainer","eventName","timeout","_getHoldTimeout","_itemHoldHandler","_shouldFireHoldEvent","hasActionSubscription","cancel","_itemContextMenuHandler","_shouldFireContextMenuEvent","_renderItems","$itemToReplace","$itemFrame","_renderItemFrame","_setElementData","_attachItemClickEvent","$itemContent","_getItemContent","renderContentPromise","_renderItemContent","container","contentClass","defaultTemplateName","when","done","_postprocessRenderItem","itemElement","itemContent","itemIndex","_executeItemRenderAction","removeClass","onClick","_itemEventHandlerByHandler","itemTemplateName","_getItemTemplateName","_getTemplate","_addItemContentClasses","$templateResult","_createItemByTemplate","hasClass","_renderItemContentByNode","$node","replaceWith","classes","join","_appendItemToContainer","appendTo","_itemOptions","watchMethod","fieldGetter","field","expr","getter","noop","_getItemRenderAction","_itemRenderAction","excludeValidators","category","templateProperty","renderArgs","render","model","_emptyMessageContainer","hideNoData","_isDataSourceLoading","_$noData","toggleClass","dxEvent","handlerOptionName","actionArgs","actionConfig","_itemEventHandler","initiator","action","validatingTargetName","_itemEventHandlerImpl","handler","_createAction","_closestItemElement","_extendActionArgs","_getSummaryItemsWidth","includeMargin","_","outerWidth","_focusedItemId","itemsContainer","include","module","exports"],"mappings":"AAAA;;;;;;;;AAQA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AACA,IAAII,cAAc,GAAGH,OAAO,CAAC,iCAAD,CAA5B;;AACA,IAAII,eAAe,GAAGF,sBAAsB,CAACC,cAAD,CAA5C;;AACA,IAAIE,OAAO,GAAGL,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIM,QAAQ,GAAGJ,sBAAsB,CAACG,OAAD,CAArC;;AACA,IAAIE,IAAI,GAAGP,OAAO,CAAC,sBAAD,CAAlB;;AACA,IAAIQ,YAAY,GAAGR,OAAO,CAAC,wBAAD,CAA1B;;AACA,IAAIS,aAAa,GAAGP,sBAAsB,CAACM,YAAD,CAA1C;;AACA,IAAIE,KAAK,GAAGV,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIW,SAAS,GAAGX,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIY,OAAO,GAAGZ,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIa,MAAM,GAAGb,OAAO,CAAC,wBAAD,CAApB;;AACA,IAAIc,SAAS,GAAGd,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIe,UAAU,GAAGb,sBAAsB,CAACY,SAAD,CAAvC;;AACA,IAAIE,OAAO,GAAGhB,OAAO,CAAC,mBAAD,CAArB;;AACA,IAAIiB,QAAQ,GAAGf,sBAAsB,CAACc,OAAD,CAArC;;AACA,IAAIE,KAAK,GAAGlB,OAAO,CAAC,iBAAD,CAAnB;;AACA,IAAImB,MAAM,GAAGjB,sBAAsB,CAACgB,KAAD,CAAnC;;AACA,IAAIE,GAAG,GAAGpB,OAAO,CAAC,qBAAD,CAAjB;;AACA,IAAIqB,IAAI,GAAGnB,sBAAsB,CAACkB,GAAD,CAAjC;;AACA,IAAIE,MAAM,GAAGtB,OAAO,CAAC,oBAAD,CAApB;;AACA,IAAIuB,OAAO,GAAGrB,sBAAsB,CAACoB,MAAD,CAApC;;AACA,IAAIE,QAAQ,GAAGxB,OAAO,CAAC,sBAAD,CAAtB;;AACA,IAAIyB,SAAS,GAAGvB,sBAAsB,CAACsB,QAAD,CAAtC;;AACA,IAAIE,YAAY,GAAG1B,OAAO,CAAC,mBAAD,CAA1B;;AACA,IAAI2B,aAAa,GAAGzB,sBAAsB,CAACwB,YAAD,CAA1C;;AACA,IAAIE,KAAK,GAAG5B,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAI6B,MAAM,GAAG3B,sBAAsB,CAAC0B,KAAD,CAAnC;;AACA,IAAIE,UAAU,GAAG9B,OAAO,CAAC,qBAAD,CAAxB;;AACA,IAAI+B,WAAW,GAAG7B,sBAAsB,CAAC4B,UAAD,CAAxC;;AACA,IAAIE,QAAQ,GAAGhC,OAAO,CAAC,4BAAD,CAAtB;;AACA,IAAIiC,SAAS,GAAG/B,sBAAsB,CAAC8B,QAAD,CAAtC;;AACA,IAAIE,KAAK,GAAGlC,OAAO,CAAC,mBAAD,CAAnB;;AACA,IAAImC,MAAM,GAAGjC,sBAAsB,CAACgC,KAAD,CAAnC;;AACA,IAAIE,KAAK,GAAGpC,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIqC,MAAM,GAAGrC,OAAO,CAAC,oBAAD,CAApB;;AACA,IAAIsC,OAAO,GAAGpC,sBAAsB,CAACmC,MAAD,CAApC;;AACA,IAAIE,YAAY,GAAGvC,OAAO,CAAC,0BAAD,CAA1B;;AACA,IAAIwC,aAAa,GAAGtC,sBAAsB,CAACqC,YAAD,CAA1C;;AACA,IAAIE,kBAAkB,GAAGzC,OAAO,CAAC,6BAAD,CAAhC;;AACA,IAAI0C,mBAAmB,GAAGxC,sBAAsB,CAACuC,kBAAD,CAAhD;;AAEA,SAASvC,sBAAT,CAAgCyC,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,gBAAgB,GAAG,eAAvB;AACA,IAAIC,UAAU,GAAG,SAAjB;AACA,IAAIC,qBAAqB,GAAG,UAA5B;AACA,IAAIC,8BAA8B,GAAG,6BAArC;AACA,IAAIC,aAAa,GAAG,YAApB;AACA,IAAIC,cAAc,GAAG,aAArB;AACA,IAAIC,uBAAuB,GAAG,OAA9B;AACA,IAAIC,cAAc,GAAG,0BAArB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,gBAAgB,GAAG,qBAAvB;AACA,IAAIC,sBAAsB,GAAG,qBAA7B;AACA,IAAIC,eAAe,GAAG,6BAAtB;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,UAAU,GAAG,MAAjB;AACA,IAAIC,UAAU,GAAG,MAAjB;AACA,IAAIC,WAAW,GAAG,OAAlB;AACA,IAAIC,aAAa,GAAG,QAApB;AACA,IAAIC,eAAe,GAAG,UAAtB;AACA,IAAIC,UAAU,GAAG,MAAjB;AACA,IAAIC,WAAW,GAAG,OAAlB;;AACA,IAAIC,gBAAgB,GAAG7C,IAAI,CAAC8C,OAAL,CAAaC,OAAb,CAAqB;AACxCC,EAAAA,gBAAgB,EAAE,MAAMvB,UADgB;AAExCwB,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAIC,KAAK,GAAG,UAASC,CAAT,EAAY;AAChB,UAAIC,YAAY,GAAG,CAAC,GAAGxE,UAAU,CAACkE,OAAf,EAAwB,KAAKO,MAAL,CAAY,gBAAZ,CAAxB,CAAnB;;AACA,UAAI,CAACD,YAAY,CAACE,MAAlB,EAA0B;AACtB;AACH;;AACD,WAAKC,iBAAL,CAAuB,CAAC,GAAGhE,OAAO,CAACiE,MAAZ,EAAoB,EAApB,EAAwBL,CAAxB,EAA2B;AAC9CM,QAAAA,MAAM,EAAEL,YADsC;AAE9CM,QAAAA,aAAa,EAAEN;AAF+B,OAA3B,CAAvB;AAIH,KATL;AAAA,QAUIO,KAAK,GAAG,UAASR,CAAT,EAAY;AAChBA,MAAAA,CAAC,CAACS,cAAF;AACAV,MAAAA,KAAK,CAACW,IAAN,CAAW,IAAX,EAAiBV,CAAjB;AACH,KAbL;AAAA,QAcIW,IAAI,GAAG,UAASC,QAAT,EAAmBZ,CAAnB,EAAsB;AACzBA,MAAAA,CAAC,CAACS,cAAF;AACAT,MAAAA,CAAC,CAACa,eAAF;;AACA,WAAKC,UAAL,CAAgBF,QAAhB,EAA0BZ,CAA1B;AACH,KAlBL;;AAmBA,WAAO,CAAC,GAAG5D,OAAO,CAACiE,MAAZ,EAAoB,KAAKU,QAAL,EAApB,EAAqC;AACxCP,MAAAA,KAAK,EAAEA,KADiC;AAExCT,MAAAA,KAAK,EAAEA,KAFiC;AAGxCiB,MAAAA,SAAS,EAAEL,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgB7B,UAAhB,CAH6B;AAIxC8B,MAAAA,UAAU,EAAEP,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgB5B,WAAhB,CAJ4B;AAKxC8B,MAAAA,OAAO,EAAER,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgB/B,QAAhB,CAL+B;AAMxCkC,MAAAA,SAAS,EAAET,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgB9B,UAAhB,CAN6B;AAOxCkC,MAAAA,MAAM,EAAEV,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgB/B,QAAhB,CAPgC;AAQxCoC,MAAAA,QAAQ,EAAEX,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgB9B,UAAhB,CAR8B;AASxCoC,MAAAA,IAAI,EAAEZ,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgBxB,WAAhB,CATkC;AAUxC+B,MAAAA,GAAG,EAAEb,IAAI,CAACM,IAAL,CAAU,IAAV,EAAgBzB,UAAhB;AAVmC,KAArC,CAAP;AAYH,GAlCuC;AAmCxCiC,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,CAAC,GAAGrF,OAAO,CAACiE,MAAZ,EAAoB,KAAKU,QAAL,EAApB,EAAqC;AACxCW,MAAAA,aAAa,EAAE,KADyB;AAExCC,MAAAA,aAAa,EAAE,IAFyB;AAGxCC,MAAAA,KAAK,EAAE,EAHiC;AAIxCC,MAAAA,YAAY,EAAE,MAJ0B;AAKxCC,MAAAA,cAAc,EAAE,IALwB;AAMxCC,MAAAA,WAAW,EAAE,IAN2B;AAOxCC,MAAAA,UAAU,EAAE,IAP4B;AAQxCC,MAAAA,eAAe,EAAE,GARuB;AASxCC,MAAAA,iBAAiB,EAAE,IATqB;AAUxCC,MAAAA,oBAAoB,EAAE,IAVkB;AAWxCC,MAAAA,UAAU,EAAE3E,SAAS,CAACkC,OAAV,CAAkB0C,MAAlB,CAAyB,+BAAzB,CAX4B;AAYxCC,MAAAA,UAAU,EAAE,IAZ4B;AAaxCC,MAAAA,eAAe,EAAE,EAbuB;AAcxCC,MAAAA,oBAAoB,EAAE,UAdkB;AAexCC,MAAAA,mBAAmB,EAAE,IAfmB;AAgBxCC,MAAAA,cAAc,EAAE,IAhBwB;AAiBxCC,MAAAA,WAAW,EAAE,KAAK,CAjBsB;AAkBxCC,MAAAA,YAAY,EAAE,UAASC,IAAT,EAAe;AACzB,eAAOA,IAAI,GAAGA,IAAI,CAACC,QAAR,GAAmB,KAAK,CAAnC;AACH,OApBuC;AAqBxCC,MAAAA,WAAW,EAAE,UAASF,IAAT,EAAe;AACxB,eAAOA,IAAI,GAAGA,IAAI,CAACG,OAAR,GAAkB,KAAK,CAAlC;AACH;AAvBuC,KAArC,CAAP;AAyBH,GA7DuC;AA8DxCC,EAAAA,yBAAyB,EAAE,YAAW;AAClC,WAAO,MAAP;AACH,GAhEuC;AAiExCC,EAAAA,KAAK,EAAE,YAAW;AACd,SAAKC,qBAAL;;AACA,SAAKpC,QAAL;;AACA,SAAKqC,mBAAL;;AACA,SAAKC,kBAAL;AACH,GAtEuC;AAuExCF,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,QAAIR,WAAW,GAAG,KAAKzC,MAAL,CAAY,aAAZ,CAAlB;AACA,SAAKoD,cAAL,GAAsBX,WAAW,GAAG,CAAC,GAAG/E,KAAK,CAAC2F,aAAV,EAAyB,KAAKrD,MAAL,CAAY,aAAZ,CAAzB,CAAH,GAA0D,KAAK,CAAhG;AACH,GA1EuC;AA2ExCsD,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKC,oBAAL;;AACA,SAAK1C,QAAL;;AACA,SAAK2C,wBAAL;AACH,GA/EuC;AAgFxCA,EAAAA,wBAAwB,EAAE,YAAW;AACjC,QAAIC,SAAS,GAAG,KAAKC,aAAL,EAAhB;;AACA,SAAKC,iBAAL,CAAuBC,IAAvB,GAA8B,IAAI5F,mBAAmB,CAACyB,OAAxB,CAAgC,UAASoE,UAAT,EAAqBlB,IAArB,EAA2B;AACrF,UAAI,CAAC,GAAG3G,KAAK,CAAC8H,aAAV,EAAyBnB,IAAzB,CAAJ,EAAoC;AAChC,aAAKoB,2BAAL,CAAiCpB,IAAjC,EAAuCkB,UAAvC;AACH,OAFD,MAEO;AACH,YAAIJ,SAAS,IAAI,CAAC,GAAGzH,KAAK,CAACgI,UAAV,EAAsBP,SAAS,CAACQ,IAAhC,CAAjB,EAAwD;AACpDtB,UAAAA,IAAI,GAAGc,SAAS,CAACQ,IAAV,CAAetB,IAAf,CAAP;AACH;;AACDkB,QAAAA,UAAU,CAACI,IAAX,CAAgBC,MAAM,CAACtI,QAAQ,CAAC6D,OAAT,CAAiB0E,aAAjB,CAA+BxB,IAA/B,EAAqC,EAArC,CAAD,CAAtB;AACH;AACJ,KAT6D,CAS5D5B,IAT4D,CASvD,IATuD,CAAhC,EAShB,KAAKqD,kBAAL,EATgB,EASW,KAAKpE,MAAL,CAAY,gCAAZ,CATX,EAS0DyD,SAT1D,CAA9B;AAUH,GA5FuC;AA6FxCW,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,CAAC,MAAD,EAAS,MAAT,CAAP;AACH,GA/FuC;AAgGxCV,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAI,KAAKN,cAAT,EAAyB;AACrB,aAAO;AACHa,QAAAA,IAAI,EAAE,KAAKb;AADR,OAAP;AAGH;AACJ,GAtGuC;AAuGxCW,EAAAA,2BAA2B,EAAE,UAASpB,IAAT,EAAekB,UAAf,EAA2B;AACpD,QAAI,CAAC,GAAG7H,KAAK,CAACqI,SAAV,EAAqB1B,IAAI,CAACsB,IAA1B,CAAJ,EAAqC;AACjCJ,MAAAA,UAAU,CAACI,IAAX,CAAgBtB,IAAI,CAACsB,IAArB;AACH;;AACD,QAAI,CAAC,GAAGjI,KAAK,CAACqI,SAAV,EAAqB1B,IAAI,CAAC2B,IAA1B,CAAJ,EAAqC;AACjCT,MAAAA,UAAU,CAACS,IAAX,CAAgB3B,IAAI,CAAC2B,IAArB;AACH;AACJ,GA9GuC;AA+GxCf,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,QAAIgB,KAAK,GAAG,IAAZ;;AACA,QAAIC,MAAM,GAAG,KAAKC,QAAL,GAAgBC,QAAhB,GAA2BC,MAA3B,CAAkCjG,cAAlC,CAAb;;AACA,QAAI,CAAC8F,MAAM,CAACvE,MAAR,IAAkB,KAAKD,MAAL,CAAY,OAAZ,EAAqBC,MAA3C,EAAmD;AAC/C;AACH;;AACD,QAAIyB,KAAK,GAAG,GAAGkD,KAAH,CAASpE,IAAT,CAAcgE,MAAd,EAAsBK,GAAtB,CAA0B,UAASjB,IAAT,EAAe;AACjD,UAAIkB,KAAK,GAAG,CAAC,GAAGvJ,UAAU,CAACkE,OAAf,EAAwBmE,IAAxB,CAAZ;AACA,UAAImB,MAAM,GAAG,CAAC,GAAGlJ,IAAI,CAACmJ,iBAAT,EAA4BpB,IAA5B,EAAkCqB,MAA/C;AACA,UAAIC,kBAAkB,GAAGJ,KAAK,CAACR,IAAN,GAAaa,IAAb,MAAuB,CAACJ,MAAM,CAACK,QAAxD;;AACA,UAAIF,kBAAJ,EAAwB;AACpBH,QAAAA,MAAM,CAACK,QAAP,GAAkBb,KAAK,CAACc,oBAAN,CAA2BP,KAA3B,CAAlB;AACH,OAFD,MAEO;AACHA,QAAAA,KAAK,CAACQ,MAAN;AACH;;AACD,aAAOP,MAAP;AACH,KAVW,CAAZ;AAWA,SAAK/E,MAAL,CAAY,OAAZ,EAAqB0B,KAArB;AACH,GAjIuC;AAkIxC2D,EAAAA,oBAAoB,EAAE,UAASP,KAAT,EAAgB;AAClC,QAAIS,UAAU,GAAG9G,uBAAuB,GAAG,IAAIhC,MAAM,CAACgD,OAAX,EAA3C;AACA,QAAI+F,SAAS,GAAGV,KAAK,CAACW,MAAN,GAAeC,KAAf,GAAuBC,UAAvB,CAAkC,cAAlC,EAAkDC,QAAlD,CAA2D9G,sBAA3D,CAAhB;;AACA,SAAK+G,aAAL,CAAmBN,UAAnB,EAA+BC,SAA/B;;AACA,WAAOD,UAAP;AACH,GAvIuC;AAwIxCO,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO;AACHC,MAAAA,QAAQ,EAAE;AADP,KAAP;AAGH,GA5IuC;AA6IxC7C,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,SAAK8C,mBAAL,GAA2B,CAA3B;AACH,GA/IuC;AAgJxCC,EAAAA,YAAY,EAAE,YAAW;AACrB,WAAO,KAAKxB,QAAL,EAAP;AACH,GAlJuC;AAmJxCyB,EAAAA,eAAe,EAAE,UAASpG,CAAT,EAAY;AACzB,SAAKe,QAAL,CAAcsF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,QAAI,CAAC,GAAGjK,MAAM,CAACkK,OAAX,EAAoBvG,CAAC,CAACM,MAAtB,EAA8B,KAAK6F,YAAL,EAA9B,MAAuD,CAAC,CAA5D,EAA+D;AAC3D;AACH;;AACD,QAAIK,eAAe,GAAG,CAAC,GAAG/K,UAAU,CAACkE,OAAf,EAAwB,KAAKO,MAAL,CAAY,gBAAZ,CAAxB,CAAtB;;AACA,QAAIsG,eAAe,CAACrG,MAApB,EAA4B;AACxB,WAAKsG,eAAL,CAAqBD,eAArB;AACH,KAFD,MAEO;AACH,UAAIE,WAAW,GAAG,KAAKC,cAAL,EAAlB;;AACA,UAAID,WAAW,CAACvG,MAAhB,EAAwB;AACpB,aAAKD,MAAL,CAAY,gBAAZ,EAA8B,CAAC,GAAGnE,IAAI,CAAC6K,gBAAT,EAA2BF,WAA3B,CAA9B;AACH;AACJ;AACJ,GAjKuC;AAkKxCG,EAAAA,gBAAgB,EAAE,YAAW;AACzB,SAAK9F,QAAL,CAAcsF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACA,QAAIQ,OAAO,GAAG,CAAC,GAAGrL,UAAU,CAACkE,OAAf,EAAwB,KAAKO,MAAL,CAAY,gBAAZ,CAAxB,CAAd;;AACA,QAAI4G,OAAO,CAAC3G,MAAZ,EAAoB;AAChB,WAAK4G,iBAAL,CAAuB,KAAvB,EAA8BD,OAA9B;AACH;AACJ,GAxKuC;AAyKxCH,EAAAA,cAAc,EAAE,UAASK,IAAT,EAAe;AAC3B,QAAIR,eAAe,GAAG,CAAC,GAAG/K,UAAU,CAACkE,OAAf,EAAwB,KAAKO,MAAL,CAAY,gBAAZ,CAAxB,CAAtB;;AACA,QAAIsG,eAAe,CAACrG,MAApB,EAA4B;AACxB,aAAOqG,eAAP;AACH;;AACD,QAAIS,KAAK,GAAG,KAAK/G,MAAL,CAAY,qBAAZ,IAAqC,KAAKA,MAAL,CAAY,eAAZ,CAArC,GAAoE,CAAhF;;AACA,QAAIgH,cAAc,GAAG,KAAKC,iBAAL,EAArB;;AACA,QAAIC,SAAS,GAAGF,cAAc,CAAC/G,MAAf,GAAwB,CAAxC;;AACA,QAAI8G,KAAK,GAAG,CAAZ,EAAe;AACXA,MAAAA,KAAK,GAAGD,IAAI,GAAGI,SAAH,GAAe,CAA3B;AACH;;AACD,WAAOF,cAAc,CAACG,EAAf,CAAkBJ,KAAlB,CAAP;AACH,GArLuC;AAsLxCK,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,SAAKvG,QAAL,CAAcsF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,SAAKiB,wBAAL;AACH,GAzLuC;AA0LxCzG,EAAAA,UAAU,EAAE,UAASF,QAAT,EAAmB;AAC3B,QAAI4G,UAAJ;AAAA,QAAgB9C,MAAM,GAAG,KAAK+C,kBAAL,EAAzB;;AACA,YAAQ7G,QAAR;AACI,WAAKtB,aAAL;AACA,WAAKJ,QAAL;AACIsI,QAAAA,UAAU,GAAG,KAAKE,SAAL,CAAehD,MAAf,CAAb;AACA;;AACJ,WAAKnF,eAAL;AACA,WAAKJ,UAAL;AACIqI,QAAAA,UAAU,GAAG,KAAKG,SAAL,CAAejD,MAAf,CAAb;AACA;;AACJ,WAAKrF,WAAL;AACImI,QAAAA,UAAU,GAAG,KAAKtH,MAAL,CAAY,YAAZ,IAA4B,KAAKwH,SAAL,CAAehD,MAAf,CAA5B,GAAqD,KAAKiD,SAAL,CAAejD,MAAf,CAAlE;AACA;;AACJ,WAAKtF,UAAL;AACIoI,QAAAA,UAAU,GAAG,KAAKtH,MAAL,CAAY,YAAZ,IAA4B,KAAKyH,SAAL,CAAejD,MAAf,CAA5B,GAAqD,KAAKgD,SAAL,CAAehD,MAAf,CAAlE;AACA;;AACJ,WAAKjF,WAAL;AACI+H,QAAAA,UAAU,GAAG9C,MAAM,CAACkD,KAAP,EAAb;AACA;;AACJ,WAAKpI,UAAL;AACIgI,QAAAA,UAAU,GAAG9C,MAAM,CAACsC,IAAP,EAAb;AACA;;AACJ;AACI,eAAO,KAAP;AAtBR;;AAwBA,QAAI,MAAMQ,UAAU,CAACrH,MAArB,EAA6B;AACzB,WAAKD,MAAL,CAAY,gBAAZ,EAA8B,CAAC,GAAGnE,IAAI,CAAC6K,gBAAT,EAA2BY,UAA3B,CAA9B;AACH;AACJ,GAvNuC;AAwNxCK,EAAAA,gBAAgB,EAAE,UAASC,aAAT,EAAwB;AACtCA,IAAAA,aAAa,GAAGA,aAAa,IAAI,KAAKC,aAAL,EAAjC;AACA,WAAOD,aAAa,CAACjD,MAAd,CAAqB,UAArB,CAAP;AACH,GA3NuC;AA4NxC4C,EAAAA,kBAAkB,EAAE,UAASK,aAAT,EAAwB;AACxC,WAAO,KAAKD,gBAAL,CAAsBC,aAAtB,EAAqCE,GAArC,CAAyC,oBAAzC,CAAP;AACH,GA9NuC;AA+NxCN,EAAAA,SAAS,EAAE,UAAShD,MAAT,EAAiB;AACxB,QAAIoC,OAAO,GAAG,KAAKH,cAAL,EAAd;AAAA,QACIsB,WAAW,GAAGvD,MAAM,CAACuC,KAAP,CAAaH,OAAb,CADlB;AAAA,QAEIoB,KAAK,GAAGxD,MAAM,CAACsC,IAAP,EAFZ;AAAA,QAGIhC,KAAK,GAAG,CAAC,GAAGvJ,UAAU,CAACkE,OAAf,EAAwB+E,MAAM,CAACuD,WAAW,GAAG,CAAf,CAA9B,CAHZ;AAAA,QAIIE,IAAI,GAAG,KAAKjI,MAAL,CAAY,eAAZ,CAJX;;AAKA,QAAI,MAAM8E,KAAK,CAAC7E,MAAZ,IAAsBgI,IAA1B,EAAgC;AAC5BnD,MAAAA,KAAK,GAAGkD,KAAR;AACH;;AACD,WAAOlD,KAAP;AACH,GAzOuC;AA0OxC2C,EAAAA,SAAS,EAAE,UAASjD,MAAT,EAAiB;AACxB,QAAIoC,OAAO,GAAG,KAAKH,cAAL,CAAoB,IAApB,CAAd;AAAA,QACIsB,WAAW,GAAGvD,MAAM,CAACuC,KAAP,CAAaH,OAAb,CADlB;AAAA,QAEIsB,MAAM,GAAG1D,MAAM,CAACkD,KAAP,EAFb;AAAA,QAGI5C,KAAK,GAAG,CAAC,GAAGvJ,UAAU,CAACkE,OAAf,EAAwB+E,MAAM,CAACuD,WAAW,GAAG,CAAf,CAA9B,CAHZ;AAAA,QAIIE,IAAI,GAAG,KAAKjI,MAAL,CAAY,eAAZ,CAJX;;AAKA,QAAI,MAAM8E,KAAK,CAAC7E,MAAZ,IAAsBgI,IAA1B,EAAgC;AAC5BnD,MAAAA,KAAK,GAAGoD,MAAR;AACH;;AACD,WAAOpD,KAAP;AACH,GApPuC;AAqPxCqD,EAAAA,kBAAkB,EAAE,UAASvB,OAAT,EAAkB;AAClC,SAAKwB,UAAL,CAAgBxB,OAAhB;AACH,GAvPuC;AAwPxCyB,EAAAA,kBAAkB,EAAE,UAASjI,MAAT,EAAiB;AACjC,QAAIwG,OAAO,GAAG,CAAC,GAAGrL,UAAU,CAACkE,OAAf,EAAwBW,MAAxB,CAAd;;AACA,QAAIwG,OAAO,CAAC3G,MAAZ,EAAoB;AAChB,WAAK4G,iBAAL,CAAuB,KAAvB,EAA8BD,OAA9B;;AACAA,MAAAA,OAAO,CAACjB,UAAR,CAAmB,IAAnB;AACH;AACJ,GA9PuC;AA+PxC0B,EAAAA,wBAAwB,EAAE,YAAW;AACjC,SAAKiB,OAAL,CAAa,kBAAb,EAAiC,EAAjC;AACA,SAAKA,OAAL,CAAa,kBAAb,EAAiC,KAAKC,gBAAL,EAAjC;AACH,GAlQuC;AAmQxChC,EAAAA,eAAe,EAAE,UAASK,OAAT,EAAkB;AAC/B,QAAI,CAACA,OAAD,IAAY,CAACA,OAAO,CAAC3G,MAAzB,EAAiC;AAC7B;AACH;;AACD2G,IAAAA,OAAO,CAAC4B,IAAR,CAAa,IAAb,EAAmB,KAAKD,gBAAL,EAAnB;;AACA,SAAK1B,iBAAL,CAAuB,IAAvB,EAA6BD,OAA7B;;AACA,SAAK3E,oBAAL,CAA0B,KAAKsG,gBAAL,EAA1B;;AACA,SAAKlB,wBAAL;;AACA,QAAI,KAAKrH,MAAL,CAAY,eAAZ,CAAJ,EAAkC;AAC9B,WAAKmI,kBAAL,CAAwBvB,OAAxB;AACH;AACJ,GA9QuC;AA+QxC6B,EAAAA,sBAAsB,EAAE,UAAS7E,IAAT,EAAe;AACnC,QAAImB,MAAM,GAAG,CAAC,GAAGxJ,UAAU,CAACkE,OAAf,GAAb;AAAA,QACIiJ,IAAI,GAAG,IADX;AAEA,SAAKC,YAAL,GAAoBC,IAApB,CAAyB,YAAW;AAChC,UAAI9D,KAAK,GAAG,CAAC,GAAGvJ,UAAU,CAACkE,OAAf,EAAwB,IAAxB,CAAZ;;AACA,UAAIqF,KAAK,CAACnC,IAAN,CAAW+F,IAAI,CAACG,YAAL,EAAX,MAAoCjF,IAAxC,EAA8C;AAC1CmB,QAAAA,MAAM,GAAGD,KAAT;AACA,eAAO,KAAP;AACH;AACJ,KAND;AAOA,WAAOC,MAAP;AACH,GA1RuC;AA2RxC+D,EAAAA,eAAe,EAAE,UAASlF,IAAT,EAAe;AAC5B,WAAO,KAAK5D,MAAL,CAAY,OAAZ,EAAqB+I,OAArB,CAA6BnF,IAA7B,CAAP;AACH,GA7RuC;AA8RxCoF,EAAAA,kBAAkB,EAAE,UAASpF,IAAT,EAAeqF,QAAf,EAAyBC,KAAzB,EAAgCC,QAAhC,EAA0C;AAC1D,QAAIrE,KAAK,GAAG,KAAK2D,sBAAL,CAA4B7E,IAA5B,CAAZ;;AACA,QAAI,CAACkB,KAAK,CAAC7E,MAAX,EAAmB;AACf;AACH;;AACD,QAAI,CAAC,KAAKmJ,WAAL,CAAiBC,SAAjB,CAA2BC,WAA3B,CAAuCxE,KAAvC,EAA8CyE,YAA9C,CAA2DN,QAA3D,EAAqEC,KAArE,CAAL,EAAkF;AAC9E,WAAKM,YAAL,CAAkB1E,KAAlB,EAAyBlB,IAAzB;AACH;AACJ,GAtSuC;AAuSxC4F,EAAAA,YAAY,EAAE,UAAS1E,KAAT,EAAgB;AAC1B,QAAI2E,QAAQ,GAAG,KAAKC,YAAL,CAAkB5E,KAAlB,CAAf;AAAA,QACIiC,KAAK,GAAGjC,KAAK,CAACnC,IAAN,CAAW,KAAKgH,aAAL,EAAX,CADZ;;AAEA,SAAKC,WAAL,CAAiB,KAAK5D,mBAAL,GAA2Be,KAA5C,EAAmD0C,QAAnD,EAA6D,IAA7D,EAAmE3E,KAAnE;AACH,GA3SuC;AA4SxC+E,EAAAA,cAAc,EAAE,UAASC,IAAT,EAAe;AAC3B,QAAI,YAAYA,IAAI,CAACC,IAArB,EAA2B;AACvB,UAAIC,OAAO,GAAGF,IAAI,CAACG,QAAL,CAAcC,KAAd,CAAoBnL,eAApB,CAAd;;AACA,UAAIiL,OAAO,IAAIA,OAAO,CAAC/J,MAAvB,EAA+B;AAC3B,YAAIgJ,QAAQ,GAAGe,OAAO,CAACA,OAAO,CAAC/J,MAAR,GAAiB,CAAlB,CAAtB;AAAA,YACIkK,QAAQ,GAAGL,IAAI,CAACG,QAAL,CAAcG,OAAd,CAAsB,MAAMnB,QAA5B,EAAsC,EAAtC,CADf;AAAA,YAEIrF,IAAI,GAAG,KAAK5D,MAAL,CAAYmK,QAAZ,CAFX;;AAGA,aAAKnB,kBAAL,CAAwBpF,IAAxB,EAA8BqF,QAA9B,EAAwCa,IAAI,CAACZ,KAA7C,EAAoDY,IAAI,CAACO,aAAzD;;AACA;AACH;AACJ;;AACD,YAAQP,IAAI,CAACC,IAAb;AACI,WAAK,OAAL;AACA,WAAK,iBAAL;AACA,WAAK,sBAAL;AACI,aAAK7G,mBAAL;;AACA,aAAKoH,WAAL;;AACA;;AACJ,WAAK,YAAL;AACI,aAAKnH,kBAAL;;AACA,aAAKoH,mBAAL;;AACA;;AACJ,WAAK,YAAL;AACI,aAAKA,mBAAL;;AACA;;AACJ,WAAK,cAAL;AACI,aAAKD,WAAL;;AACA;;AACJ,WAAK,gBAAL;AACI,aAAKE,uBAAL;;AACA;;AACJ,WAAK,aAAL;AACI;;AACJ,WAAK,YAAL;AACA,WAAK,iBAAL;AACI,aAAKC,gBAAL;;AACA;;AACJ,WAAK,mBAAL;AACI,aAAKC,uBAAL;;AACA;;AACJ,WAAK,sBAAL;AACI,aAAKzI,oBAAL,GAA4B,KAAK0I,qBAAL,CAA2B,sBAA3B,CAA5B;AACA;;AACJ,WAAK,eAAL;AACA,WAAK,eAAL;AACA,WAAK,qBAAL;AACI;;AACJ,WAAK,gBAAL;AACI,aAAKtC,kBAAL,CAAwByB,IAAI,CAACO,aAA7B;;AACA,aAAK9D,eAAL,CAAqB,CAAC,GAAGhL,UAAU,CAACkE,OAAf,EAAwBqK,IAAI,CAACZ,KAA7B,CAArB;;AACA;;AACJ,WAAK,aAAL;AACI,aAAKjG,qBAAL;;AACA,aAAKO,wBAAL;;AACA,aAAK8G,WAAL;;AACA;;AACJ,WAAK,aAAL;AACA,WAAK,cAAL;AACI,aAAKA,WAAL;;AACA;;AACJ;AACI,aAAKzJ,QAAL,CAAciJ,IAAd;AAlDR;AAoDH,GA3WuC;AA4WxCc,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAIxI,UAAU,GAAG,KAAKyI,WAAtB;;AACA,SAAKC,sBAAL;;AACA1I,IAAAA,UAAU,CAAC2I,SAAX,CAAqB,IAAI3I,UAAU,CAAC2I,SAAX,EAAzB;AACA,WAAO3I,UAAU,CAAC4I,IAAX,EAAP;AACH,GAjXuC;AAkXxCF,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKG,2BAAL,GAAmC,CAAnC;AACH,GApXuC;AAqXxCC,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKD,2BAAL,GAAmC,CAAC,CAApC;AACH,GAvXuC;AAwXxCE,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKF,2BAAL,GAAmC,IAAnC;AACH,GA1XuC;AA2XxCG,EAAAA,yBAAyB,EAAE,UAASC,QAAT,EAAmB;AAC1C,QAAI3J,KAAK,GAAG,KAAK1B,MAAL,CAAY,OAAZ,CAAZ;;AACA,QAAI,KAAKsL,YAAL,IAAqB5J,KAArB,IAA8B,KAAK6J,kBAAL,EAAlC,EAA6D;AACzD,WAAKvF,mBAAL,GAA2BtE,KAAK,CAACzB,MAAjC;;AACA,UAAI,CAAC,KAAKuL,WAAL,EAAD,IAAuB,KAAKP,2BAAL,KAAqC,CAAC,CAAjE,EAAoE;AAChE,aAAKjL,MAAL,GAAc0B,KAAd,GAAsBA,KAAK,CAAC+J,MAAN,CAAaJ,QAAQ,CAACzG,KAAT,CAAe,KAAKqG,2BAApB,CAAb,CAAtB;AACH;;AACD,WAAKE,sBAAL;;AACA,WAAKO,eAAL;;AACA,WAAKtE,kBAAL;AACH,KARD,MAQO;AACH,WAAKpH,MAAL,CAAY,OAAZ,EAAqBqL,QAAQ,CAACzG,KAAT,EAArB;AACH;AACJ,GAxYuC;AAyYxC8G,EAAAA,eAAe,EAAE,YAAW;AACxB,SAAKC,eAAL;;AACA,SAAKC,cAAL;AACH,GA5YuC;AA6YxCC,EAAAA,2BAA2B,EAAE,YAAW;AACpC,SAAKV,sBAAL;;AACA,SAAKnL,MAAL,CAAY,OAAZ,EAAqB,KAAKA,MAAL,CAAY,OAAZ,CAArB;AACH,GAhZuC;AAiZxCuL,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,QAAQ,KAAKN,2BAAb,IAA4C,KAAKa,wBAAL,EAAnD;AACH,GAnZuC;AAoZxCA,EAAAA,wBAAwB,EAAE,YAAW;AACjC,WAAO,KAAP;AACH,GAtZuC;AAuZxCC,EAAAA,MAAM,EAAE,YAAW;AACf,SAAKC,gBAAL;;AACA,SAAKC,mBAAL;AACH,GA1ZuC;AA2ZxCA,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,KAAC,GAAG1Q,UAAU,CAACkE,OAAf,EAAwB,KAAKyM,cAAL,EAAxB,EAA+CC,KAA/C;AACH,GA7ZuC;AA8ZxCC,EAAAA,QAAQ,EAAE,YAAW;AACjB,SAAKvL,QAAL;AACAwL,IAAAA,YAAY,CAAC,KAAKC,iBAAN,CAAZ;AACH,GAjauC;AAkaxCC,EAAAA,QAAQ,EAAE,YAAW;AACjB,SAAKrJ,mBAAL;;AACA,SAAKrC,QAAL,CAAcsF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACH,GArauC;AAsaxC8F,EAAAA,cAAc,EAAE,YAAW;AACvB,WAAO,KAAKzH,QAAL,EAAP;AACH,GAxauC;AAyaxC+H,EAAAA,UAAU,EAAE,YAAW;AACnB,WAAOpO,UAAP;AACH,GA3auC;AA4axCqO,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,WAAO,KAAKD,UAAL,KAAoBnO,qBAA3B;AACH,GA9auC;AA+axCqO,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO/N,mBAAP;AACH,GAjbuC;AAkbxCgO,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,WAAO/N,wBAAP;AACH,GApbuC;AAqbxCgO,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAO,MAAM,KAAKJ,UAAL,EAAb;AACH,GAvbuC;AAwbxC3D,EAAAA,YAAY,EAAE,YAAW;AACrB,WAAOtK,aAAP;AACH,GA1buC;AA2bxCoL,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAOnL,cAAP;AACH,GA7buC;AA8bxCqJ,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAO,KAAKqE,cAAL,GAAsBW,IAAtB,CAA2B,KAAKD,aAAL,EAA3B,CAAP;AACH,GAhcuC;AAicxCE,EAAAA,WAAW,EAAE,YAAW;AACpB,SAAKjM,QAAL;AACA,SAAKoB,oBAAL,GAA4B,KAAK0I,qBAAL,CAA2B,sBAA3B,CAA5B;AACA,SAAKlG,QAAL,GAAgBmB,QAAhB,CAAyBzH,gBAAzB;;AACA,SAAKwN,eAAL;AACH,GAtcuC;AAucxCA,EAAAA,eAAe,EAAE/P,QAAQ,CAAC6D,OAAT,CAAiBsN,aAAjB,CAA+B,YAAW;AACvD,SAAKC,kBAAL;AACH,GAFgB,CAvcuB;AA0cxCpB,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKqB,uBAAL;AACH,GA5cuC;AA6cxCC,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKrM,QAAL;;AACA,SAAKsM,iBAAL;;AACA,SAAK1C,gBAAL;;AACA,SAAKC,uBAAL;AACH,GAlduC;AAmdxCyC,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,QAAIC,YAAY,GAAG,KAAKR,aAAL,EAAnB;AAAA,QACIS,mBAAmB,GAAGxQ,OAAO,CAAC4C,OAAR,CAAgB6N,YAAhB,CAA6B1P,OAAO,CAAC6B,OAAR,CAAgBsK,IAA7C,EAAmD,KAAKwD,IAAxD,CAD1B;AAAA,QAEIC,yBAAyB,GAAG3Q,OAAO,CAAC4C,OAAR,CAAgB6N,YAAhB,CAA6BvQ,SAAS,CAAC0C,OAAV,CAAkBgO,IAA/C,EAAqD,KAAKF,IAA1D,CAFhC;AAAA,QAGI7E,IAAI,GAAG,IAHX;;AAIA,QAAIgF,iBAAiB,GAAG,IAAInR,QAAQ,CAACkD,OAAb,CAAqB,UAASqK,IAAT,EAAe;AACxD,UAAI6D,KAAK,GAAG7D,IAAI,CAAC6D,KAAjB;;AACAjF,MAAAA,IAAI,CAACkF,uBAAL,CAA6BD,KAA7B;AACH,KAHuB,CAAxB;;AAIAjS,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBoO,GAAxB,CAA4B,KAAK3B,cAAL,EAA5B,EAAmDmB,mBAAnD,EAAwED,YAAxE;;AACA1R,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBoO,GAAxB,CAA4B,KAAK3B,cAAL,EAA5B,EAAmDsB,yBAAnD,EAA8EJ,YAA9E;;AACA1R,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBqO,EAAxB,CAA2B,KAAK5B,cAAL,EAA3B,EAAkDmB,mBAAlD,EAAuED,YAAvE,EAAqF,UAAStN,CAAT,EAAY;AAC7F,WAAKI,iBAAL,CAAuBJ,CAAvB;AACH,KAFoF,CAEnFiB,IAFmF,CAE9E,IAF8E,CAArF;;AAGArF,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBqO,EAAxB,CAA2B,KAAK5B,cAAL,EAA3B,EAAkDsB,yBAAlD,EAA6EJ,YAA7E,EAA2F,UAAStN,CAAT,EAAY;AACnG4N,MAAAA,iBAAiB,CAACK,OAAlB,CAA0B;AACtBC,QAAAA,OAAO,EAAE,CAAC,GAAGzS,UAAU,CAACkE,OAAf,EAAwBK,CAAC,CAACM,MAA1B,CADa;AAEtBuN,QAAAA,KAAK,EAAE7N;AAFe,OAA1B;AAIH,KALD;AAMH,GAveuC;AAwexCI,EAAAA,iBAAiB,EAAE,UAASJ,CAAT,EAAYgK,IAAZ,EAAkBmE,MAAlB,EAA0B;AACzC,SAAKC,mBAAL,CAAyBpO,CAAzB,EAA4B,aAA5B,EAA2CgK,IAA3C,EAAiDmE,MAAjD;AACH,GA1euC;AA2exCL,EAAAA,uBAAuB,EAAE,UAAS9N,CAAT,EAAY;AACjC,QAAI,CAAC,KAAKE,MAAL,CAAY,mBAAZ,CAAL,EAAuC;AACnC;AACH;;AACD,SAAKmO,iBAAL,GAAyB,YAAW;AAChC9B,MAAAA,YAAY,CAAC,KAAKC,iBAAN,CAAZ;AACA,WAAK6B,iBAAL,GAAyB,IAAzB;;AACA,UAAIrO,CAAC,CAACsO,kBAAF,EAAJ,EAA4B;AACxB;AACH;;AACD,UAAIxH,OAAO,GAAG,CAAC,GAAGrL,UAAU,CAACkE,OAAf,EAAwBK,CAAC,CAACM,MAA1B,CAAd;AAAA,UACIiO,YAAY,GAAGzH,OAAO,CAAC0H,OAAR,CAAgB,KAAKzG,aAAL,EAAhB,CADnB;AAAA,UAEI0G,iBAAiB,GAAG,KAAKC,iBAAL,CAAuB5H,OAAvB,CAFxB;;AAGA,UAAIyH,YAAY,CAACpO,MAAb,IAAuBsO,iBAAvB,IAA4C,CAAC,GAAGpS,MAAM,CAACkK,OAAX,EAAoBkI,iBAAiB,CAACE,GAAlB,CAAsB,CAAtB,CAApB,EAA8C,KAAKxI,YAAL,EAA9C,MAAuE,CAAC,CAAxH,EAA2H;AACvH,aAAKjG,MAAL,CAAY,gBAAZ,EAA8B,CAAC,GAAGnE,IAAI,CAAC6K,gBAAT,EAA2B2H,YAA3B,CAA9B;AACH;AACJ,KAZwB,CAYvBtN,IAZuB,CAYlB,IAZkB,CAAzB;;AAaA,SAAKuL,iBAAL,GAAyBoC,UAAU,CAAC,KAAKC,sBAAL,CAA4B5N,IAA5B,CAAiC,IAAjC,CAAD,CAAnC;AACH,GA7fuC;AA8fxCyN,EAAAA,iBAAiB,EAAE,UAAS5H,OAAT,EAAkB;AACjC,QAAIA,OAAO,CAACgI,EAAR,CAAWvR,WAAW,CAACoC,OAAZ,CAAoBoP,SAA/B,CAAJ,EAA+C;AAC3C,aAAOjI,OAAP;AACH,KAFD,MAEO;AACHA,MAAAA,OAAO,GAAGA,OAAO,CAACkI,MAAR,EAAV;;AACA,aAAOlI,OAAO,CAAC3G,MAAR,IAAkB,CAAClE,aAAa,CAAC0D,OAAd,CAAsBsP,UAAtB,CAAiCnI,OAAO,CAAC6H,GAAR,CAAY,CAAZ,CAAjC,CAA1B,EAA4E;AACxE,YAAI7H,OAAO,CAACgI,EAAR,CAAWvR,WAAW,CAACoC,OAAZ,CAAoBoP,SAA/B,CAAJ,EAA+C;AAC3C,iBAAOjI,OAAP;AACH;;AACDA,QAAAA,OAAO,GAAGA,OAAO,CAACkI,MAAR,EAAV;AACH;AACJ;AACJ,GA1gBuC;AA2gBxCH,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKR,iBAAL,IAA0B,KAAKA,iBAAL,EAA1B;AACH,GA7gBuC;AA8gBxCa,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,SAAKnO,QAAL,CAAcsF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,SAAKuI,sBAAL;AACH,GAjhBuC;AAkhBxClE,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAIwE,cAAc,GAAG,KAAK/C,cAAL,EAArB;AAAA,QACIkB,YAAY,GAAG,KAAKR,aAAL,EADnB;AAAA,QAEIsC,SAAS,GAAGrS,OAAO,CAAC4C,OAAR,CAAgB6N,YAAhB,CAA6B7P,MAAM,CAACgC,OAAP,CAAesK,IAA5C,EAAkD,KAAKwD,IAAvD,CAFhB;;AAGA7R,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBoO,GAAxB,CAA4BoB,cAA5B,EAA4CC,SAA5C,EAAuD9B,YAAvD;;AACA1R,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBqO,EAAxB,CAA2BmB,cAA3B,EAA2CC,SAA3C,EAAsD9B,YAAtD,EAAoE;AAChE+B,MAAAA,OAAO,EAAE,KAAKC,eAAL;AADuD,KAApE,EAEG,KAAKC,gBAAL,CAAsBtO,IAAtB,CAA2B,IAA3B,CAFH;AAGH,GA1hBuC;AA2hBxCqO,EAAAA,eAAe,EAAE,YAAW;AACxB,WAAO,KAAKpP,MAAL,CAAY,iBAAZ,CAAP;AACH,GA7hBuC;AA8hBxCsP,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,WAAO,KAAKC,qBAAL,CAA2B,YAA3B,CAAP;AACH,GAhiBuC;AAiiBxCF,EAAAA,gBAAgB,EAAE,UAASvP,CAAT,EAAY;AAC1B,QAAI,KAAKwP,oBAAL,EAAJ,EAAiC;AAC7B,WAAKpB,mBAAL,CAAyBpO,CAAzB,EAA4B,YAA5B;AACH,KAFD,MAEO;AACHA,MAAAA,CAAC,CAAC0P,MAAF,GAAW,IAAX;AACH;AACJ,GAviBuC;AAwiBxC9E,EAAAA,uBAAuB,EAAE,YAAW;AAChC,QAAIuE,cAAc,GAAG,KAAK/C,cAAL,EAArB;AAAA,QACIkB,YAAY,GAAG,KAAKR,aAAL,EADnB;AAAA,QAEIsC,SAAS,GAAGrS,OAAO,CAAC4C,OAAR,CAAgB6N,YAAhB,CAA6BxP,aAAa,CAAC2B,OAAd,CAAsBsK,IAAnD,EAAyD,KAAKwD,IAA9D,CAFhB;;AAGA7R,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBoO,GAAxB,CAA4BoB,cAA5B,EAA4CC,SAA5C,EAAuD9B,YAAvD;;AACA1R,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBqO,EAAxB,CAA2BmB,cAA3B,EAA2CC,SAA3C,EAAsD9B,YAAtD,EAAoE,KAAKqC,uBAAL,CAA6B1O,IAA7B,CAAkC,IAAlC,CAApE;AACH,GA9iBuC;AA+iBxC2O,EAAAA,2BAA2B,EAAE,YAAW;AACpC,WAAO,KAAKH,qBAAL,CAA2B,mBAA3B,CAAP;AACH,GAjjBuC;AAkjBxCE,EAAAA,uBAAuB,EAAE,UAAS3P,CAAT,EAAY;AACjC,QAAI,KAAK4P,2BAAL,EAAJ,EAAwC;AACpC,WAAKxB,mBAAL,CAAyBpO,CAAzB,EAA4B,mBAA5B;AACH,KAFD,MAEO;AACHA,MAAAA,CAAC,CAAC0P,MAAF,GAAW,IAAX;AACH;AACJ,GAxjBuC;AAyjBxCxC,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,QAAItL,KAAK,GAAG,KAAK1B,MAAL,CAAY,OAAZ,KAAwB,EAApC;;AACA,QAAI,KAAKgG,mBAAT,EAA8B;AAC1B,WAAK2J,YAAL,CAAkBjO,KAAK,CAACkD,KAAN,CAAY,KAAKoB,mBAAjB,CAAlB;AACH,KAFD,MAEO;AACH,WAAK2J,YAAL,CAAkBjO,KAAlB;AACH;AACJ,GAhkBuC;AAikBxCiO,EAAAA,YAAY,EAAE,UAASjO,KAAT,EAAgB;AAC1B,QAAIA,KAAK,CAACzB,MAAV,EAAkB;AACd5D,MAAAA,UAAU,CAACoD,OAAX,CAAmBmJ,IAAnB,CAAwBlH,KAAxB,EAA+B,UAASqF,KAAT,EAAgB0C,QAAhB,EAA0B;AACrD,aAAKG,WAAL,CAAiB,KAAK5D,mBAAL,GAA2Be,KAA5C,EAAmD0C,QAAnD;AACH,OAF8B,CAE7B1I,IAF6B,CAExB,IAFwB,CAA/B;AAGH;;AACD,SAAKwJ,mBAAL;AACH,GAxkBuC;AAykBxCX,EAAAA,WAAW,EAAE,UAAS7C,KAAT,EAAgB0C,QAAhB,EAA0B5F,UAA1B,EAAsC+L,cAAtC,EAAsD;AAC/D/L,IAAAA,UAAU,GAAGA,UAAU,IAAI,KAAKqI,cAAL,EAA3B;;AACA,QAAI2D,UAAU,GAAG,KAAKC,gBAAL,CAAsB/I,KAAtB,EAA6B0C,QAA7B,EAAuC5F,UAAvC,EAAmD+L,cAAnD,CAAjB;;AACA,SAAKG,eAAL,CAAqBF,UAArB,EAAiCpG,QAAjC,EAA2C1C,KAA3C;;AACA8I,IAAAA,UAAU,CAACrH,IAAX,CAAgB,KAAKxI,MAAL,CAAY,iBAAZ,CAAhB;;AACA,SAAKgQ,qBAAL,CAA2BvG,QAA3B,EAAqCoG,UAArC;;AACA,QAAII,YAAY,GAAG,KAAKC,eAAL,CAAqBL,UAArB,CAAnB;;AACA,QAAIM,oBAAoB,GAAG,KAAKC,kBAAL,CAAwB;AAC/CrJ,MAAAA,KAAK,EAAEA,KADwC;AAE/C0C,MAAAA,QAAQ,EAAEA,QAFqC;AAG/C4G,MAAAA,SAAS,EAAE,CAAC,GAAGxU,IAAI,CAAC6K,gBAAT,EAA2BuJ,YAA3B,CAHoC;AAI/CK,MAAAA,YAAY,EAAE,KAAK7D,iBAAL,EAJiC;AAK/C8D,MAAAA,mBAAmB,EAAE,KAAKvQ,MAAL,CAAY,cAAZ;AAL0B,KAAxB,CAA3B;;AAOA,QAAI0I,IAAI,GAAG,IAAX;AACA,KAAC,GAAGzM,SAAS,CAACuU,IAAd,EAAoBL,oBAApB,EAA0CM,IAA1C,CAA+C,UAASR,YAAT,EAAuB;AAClEvH,MAAAA,IAAI,CAACgI,sBAAL,CAA4B;AACxBC,QAAAA,WAAW,EAAEd,UADW;AAExBe,QAAAA,WAAW,EAAEX,YAFW;AAGxBxG,QAAAA,QAAQ,EAAEA,QAHc;AAIxBoH,QAAAA,SAAS,EAAE9J;AAJa,OAA5B;;AAMA2B,MAAAA,IAAI,CAACoI,wBAAL,CAA8B/J,KAA9B,EAAqC0C,QAArC,EAA+C,CAAC,GAAG5N,IAAI,CAAC6K,gBAAT,EAA2BmJ,UAA3B,CAA/C;AACH,KARD;AASA,WAAOA,UAAP;AACH,GAlmBuC;AAmmBxCK,EAAAA,eAAe,EAAE,UAASL,UAAT,EAAqB;AAClC,QAAII,YAAY,GAAGJ,UAAU,CAAChD,IAAX,CAAgB,MAAMvO,8BAAtB,CAAnB;AACA2R,IAAAA,YAAY,CAACc,WAAb,CAAyBzS,8BAAzB;AACA,WAAO2R,YAAP;AACH,GAvmBuC;AAwmBxCD,EAAAA,qBAAqB,EAAE,UAASvG,QAAT,EAAmB1J,YAAnB,EAAiC;AACpD,QAAI,CAAC0J,QAAD,IAAa,CAACA,QAAQ,CAACuH,OAA3B,EAAoC;AAChC;AACH;;AACDtV,IAAAA,eAAe,CAAC+D,OAAhB,CAAwBqO,EAAxB,CAA2B/N,YAA3B,EAAyCnC,OAAO,CAAC6B,OAAR,CAAgBsK,IAAzD,EAA+D,UAASjK,CAAT,EAAY;AACvE,WAAKmR,0BAAL,CAAgClR,YAAhC,EAA8C0J,QAAQ,CAACuH,OAAvD,EAAgE;AAC5DrD,QAAAA,KAAK,EAAE7N;AADqD,OAAhE;AAGH,KAJ8D,CAI7DiB,IAJ6D,CAIxD,IAJwD,CAA/D;AAKH,GAjnBuC;AAknBxCqP,EAAAA,kBAAkB,EAAE,UAAStG,IAAT,EAAe;AAC/B,QAAIoH,gBAAgB,GAAG,KAAKC,oBAAL,CAA0BrH,IAA1B,CAAvB;;AACA,QAAInI,YAAY,GAAG,KAAKyP,YAAL,CAAkBF,gBAAlB,CAAnB;;AACA,SAAKG,sBAAL,CAA4BvH,IAA5B;;AACA,QAAIwH,eAAe,GAAG,CAAC,GAAG/V,UAAU,CAACkE,OAAf,EAAwB,KAAK8R,qBAAL,CAA2B5P,YAA3B,EAAyCmI,IAAzC,CAAxB,CAAtB;;AACA,QAAI,CAACwH,eAAe,CAACE,QAAhB,CAAyB1S,sBAAzB,CAAL,EAAuD;AACnD,aAAOgL,IAAI,CAACuG,SAAZ;AACH;;AACD,WAAO,KAAKoB,wBAAL,CAA8B3H,IAA9B,EAAoCwH,eAApC,CAAP;AACH,GA3nBuC;AA4nBxCG,EAAAA,wBAAwB,EAAE,UAAS3H,IAAT,EAAe4H,KAAf,EAAsB;AAC5C,KAAC,GAAGnW,UAAU,CAACkE,OAAf,EAAwBqK,IAAI,CAACuG,SAA7B,EAAwCsB,WAAxC,CAAoDD,KAApD;AACA5H,IAAAA,IAAI,CAACuG,SAAL,GAAiB,CAAC,GAAGxU,IAAI,CAAC6K,gBAAT,EAA2BgL,KAA3B,CAAjB;;AACA,SAAKL,sBAAL,CAA4BvH,IAA5B;;AACA,WAAO4H,KAAP;AACH,GAjoBuC;AAkoBxCL,EAAAA,sBAAsB,EAAE,UAASvH,IAAT,EAAe;AACnC,QAAI8H,OAAO,GAAG,CAACxT,UAAU,GAAGC,qBAAd,EAAqCyL,IAAI,CAACwG,YAA1C,CAAd;AACA,KAAC,GAAG/U,UAAU,CAACkE,OAAf,EAAwBqK,IAAI,CAACuG,SAA7B,EAAwCzK,QAAxC,CAAiDgM,OAAO,CAACC,IAAR,CAAa,GAAb,CAAjD;AACH,GAroBuC;AAsoBxCC,EAAAA,sBAAsB,EAAE,UAASjO,UAAT,EAAqBgM,UAArB,EAAiC9I,KAAjC,EAAwC;AAC5D8I,IAAAA,UAAU,CAACkC,QAAX,CAAoBlO,UAApB;AACH,GAxoBuC;AAyoBxCiM,EAAAA,gBAAgB,EAAE,UAAS/I,KAAT,EAAgB0C,QAAhB,EAA0B5F,UAA1B,EAAsC+L,cAAtC,EAAsD;AACpE,QAAIC,UAAU,GAAG,CAAC,GAAGtU,UAAU,CAACkE,OAAf,EAAwB,OAAxB,CAAjB;AACA,QAAI,KAAK2J,WAAL,CAAiBC,SAArB,CAA+BwG,UAA/B,EAA2C,KAAKmC,YAAL,EAA3C,EAAgEvI,QAAQ,IAAI,EAA5E;;AACA,QAAImG,cAAc,IAAIA,cAAc,CAAC3P,MAArC,EAA6C;AACzC2P,MAAAA,cAAc,CAAC+B,WAAf,CAA2B9B,UAA3B;AACH,KAFD,MAEO;AACH,WAAKiC,sBAAL,CAA4BtR,IAA5B,CAAiC,IAAjC,EAAuCqD,UAAvC,EAAmDgM,UAAnD,EAA+D9I,KAA/D;AACH;;AACD,WAAO8I,UAAP;AACH,GAlpBuC;AAmpBxCmC,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAItJ,IAAI,GAAG,IAAX;AACA,WAAO;AACHuJ,MAAAA,WAAW,EAAE,YAAW;AACpB,eAAOvJ,IAAI,CAAC1I,MAAL,CAAY,gCAAZ,CAAP;AACH,OAHE;AAIHkS,MAAAA,WAAW,EAAE,UAASC,KAAT,EAAgB;AACzB,YAAIC,IAAI,GAAG1J,IAAI,CAAC1I,MAAL,CAAYmS,KAAK,GAAG,MAApB,CAAX;AAAA,YACIE,MAAM,GAAG,CAAC,GAAG3U,KAAK,CAAC2F,aAAV,EAAyB+O,IAAzB,CADb;AAEA,eAAOC,MAAP;AACH;AARE,KAAP;AAUH,GA/pBuC;AAgqBxC3B,EAAAA,sBAAsB,EAAE9U,QAAQ,CAAC6D,OAAT,CAAiB6S,IAhqBD;AAiqBxCxB,EAAAA,wBAAwB,EAAE,UAAS/J,KAAT,EAAgB0C,QAAhB,EAA0BkH,WAA1B,EAAuC;AAC7D,SAAK4B,oBAAL,GAA4B;AACxB5B,MAAAA,WAAW,EAAEA,WADW;AAExBE,MAAAA,SAAS,EAAE9J,KAFa;AAGxB0C,MAAAA,QAAQ,EAAEA;AAHc,KAA5B;AAKH,GAvqBuC;AAwqBxCsG,EAAAA,eAAe,EAAE,UAAS/B,OAAT,EAAkBrL,IAAlB,EAAwBoE,KAAxB,EAA+B;AAC5CiH,IAAAA,OAAO,CAACpI,QAAR,CAAiB,CAACxH,UAAD,EAAa,KAAKoO,UAAL,EAAb,EAAgCqF,IAAhC,CAAqC,GAArC,CAAjB,EAA4DlP,IAA5D,CAAiE,KAAKkG,YAAL,EAAjE,EAAsFlG,IAAtF,EAA4FA,IAA5F,CAAiG,KAAKgH,aAAL,EAAjG,EAAuH5C,KAAvH;AACH,GA1qBuC;AA2qBxCyD,EAAAA,uBAAuB,EAAE,YAAW;AAChC,WAAO,KAAKgI,iBAAL,GAAyB,KAAK7H,qBAAL,CAA2B,gBAA3B,EAA6C;AACzEqD,MAAAA,OAAO,EAAE,KAAKA,OAAL,EADgE;AAEzEyE,MAAAA,iBAAiB,EAAE,CAAC,YAAD,EAAe,UAAf,EAA2B,UAA3B,CAFsD;AAGzEC,MAAAA,QAAQ,EAAE;AAH+D,KAA7C,CAAhC;AAKH,GAjrBuC;AAkrBxCH,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,WAAO,KAAKC,iBAAL,IAA0B,KAAKhI,uBAAL,EAAjC;AACH,GAprBuC;AAqrBxC2G,EAAAA,oBAAoB,EAAE,UAASrH,IAAT,EAAe;AACjC,QAAInH,IAAI,GAAGmH,IAAI,CAACL,QAAhB;AAAA,QACIkJ,gBAAgB,GAAG7I,IAAI,CAAC6I,gBAAL,IAAyB,KAAK3S,MAAL,CAAY,sBAAZ,CADhD;AAAA,QAEIoF,QAAQ,GAAGzC,IAAI,IAAIA,IAAI,CAACgQ,gBAAD,CAF3B;AAGA,WAAOvN,QAAQ,IAAI0E,IAAI,CAACyG,mBAAxB;AACH,GA1rBuC;AA2rBxCgB,EAAAA,qBAAqB,EAAE,UAAS5P,YAAT,EAAuBiR,UAAvB,EAAmC;AACtD,WAAOjR,YAAY,CAACkR,MAAb,CAAoB;AACvBC,MAAAA,KAAK,EAAEF,UAAU,CAACnJ,QADK;AAEvB4G,MAAAA,SAAS,EAAEuC,UAAU,CAACvC,SAFC;AAGvBtJ,MAAAA,KAAK,EAAE6L,UAAU,CAAC7L;AAHK,KAApB,CAAP;AAKH,GAjsBuC;AAksBxCgM,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,WAAO,KAAK7G,cAAL,EAAP;AACH,GApsBuC;AAqsBxC3B,EAAAA,mBAAmB,EAAE,UAAS7I,KAAT,EAAgB;AACjCA,IAAAA,KAAK,GAAGA,KAAK,IAAI,KAAK1B,MAAL,CAAY,OAAZ,CAAjB;;AACA,QAAIkC,UAAU,GAAG,KAAKlC,MAAL,CAAY,YAAZ,CAAjB;AAAA,QACIgT,UAAU,GAAG,CAAC9Q,UAAD,IAAeR,KAAK,IAAIA,KAAK,CAACzB,MAA9B,IAAwC,KAAKgT,oBAAL,EADzD;;AAEA,QAAID,UAAU,IAAI,KAAKE,QAAvB,EAAiC;AAC7B,WAAKA,QAAL,CAAc5N,MAAd;;AACA,WAAK4N,QAAL,GAAgB,IAAhB;AACA,WAAK5K,OAAL,CAAa,OAAb,EAAsB,KAAK,CAA3B;AACH;;AACD,QAAI,CAAC0K,UAAL,EAAiB;AACb,WAAKE,QAAL,GAAgB,KAAKA,QAAL,IAAiB,CAAC,GAAG3X,UAAU,CAACkE,OAAf,EAAwB,OAAxB,EAAiCmG,QAAjC,CAA0C,kBAA1C,CAAjC;;AACA,WAAKsN,QAAL,CAAcnB,QAAd,CAAuB,KAAKgB,sBAAL,EAAvB,EAAsDzO,IAAtD,CAA2DpC,UAA3D;;AACA,WAAKoG,OAAL,CAAa,OAAb,EAAsBpG,UAAtB;AACH;;AACD,SAAKuC,QAAL,GAAgB0O,WAAhB,CAA4BtU,gBAA5B,EAA8C,CAACmU,UAA/C;AACH,GAptBuC;AAqtBxC9E,EAAAA,mBAAmB,EAAE,UAASkF,OAAT,EAAkBC,iBAAlB,EAAqCC,UAArC,EAAiDC,YAAjD,EAA+D;AAChF,SAAKC,iBAAL,CAAuBJ,OAAO,CAAChT,MAA/B,EAAuCiT,iBAAvC,EAA0D,CAAC,GAAGnX,OAAO,CAACiE,MAAZ,EAAoBmT,UAApB,EAAgC;AACtF3F,MAAAA,KAAK,EAAEyF;AAD+E,KAAhC,CAA1D,EAEIG,YAFJ;AAGH,GAztBuC;AA0tBxCC,EAAAA,iBAAiB,EAAE,UAASC,SAAT,EAAoBJ,iBAApB,EAAuCC,UAAvC,EAAmDC,YAAnD,EAAiE;AAChF,QAAIG,MAAM,GAAG,KAAK/I,qBAAL,CAA2B0I,iBAA3B,EAA8C,CAAC,GAAGnX,OAAO,CAACiE,MAAZ,EAAoB;AAC3EwT,MAAAA,oBAAoB,EAAE;AADqD,KAApB,EAExDJ,YAFwD,CAA9C,CAAb;;AAGA,WAAO,KAAKK,qBAAL,CAA2BH,SAA3B,EAAsCC,MAAtC,EAA8CJ,UAA9C,CAAP;AACH,GA/tBuC;AAguBxCrC,EAAAA,0BAA0B,EAAE,UAASwC,SAAT,EAAoBI,OAApB,EAA6BP,UAA7B,EAAyCC,YAAzC,EAAuD;AAC/E,QAAIG,MAAM,GAAG,KAAKI,aAAL,CAAmBD,OAAnB,EAA4B,CAAC,GAAG3X,OAAO,CAACiE,MAAZ,EAAoB;AACzDwT,MAAAA,oBAAoB,EAAE;AADmC,KAApB,EAEtCJ,YAFsC,CAA5B,CAAb;;AAGA,WAAO,KAAKK,qBAAL,CAA2BH,SAA3B,EAAsCC,MAAtC,EAA8CJ,UAA9C,CAAP;AACH,GAruBuC;AAsuBxCM,EAAAA,qBAAqB,EAAE,UAASH,SAAT,EAAoBC,MAApB,EAA4BJ,UAA5B,EAAwC;AAC3D,QAAIvT,YAAY,GAAG,KAAKgU,mBAAL,CAAyB,CAAC,GAAGxY,UAAU,CAACkE,OAAf,EAAwBgU,SAAxB,CAAzB,CAAnB;AAAA,QACI3J,IAAI,GAAG,CAAC,GAAG5N,OAAO,CAACiE,MAAZ,EAAoB,EAApB,EAAwBmT,UAAxB,CADX;;AAEA,WAAOI,MAAM,CAAC,CAAC,GAAGxX,OAAO,CAACiE,MAAZ,EAAoBmT,UAApB,EAAgC,KAAKU,iBAAL,CAAuBjU,YAAvB,CAAhC,EAAsE+J,IAAtE,CAAD,CAAb;AACH,GA1uBuC;AA2uBxCkK,EAAAA,iBAAiB,EAAE,UAASjU,YAAT,EAAuB;AACtC,WAAO;AACH4Q,MAAAA,WAAW,EAAE,CAAC,GAAG9U,IAAI,CAAC6K,gBAAT,EAA2B3G,YAA3B,CADV;AAEH8Q,MAAAA,SAAS,EAAE,KAAKhJ,aAAL,GAAqBd,KAArB,CAA2BhH,YAA3B,CAFR;AAGH0J,MAAAA,QAAQ,EAAE,KAAKC,YAAL,CAAkB3J,YAAlB;AAHP,KAAP;AAKH,GAjvBuC;AAkvBxCgU,EAAAA,mBAAmB,EAAE,UAAStP,QAAT,EAAmB;AACpC,WAAO,CAAC,GAAGlJ,UAAU,CAACkE,OAAf,EAAwBgF,QAAxB,EAAkC6J,OAAlC,CAA0C,KAAK1B,aAAL,EAA1C,CAAP;AACH,GApvBuC;AAqvBxClD,EAAAA,YAAY,EAAE,UAASiH,WAAT,EAAsB;AAChC,WAAO,CAAC,GAAGpV,UAAU,CAACkE,OAAf,EAAwBkR,WAAxB,EAAqChO,IAArC,CAA0C,KAAKkG,YAAL,EAA1C,CAAP;AACH,GAvvBuC;AAwvBxCoL,EAAAA,qBAAqB,EAAE,UAASvS,KAAT,EAAgBwS,aAAhB,EAA+B;AAClD,QAAInP,MAAM,GAAG,CAAb;;AACA,QAAIrD,KAAJ,EAAW;AACPrF,MAAAA,UAAU,CAACoD,OAAX,CAAmBmJ,IAAnB,CAAwBlH,KAAxB,EAA+B,UAASyS,CAAT,EAAYvQ,IAAZ,EAAkB;AAC7CmB,QAAAA,MAAM,IAAI,CAAC,GAAGxJ,UAAU,CAACkE,OAAf,EAAwBmE,IAAxB,EAA8BwQ,UAA9B,CAAyCF,aAAa,IAAI,KAA1D,CAAV;AACH,OAFD;AAGH;;AACD,WAAOnP,MAAP;AACH,GAhwBuC;AAiwBxCwD,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAI,CAAC,KAAK8L,cAAV,EAA0B;AACtB,WAAKA,cAAL,GAAsB,QAAQ,IAAI5X,MAAM,CAACgD,OAAX,EAA9B;AACH;;AACD,WAAO,KAAK4U,cAAZ;AACH,GAtwBuC;AAuwBxC1L,EAAAA,YAAY,EAAE,YAAW;AACrB,WAAO,KAAKd,aAAL,EAAP;AACH,GAzwBuC;AA0wBxCyM,EAAAA,cAAc,EAAE,YAAW;AACvB,WAAO,KAAKpI,cAAL,EAAP;AACH;AA5wBuC,CAArB,EA6wBpBqI,OA7wBoB,CA6wBZtX,aAAa,CAACwC,OA7wBF,CAAvB;;AA8wBAD,gBAAgB,CAAC6J,SAAjB,GAA6BlM,MAAM,CAACsC,OAApC;AACA+U,MAAM,CAACC,OAAP,GAAiBjV,gBAAjB","sourcesContent":["/**\r\n * DevExtreme (ui/collection/ui.collection_widget.base.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _common2 = _interopRequireDefault(_common);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _iterator2 = _interopRequireDefault(_iterator);\r\nvar _action = require(\"../../core/action\");\r\nvar _action2 = _interopRequireDefault(_action);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _data_helper = require(\"../../data_helper\");\r\nvar _data_helper2 = _interopRequireDefault(_data_helper);\r\nvar _item = require(\"./item\");\r\nvar _item2 = _interopRequireDefault(_item);\r\nvar _selectors = require(\"../widget/selectors\");\r\nvar _selectors2 = _interopRequireDefault(_selectors);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _hold = require(\"../../events/hold\");\r\nvar _hold2 = _interopRequireDefault(_hold);\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _contextmenu = require(\"../../events/contextmenu\");\r\nvar _contextmenu2 = _interopRequireDefault(_contextmenu);\r\nvar _bindable_template = require(\"../widget/bindable_template\");\r\nvar _bindable_template2 = _interopRequireDefault(_bindable_template);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COLLECTION_CLASS = \"dx-collection\";\r\nvar ITEM_CLASS = \"dx-item\";\r\nvar CONTENT_CLASS_POSTFIX = \"-content\";\r\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nvar ITEM_DATA_KEY = \"dxItemData\";\r\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\r\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nvar ITEMS_SELECTOR = \"[data-options*='dxItem']\";\r\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\r\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_PAGE_UP = \"pageup\";\r\nvar FOCUS_PAGE_DOWN = \"pagedown\";\r\nvar FOCUS_LAST = \"last\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar CollectionWidget = _ui2.default.inherit({\r\n    _activeStateUnit: \".\" + ITEM_CLASS,\r\n    _supportedKeys: function() {\r\n        var enter = function(e) {\r\n                var $itemElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n                if (!$itemElement.length) {\r\n                    return\r\n                }\r\n                this._itemClickHandler((0, _extend.extend)({}, e, {\r\n                    target: $itemElement,\r\n                    currentTarget: $itemElement\r\n                }))\r\n            },\r\n            space = function(e) {\r\n                e.preventDefault();\r\n                enter.call(this, e)\r\n            },\r\n            move = function(location, e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveFocus(location, e)\r\n            };\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            space: space,\r\n            enter: enter,\r\n            leftArrow: move.bind(this, FOCUS_LEFT),\r\n            rightArrow: move.bind(this, FOCUS_RIGHT),\r\n            upArrow: move.bind(this, FOCUS_UP),\r\n            downArrow: move.bind(this, FOCUS_DOWN),\r\n            pageUp: move.bind(this, FOCUS_UP),\r\n            pageDown: move.bind(this, FOCUS_DOWN),\r\n            home: move.bind(this, FOCUS_FIRST),\r\n            end: move.bind(this, FOCUS_LAST)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\r\n            dataSource: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusOnSelectedItem: true,\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: function(data) {\r\n                return data ? data.disabled : void 0\r\n            },\r\n            visibleExpr: function(data) {\r\n                return data ? data.visible : void 0\r\n            }\r\n        })\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return \"item\"\r\n    },\r\n    _init: function() {\r\n        this._compileDisplayGetter();\r\n        this.callBase();\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        var displayExpr = this.option(\"displayExpr\");\r\n        this._displayGetter = displayExpr ? (0, _data.compileGetter)(this.option(\"displayExpr\")) : void 0\r\n    },\r\n    _initTemplates: function() {\r\n        this._initItemsFromMarkup();\r\n        this.callBase();\r\n        this._initDefaultItemTemplate()\r\n    },\r\n    _initDefaultItemTemplate: function() {\r\n        var fieldsMap = this._getFieldsMap();\r\n        this._defaultTemplates.item = new _bindable_template2.default(function($container, data) {\r\n            if ((0, _type.isPlainObject)(data)) {\r\n                this._prepareDefaultItemTemplate(data, $container)\r\n            } else {\r\n                if (fieldsMap && (0, _type.isFunction)(fieldsMap.text)) {\r\n                    data = fieldsMap.text(data)\r\n                }\r\n                $container.text(String(_common2.default.ensureDefined(data, \"\")))\r\n            }\r\n        }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n    },\r\n    _getBindableFields: function() {\r\n        return [\"text\", \"html\"]\r\n    },\r\n    _getFieldsMap: function() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n    },\r\n    _prepareDefaultItemTemplate: function(data, $container) {\r\n        if ((0, _type.isDefined)(data.text)) {\r\n            $container.text(data.text)\r\n        }\r\n        if ((0, _type.isDefined)(data.html)) {\r\n            $container.html(data.html)\r\n        }\r\n    },\r\n    _initItemsFromMarkup: function() {\r\n        var _this = this;\r\n        var $items = this.$element().contents().filter(ITEMS_SELECTOR);\r\n        if (!$items.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        var items = [].slice.call($items).map(function(item) {\r\n            var $item = (0, _renderer2.default)(item);\r\n            var result = (0, _dom.getElementOptions)(item).dxItem;\r\n            var isTemplateRequired = $item.html().trim() && !result.template;\r\n            if (isTemplateRequired) {\r\n                result.template = _this._prepareItemTemplate($item)\r\n            } else {\r\n                $item.remove()\r\n            }\r\n            return result\r\n        });\r\n        this.option(\"items\", items)\r\n    },\r\n    _prepareItemTemplate: function($item) {\r\n        var templateId = ITEM_TEMPLATE_ID_PREFIX + new _guid2.default;\r\n        var $template = $item.detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _cleanRenderedItems: function() {\r\n        this._renderedItemsCount = 0\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(e) {\r\n        this.callBase.apply(this, arguments);\r\n        if ((0, _array.inArray)(e.target, this._focusTarget()) === -1) {\r\n            return\r\n        }\r\n        var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._setFocusedItem($focusedElement)\r\n        } else {\r\n            var $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", (0, _dom.getPublicElement)($activeItem))\r\n            }\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var $target = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n        if ($target.length) {\r\n            this._toggleFocusClass(false, $target)\r\n        }\r\n    },\r\n    _getActiveItem: function(last) {\r\n        var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\r\n        var activeElements = this._getActiveElement();\r\n        var lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    },\r\n    _renderFocusTarget: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._refreshActiveDescendant()\r\n    },\r\n    _moveFocus: function(location) {\r\n        var $newTarget, $items = this._getAvailableItems();\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", (0, _dom.getPublicElement)($newTarget))\r\n        }\r\n    },\r\n    _getVisibleItems: function($itemElements) {\r\n        $itemElements = $itemElements || this._itemElements();\r\n        return $itemElements.filter(\":visible\")\r\n    },\r\n    _getAvailableItems: function($itemElements) {\r\n        return this._getVisibleItems($itemElements).not(\".dx-state-disabled\")\r\n    },\r\n    _prevItem: function($items) {\r\n        var $target = this._getActiveItem(),\r\n            targetIndex = $items.index($target),\r\n            $last = $items.last(),\r\n            $item = (0, _renderer2.default)($items[targetIndex - 1]),\r\n            loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    },\r\n    _nextItem: function($items) {\r\n        var $target = this._getActiveItem(true),\r\n            targetIndex = $items.index($target),\r\n            $first = $items.first(),\r\n            $item = (0, _renderer2.default)($items[targetIndex + 1]),\r\n            loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    },\r\n    _selectFocusedItem: function($target) {\r\n        this.selectItem($target)\r\n    },\r\n    _removeFocusedItem: function(target) {\r\n        var $target = (0, _renderer2.default)(target);\r\n        if ($target.length) {\r\n            this._toggleFocusClass(false, $target);\r\n            $target.removeAttr(\"id\")\r\n        }\r\n    },\r\n    _refreshActiveDescendant: function() {\r\n        this.setAria(\"activedescendant\", \"\");\r\n        this.setAria(\"activedescendant\", this.getFocusedItemId())\r\n    },\r\n    _setFocusedItem: function($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        $target.attr(\"id\", this.getFocusedItemId());\r\n        this._toggleFocusClass(true, $target);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        this._refreshActiveDescendant();\r\n        if (this.option(\"selectOnFocus\")) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    },\r\n    _findItemElementByItem: function(item) {\r\n        var result = (0, _renderer2.default)(),\r\n            that = this;\r\n        this.itemElements().each(function() {\r\n            var $item = (0, _renderer2.default)(this);\r\n            if ($item.data(that._itemDataKey()) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return this.option(\"items\").indexOf(item)\r\n    },\r\n    _itemOptionChanged: function(item, property, value, oldValue) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n    },\r\n    _refreshItem: function($item) {\r\n        var itemData = this._getItemData($item),\r\n            index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    },\r\n    _optionChanged: function(args) {\r\n        if (\"items\" === args.name) {\r\n            var matches = args.fullName.match(ITEM_PATH_REGEX);\r\n            if (matches && matches.length) {\r\n                var property = matches[matches.length - 1],\r\n                    itemPath = args.fullName.replace(\".\" + property, \"\"),\r\n                    item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, args.value, args.previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (args.name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n            case \"focusOnSelectedItem\":\r\n                break;\r\n            case \"focusedElement\":\r\n                this._removeFocusedItem(args.previousValue);\r\n                this._setFocusedItem((0, _renderer2.default)(args.value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _loadNextPage: function() {\r\n        var dataSource = this._dataSource;\r\n        this._expectNextPageLoading();\r\n        dataSource.pageIndex(1 + dataSource.pageIndex());\r\n        return dataSource.load()\r\n    },\r\n    _expectNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = 0\r\n    },\r\n    _expectLastItemLoading: function() {\r\n        this._startIndexForAppendedItems = -1\r\n    },\r\n    _forgetNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = null\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        var items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || this._startIndexForAppendedItems !== -1) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent();\r\n            this._renderFocusTarget()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    },\r\n    _refreshContent: function() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    },\r\n    _dataSourceLoadErrorHandler: function() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    },\r\n    _shouldAppendItems: function() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return false\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer()\r\n    },\r\n    _cleanItemContainer: function() {\r\n        (0, _renderer2.default)(this._itemContainer()).empty()\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    },\r\n    _refresh: function() {\r\n        this._cleanRenderedItems();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContainer: function() {\r\n        return this.$element()\r\n    },\r\n    _itemClass: function() {\r\n        return ITEM_CLASS\r\n    },\r\n    _itemContentClass: function() {\r\n        return this._itemClass() + CONTENT_CLASS_POSTFIX\r\n    },\r\n    _selectedItemClass: function() {\r\n        return SELECTED_ITEM_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemSelector: function() {\r\n        return \".\" + this._itemClass()\r\n    },\r\n    _itemDataKey: function() {\r\n        return ITEM_DATA_KEY\r\n    },\r\n    _itemIndexKey: function() {\r\n        return ITEM_INDEX_KEY\r\n    },\r\n    _itemElements: function() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(COLLECTION_CLASS);\r\n        this._prepareContent()\r\n    },\r\n    _prepareContent: _common2.default.deferRenderer(function() {\r\n        this._renderContentImpl()\r\n    }),\r\n    _renderContent: function() {\r\n        this._fireContentReadyAction()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _attachClickEvent: function() {\r\n        var itemSelector = this._itemSelector(),\r\n            clickEventNamespace = _utils2.default.addNamespace(_click2.default.name, this.NAME),\r\n            pointerDownEventNamespace = _utils2.default.addNamespace(_pointer2.default.down, this.NAME),\r\n            that = this;\r\n        var pointerDownAction = new _action2.default(function(args) {\r\n            var event = args.event;\r\n            that._itemPointerDownHandler(event)\r\n        });\r\n        _events_engine2.default.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        _events_engine2.default.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\r\n        _events_engine2.default.on(this._itemContainer(), clickEventNamespace, itemSelector, function(e) {\r\n            this._itemClickHandler(e)\r\n        }.bind(this));\r\n        _events_engine2.default.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function(e) {\r\n            pointerDownAction.execute({\r\n                element: (0, _renderer2.default)(e.target),\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _itemClickHandler: function(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    },\r\n    _itemPointerDownHandler: function(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = function() {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = null;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            var $target = (0, _renderer2.default)(e.target),\r\n                $closestItem = $target.closest(this._itemElements()),\r\n                $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && $closestFocusable && (0, _array.inArray)($closestFocusable.get(0), this._focusTarget()) !== -1) {\r\n                this.option(\"focusedElement\", (0, _dom.getPublicElement)($closestItem))\r\n            }\r\n        }.bind(this);\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    },\r\n    _closestFocusable: function($target) {\r\n        if ($target.is(_selectors2.default.focusable)) {\r\n            return $target\r\n        } else {\r\n            $target = $target.parent();\r\n            while ($target.length && !_dom_adapter2.default.isDocument($target.get(0))) {\r\n                if ($target.is(_selectors2.default.focusable)) {\r\n                    return $target\r\n                }\r\n                $target = $target.parent()\r\n            }\r\n        }\r\n    },\r\n    _forcePointerDownFocus: function() {\r\n        this._itemFocusHandler && this._itemFocusHandler()\r\n    },\r\n    _updateFocusState: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._forcePointerDownFocus()\r\n    },\r\n    _attachHoldEvent: function() {\r\n        var $itemContainer = this._itemContainer(),\r\n            itemSelector = this._itemSelector(),\r\n            eventName = _utils2.default.addNamespace(_hold2.default.name, this.NAME);\r\n        _events_engine2.default.off($itemContainer, eventName, itemSelector);\r\n        _events_engine2.default.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    },\r\n    _getHoldTimeout: function() {\r\n        return this.option(\"itemHoldTimeout\")\r\n    },\r\n    _shouldFireHoldEvent: function() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        var $itemContainer = this._itemContainer(),\r\n            itemSelector = this._itemSelector(),\r\n            eventName = _utils2.default.addNamespace(_contextmenu2.default.name, this.NAME);\r\n        _events_engine2.default.off($itemContainer, eventName, itemSelector);\r\n        _events_engine2.default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this.option(\"items\") || [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n    },\r\n    _renderItems: function(items) {\r\n        if (items.length) {\r\n            _iterator2.default.each(items, function(index, itemData) {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }.bind(this))\r\n        }\r\n        this._renderEmptyMessage()\r\n    },\r\n    _renderItem: function(index, itemData, $container, $itemToReplace) {\r\n        $container = $container || this._itemContainer();\r\n        var $itemFrame = this._renderItemFrame(index, itemData, $container, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, index);\r\n        $itemFrame.attr(this.option(\"_itemAttributes\"));\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        var $itemContent = this._getItemContent($itemFrame);\r\n        var renderContentPromise = this._renderItemContent({\r\n            index: index,\r\n            itemData: itemData,\r\n            container: (0, _dom.getPublicElement)($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: this.option(\"itemTemplate\")\r\n        });\r\n        var that = this;\r\n        (0, _deferred.when)(renderContentPromise).done(function($itemContent) {\r\n            that._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $itemContent,\r\n                itemData: itemData,\r\n                itemIndex: index\r\n            });\r\n            that._executeItemRenderAction(index, itemData, (0, _dom.getPublicElement)($itemFrame))\r\n        });\r\n        return $itemFrame\r\n    },\r\n    _getItemContent: function($itemFrame) {\r\n        var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        return $itemContent\r\n    },\r\n    _attachItemClickEvent: function(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        _events_engine2.default.on($itemElement, _click2.default.name, function(e) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }.bind(this))\r\n    },\r\n    _renderItemContent: function(args) {\r\n        var itemTemplateName = this._getItemTemplateName(args);\r\n        var itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        var $templateResult = (0, _renderer2.default)(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    },\r\n    _renderItemContentByNode: function(args, $node) {\r\n        (0, _renderer2.default)(args.container).replaceWith($node);\r\n        args.container = (0, _dom.getPublicElement)($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    },\r\n    _addItemContentClasses: function(args) {\r\n        var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\r\n        (0, _renderer2.default)(args.container).addClass(classes.join(\" \"))\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    },\r\n    _renderItemFrame: function(index, itemData, $container, $itemToReplace) {\r\n        var $itemFrame = (0, _renderer2.default)(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if ($itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        return $itemFrame\r\n    },\r\n    _itemOptions: function() {\r\n        var that = this;\r\n        return {\r\n            watchMethod: function() {\r\n                return that.option(\"integrationOptions.watchMethod\")\r\n            },\r\n            fieldGetter: function(field) {\r\n                var expr = that.option(field + \"Expr\"),\r\n                    getter = (0, _data.compileGetter)(expr);\r\n                return getter\r\n            }\r\n        }\r\n    },\r\n    _postprocessRenderItem: _common2.default.noop,\r\n    _executeItemRenderAction: function(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    },\r\n    _setElementData: function(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    },\r\n    _createItemRenderAction: function() {\r\n        return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"designMode\", \"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        })\r\n    },\r\n    _getItemRenderAction: function() {\r\n        return this._itemRenderAction || this._createItemRenderAction()\r\n    },\r\n    _getItemTemplateName: function(args) {\r\n        var data = args.itemData,\r\n            templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\"),\r\n            template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    },\r\n    _createItemByTemplate: function(itemTemplate, renderArgs) {\r\n        return itemTemplate.render({\r\n            model: renderArgs.itemData,\r\n            container: renderArgs.container,\r\n            index: renderArgs.index\r\n        })\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._itemContainer()\r\n    },\r\n    _renderEmptyMessage: function(items) {\r\n        items = items || this.option(\"items\");\r\n        var noDataText = this.option(\"noDataText\"),\r\n            hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData || (0, _renderer2.default)(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\r\n            this.setAria(\"label\", noDataText)\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    },\r\n    _itemDXEventHandler: function(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, (0, _extend.extend)(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    },\r\n    _itemEventHandler: function(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        var action = this._createActionByOption(handlerOptionName, (0, _extend.extend)({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerByHandler: function(initiator, handler, actionArgs, actionConfig) {\r\n        var action = this._createAction(handler, (0, _extend.extend)({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerImpl: function(initiator, action, actionArgs) {\r\n        var $itemElement = this._closestItemElement((0, _renderer2.default)(initiator)),\r\n            args = (0, _extend.extend)({}, actionArgs);\r\n        return action((0, _extend.extend)(actionArgs, this._extendActionArgs($itemElement), args))\r\n    },\r\n    _extendActionArgs: function($itemElement) {\r\n        return {\r\n            itemElement: (0, _dom.getPublicElement)($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    },\r\n    _closestItemElement: function($element) {\r\n        return (0, _renderer2.default)($element).closest(this._itemSelector())\r\n    },\r\n    _getItemData: function(itemElement) {\r\n        return (0, _renderer2.default)(itemElement).data(this._itemDataKey())\r\n    },\r\n    _getSummaryItemsWidth: function(items, includeMargin) {\r\n        var result = 0;\r\n        if (items) {\r\n            _iterator2.default.each(items, function(_, item) {\r\n                result += (0, _renderer2.default)(item).outerWidth(includeMargin || false)\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    getFocusedItemId: function() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = \"dx-\" + new _guid2.default\r\n        }\r\n        return this._focusedItemId\r\n    },\r\n    itemElements: function() {\r\n        return this._itemElements()\r\n    },\r\n    itemsContainer: function() {\r\n        return this._itemContainer()\r\n    }\r\n}).include(_data_helper2.default);\r\nCollectionWidget.ItemClass = _item2.default;\r\nmodule.exports = CollectionWidget;\r\n"]},"metadata":{},"sourceType":"script"}