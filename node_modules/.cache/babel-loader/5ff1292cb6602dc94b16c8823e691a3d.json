{"ast":null,"code":"/**\r\n * DevExtreme (ui/widget/ui.keyboard_processor.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _class = require(\"../../core/class\");\n\nvar _class2 = _interopRequireDefault(_class);\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _utils = require(\"../../events/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COMPOSITION_START_EVENT = \"compositionstart\";\nvar COMPOSITION_END_EVENT = \"compositionend\";\nvar KEYDOWN_EVENT = \"keydown\";\nvar NAMESPACE = \"KeyboardProcessor\";\n\nvar KeyboardProcessor = _class2.default.inherit({\n  _keydown: (0, _utils.addNamespace)(KEYDOWN_EVENT, NAMESPACE),\n  _compositionStart: (0, _utils.addNamespace)(COMPOSITION_START_EVENT, NAMESPACE),\n  _compositionEnd: (0, _utils.addNamespace)(COMPOSITION_END_EVENT, NAMESPACE),\n  ctor: function (options) {\n    var _this = this;\n\n    options = options || {};\n\n    if (options.element) {\n      this._element = (0, _renderer2.default)(options.element);\n    }\n\n    if (options.focusTarget) {\n      this._focusTarget = options.focusTarget;\n    }\n\n    this._handler = options.handler;\n    this._context = options.context;\n    this._childProcessors = [];\n\n    if (this._element) {\n      this._processFunction = function (e) {\n        _this.process(e);\n      };\n\n      this._toggleProcessingWithContext = this.toggleProcessing.bind(this);\n\n      _events_engine2.default.on(this._element, this._keydown, this._processFunction);\n\n      _events_engine2.default.on(this._element, this._compositionStart, this._toggleProcessingWithContext);\n\n      _events_engine2.default.on(this._element, this._compositionEnd, this._toggleProcessingWithContext);\n    }\n  },\n  dispose: function () {\n    if (this._element) {\n      _events_engine2.default.off(this._element, this._keydown, this._processFunction);\n\n      _events_engine2.default.off(this._element, this._compositionStart, this._toggleProcessingWithContext);\n\n      _events_engine2.default.off(this._element, this._compositionEnd, this._toggleProcessingWithContext);\n    }\n\n    this._element = void 0;\n    this._handler = void 0;\n    this._context = void 0;\n    this._childProcessors = void 0;\n  },\n  clearChildren: function () {\n    this._childProcessors = [];\n  },\n  push: function (child) {\n    if (!this._childProcessors) {\n      this.clearChildren();\n    }\n\n    this._childProcessors.push(child);\n\n    return child;\n  },\n  attachChildProcessor: function () {\n    var childProcessor = new KeyboardProcessor();\n\n    this._childProcessors.push(childProcessor);\n\n    return childProcessor;\n  },\n  reinitialize: function (childHandler, childContext) {\n    this._context = childContext;\n    this._handler = childHandler;\n    return this;\n  },\n  process: function (e) {\n    var isNotFocusTarget = this._focusTarget && this._focusTarget !== e.target && (0, _array.inArray)(e.target, this._focusTarget) < 0;\n    var shouldSkipProcessing = this._isComposingJustFinished && 229 === e.which || this._isComposing || isNotFocusTarget;\n    this._isComposingJustFinished = false;\n\n    if (shouldSkipProcessing) {\n      return false;\n    }\n\n    var args = {\n      keyName: (0, _utils.normalizeKeyName)(e),\n      key: e.key,\n      code: e.code,\n      ctrl: e.ctrlKey,\n      location: e.location,\n      metaKey: e.metaKey,\n      shift: e.shiftKey,\n      alt: e.altKey,\n      which: e.which,\n      originalEvent: e\n    };\n\n    var handlerResult = this._handler && this._handler.call(this._context, args);\n\n    if (handlerResult && this._childProcessors) {\n      (0, _iterator.each)(this._childProcessors, function (index, childProcessor) {\n        childProcessor.process(e);\n      });\n    }\n  },\n  toggleProcessing: function (_ref) {\n    var type = _ref.type;\n    this._isComposing = type === COMPOSITION_START_EVENT;\n    this._isComposingJustFinished = !this._isComposing;\n  }\n});\n\nmodule.exports = KeyboardProcessor;","map":{"version":3,"sources":["C:/Users/abdel/PhpstormProjects/editeur_scenario_jeu/node_modules/devextreme/ui/widget/ui.keyboard_processor.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_class","_class2","_array","_iterator","_utils","obj","__esModule","COMPOSITION_START_EVENT","COMPOSITION_END_EVENT","KEYDOWN_EVENT","NAMESPACE","KeyboardProcessor","default","inherit","_keydown","addNamespace","_compositionStart","_compositionEnd","ctor","options","_this","element","_element","focusTarget","_focusTarget","_handler","handler","_context","context","_childProcessors","_processFunction","e","process","_toggleProcessingWithContext","toggleProcessing","bind","on","dispose","off","clearChildren","push","child","attachChildProcessor","childProcessor","reinitialize","childHandler","childContext","isNotFocusTarget","target","inArray","shouldSkipProcessing","_isComposingJustFinished","which","_isComposing","args","keyName","normalizeKeyName","key","code","ctrl","ctrlKey","location","metaKey","shift","shiftKey","alt","altKey","originalEvent","handlerResult","call","each","index","_ref","type","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/widget/ui.keyboard_processor.js)\r\n * Version: 18.2.13\r\n * Build date: Wed May 27 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _class = require(\"../../core/class\");\r\nvar _class2 = _interopRequireDefault(_class);\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _utils = require(\"../../events/utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COMPOSITION_START_EVENT = \"compositionstart\";\r\nvar COMPOSITION_END_EVENT = \"compositionend\";\r\nvar KEYDOWN_EVENT = \"keydown\";\r\nvar NAMESPACE = \"KeyboardProcessor\";\r\nvar KeyboardProcessor = _class2.default.inherit({\r\n    _keydown: (0, _utils.addNamespace)(KEYDOWN_EVENT, NAMESPACE),\r\n    _compositionStart: (0, _utils.addNamespace)(COMPOSITION_START_EVENT, NAMESPACE),\r\n    _compositionEnd: (0, _utils.addNamespace)(COMPOSITION_END_EVENT, NAMESPACE),\r\n    ctor: function(options) {\r\n        var _this = this;\r\n        options = options || {};\r\n        if (options.element) {\r\n            this._element = (0, _renderer2.default)(options.element)\r\n        }\r\n        if (options.focusTarget) {\r\n            this._focusTarget = options.focusTarget\r\n        }\r\n        this._handler = options.handler;\r\n        this._context = options.context;\r\n        this._childProcessors = [];\r\n        if (this._element) {\r\n            this._processFunction = function(e) {\r\n                _this.process(e)\r\n            };\r\n            this._toggleProcessingWithContext = this.toggleProcessing.bind(this);\r\n            _events_engine2.default.on(this._element, this._keydown, this._processFunction);\r\n            _events_engine2.default.on(this._element, this._compositionStart, this._toggleProcessingWithContext);\r\n            _events_engine2.default.on(this._element, this._compositionEnd, this._toggleProcessingWithContext)\r\n        }\r\n    },\r\n    dispose: function() {\r\n        if (this._element) {\r\n            _events_engine2.default.off(this._element, this._keydown, this._processFunction);\r\n            _events_engine2.default.off(this._element, this._compositionStart, this._toggleProcessingWithContext);\r\n            _events_engine2.default.off(this._element, this._compositionEnd, this._toggleProcessingWithContext)\r\n        }\r\n        this._element = void 0;\r\n        this._handler = void 0;\r\n        this._context = void 0;\r\n        this._childProcessors = void 0\r\n    },\r\n    clearChildren: function() {\r\n        this._childProcessors = []\r\n    },\r\n    push: function(child) {\r\n        if (!this._childProcessors) {\r\n            this.clearChildren()\r\n        }\r\n        this._childProcessors.push(child);\r\n        return child\r\n    },\r\n    attachChildProcessor: function() {\r\n        var childProcessor = new KeyboardProcessor;\r\n        this._childProcessors.push(childProcessor);\r\n        return childProcessor\r\n    },\r\n    reinitialize: function(childHandler, childContext) {\r\n        this._context = childContext;\r\n        this._handler = childHandler;\r\n        return this\r\n    },\r\n    process: function(e) {\r\n        var isNotFocusTarget = this._focusTarget && this._focusTarget !== e.target && (0, _array.inArray)(e.target, this._focusTarget) < 0;\r\n        var shouldSkipProcessing = this._isComposingJustFinished && 229 === e.which || this._isComposing || isNotFocusTarget;\r\n        this._isComposingJustFinished = false;\r\n        if (shouldSkipProcessing) {\r\n            return false\r\n        }\r\n        var args = {\r\n            keyName: (0, _utils.normalizeKeyName)(e),\r\n            key: e.key,\r\n            code: e.code,\r\n            ctrl: e.ctrlKey,\r\n            location: e.location,\r\n            metaKey: e.metaKey,\r\n            shift: e.shiftKey,\r\n            alt: e.altKey,\r\n            which: e.which,\r\n            originalEvent: e\r\n        };\r\n        var handlerResult = this._handler && this._handler.call(this._context, args);\r\n        if (handlerResult && this._childProcessors) {\r\n            (0, _iterator.each)(this._childProcessors, function(index, childProcessor) {\r\n                childProcessor.process(e)\r\n            })\r\n        }\r\n    },\r\n    toggleProcessing: function(_ref) {\r\n        var type = _ref.type;\r\n        this._isComposing = type === COMPOSITION_START_EVENT;\r\n        this._isComposingJustFinished = !this._isComposing\r\n    }\r\n});\r\nmodule.exports = KeyboardProcessor;\r\n"]},"metadata":{},"sourceType":"script"}